<html>
<head><meta charset="utf-8"><title>Test issues · JavaScript_pi · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/index.html">JavaScript_pi</a></h2>
<h3>Topic: <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Test.20issues.html">Test issues</a></h3>

<hr>

<base href="https://opencpn.zulipchat.com">

<head><link href="https://leamas.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="310580945"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Test%20issues/near/310580945" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Rossiter <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Test.20issues.html#310580945">(Nov 17 2022 at 10:25)</a>:</h4>
<p><a href="/user_uploads/33951/esU7dcG-kb9ks9dXbmXCtwsr/recents.jpg">Recent Scripts </a> <br>
The colon seems to split the filepath into two lines. (Windows)</p>
<div class="message_inline_image"><a href="/user_uploads/33951/esU7dcG-kb9ks9dXbmXCtwsr/recents.jpg" title="Recent Scripts "><img src="/user_uploads/33951/esU7dcG-kb9ks9dXbmXCtwsr/recents.jpg"></a></div>



<a name="310583973"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Test%20issues/near/310583973" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Rossiter <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Test.20issues.html#310583973">(Nov 17 2022 at 10:45)</a>:</h4>
<p><a href="/user_uploads/33951/TKhYyrFHQNp8wtLwLryimZAJ/Parking-Tests.jpg">Parking-Tests</a> <br>
The parked console width has not changed.<br>
Parking positions on my screen are too high. Is the height of the parked console used to calculate vertical position of the parked console?</p>
<div class="message_inline_image"><a href="/user_uploads/33951/TKhYyrFHQNp8wtLwLryimZAJ/Parking-Tests.jpg" title="Parking-Tests"><img src="/user_uploads/33951/TKhYyrFHQNp8wtLwLryimZAJ/Parking-Tests.jpg"></a></div>



<a name="310584674"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Test%20issues/near/310584674" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Voss <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Test.20issues.html#310584674">(Nov 17 2022 at 10:50)</a>:</h4>
<p><span class="user-mention silent" data-user-id="399559">Mike Rossiter</span> <a href="#narrow/stream/349785-JavaScript_pi/topic/Test.20issues/near/310580945">said</a>:</p>
<blockquote>
<p><a href="/user_uploads/33951/esU7dcG-kb9ks9dXbmXCtwsr/recents.jpg">Recent Scripts </a> <br>
The colon seems to split the filepath into two lines. (Windows)</p>
</blockquote>
<p>I guess this is only after you have disabled an re-enabled the plugin, thus causing the list to be loaded from the .in file?</p>



<a name="310587386"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Test%20issues/near/310587386" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Rossiter <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Test.20issues.html#310587386">(Nov 17 2022 at 11:07)</a>:</h4>
<p>The <em>.ini</em> file uses colons as separators causing the C to be split off. Can another character be used?</p>



<a name="310593263"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Test%20issues/near/310593263" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Voss <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Test.20issues.html#310593263">(Nov 17 2022 at 11:47)</a>:</h4>
<p><span class="user-mention silent" data-user-id="399559">Mike Rossiter</span> <a href="#narrow/stream/349785-JavaScript_pi/topic/Test.20issues/near/310587386">said</a>:</p>
<blockquote>
<p>The <em>.ini</em> file uses colons as separators causing the C to be split off. Can another character be used?</p>
</blockquote>
<p>Ah!  I see.  colon is used in Windows filestrings as in C:\ccc\ccc<br>
I will change to semicolon.</p>



<a name="310606038"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Test%20issues/near/310606038" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Voss <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Test.20issues.html#310606038">(Nov 17 2022 at 13:08)</a>:</h4>
<p><span class="user-mention silent" data-user-id="399559">Mike Rossiter</span> <a href="#narrow/stream/349785-JavaScript_pi/topic/Test.20issues/near/310583973">said</a>:</p>
<blockquote>
<p><a href="/user_uploads/33951/TKhYyrFHQNp8wtLwLryimZAJ/Parking-Tests.jpg">Parking-Tests</a> <br>
The parked console width has not changed.<br>
Parking positions on my screen are too high. Is the height of the parked console used to calculate vertical position of the parked console?</p>
</blockquote>
<p><strong>Vertical</strong><br>
Yes, the minimum  height of a console is set thus<br>
<code>JavaScript_pi.h:33: #define MIN_CONSOLE_HEIGHT 28</code><br>
This value works fine for MacOS on both standard and retina displays  but it looks too large for Windows.</p>
<p>The vertical position is set thus:<br>
<code>JSExtensions.cpp:565:     parkingBase = canvasPosition.y - MIN_CONSOLE_HEIGHT - cill;</code><br>
cill is 3 and tweaks the white space below the nam text.<br>
Reducing MIN_CONSOLE_HEIGHT should therefore move the parked console up a bit - hopefully into the canvas top margin.</p>
<p><strong>Width</strong><br>
In your screenshot, the different consoles are of different width but possibly they do not vary enough.  Width is set by<br>
JavaScriptgui_imp.h: 1039        int minWidth = 80 + mConsoleName.Length() * 8;<br>
This might need tweaking.</p>
<p>Your screenshot looks like it was taken at the end of the test script.  The rightmost console has had its name changed from <code>ConsoleE</code> to <code>2</code> to check that the window is shrunk accordingly, which it appears not to have done.  I found it takes a moment for this to happen, so the test script has a delay built in to allow for it to happen.  Perhaps on Windows there is no automatic refresh?  You could try manually reducing that console by dragging it smaller to confirm the minimum width has been reduced to the correct size.  Alternatively, can you try doing something that causes a refresh to see whether that makes the shrinking apparent?</p>
<p>Let me know if you want me to rebuild with changes. I would have to guess  changes to MIN_CONSOLE_HEIGHT as it needs trial and error.</p>



<a name="310620559"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Test%20issues/near/310620559" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Rossiter <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Test.20issues.html#310620559">(Nov 17 2022 at 14:30)</a>:</h4>
<blockquote>
<p>MIN_CONSOLE_HEIGHT 28<br>
This value works fine for MacOS on both standard and retina displays but it looks too large for Windows.</p>
</blockquote>
<p>Can you try a smaller size and I will re-test?</p>
<blockquote>
<p>something that causes a refresh to see whether that makes the shrinking apparent?</p>
</blockquote>
<p>But, but ... The consoles are at the top of the main monitor screen, independent of the OpenCPN screen. No way to refresh?</p>
<p>The good news - no other obvious problems.</p>



<a name="310646532"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Test%20issues/near/310646532" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Rossiter <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Test.20issues.html#310646532">(Nov 17 2022 at 16:25)</a>:</h4>
<p>Having trouble finding two definitions:<br>
chooseFileString<br>
chooseLoadFile<br>
Where are these found?</p>



<a name="310674581"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Test%20issues/near/310674581" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Voss <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Test.20issues.html#310674581">(Nov 17 2022 at 18:43)</a>:</h4>
<p><span class="user-mention silent" data-user-id="399559">Mike Rossiter</span> <a href="#narrow/stream/349785-JavaScript_pi/topic/Test.20issues/near/310646532">said</a>:</p>
<blockquote>
<p>Having trouble finding two definitions:<br>
chooseFileString<br>
chooseLoadFile<br>
Where are these found?</p>
</blockquote>
<p>fileOrganiser.cpp:186: wxString chooseFileString(Console* pConsole){<br>
fileOrganiser.cpp:51: wxString chooseLoadFile(Console* console){</p>



<a name="310675635"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Test%20issues/near/310675635" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Voss <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Test.20issues.html#310675635">(Nov 17 2022 at 18:49)</a>:</h4>
<p>Have built with</p>
<ul>
<li>separator char ; instead of :</li>
<li>MIN_CONSOLE_HEIGHT for Windows reduced for Windows<br>
In JavaScript_pi.h:<br>
<code>// Minimised console height is platform dependent
#ifdef __WXMSW__
#define MIN_CONSOLE_HEIGHT 16
#else
#define MIN_CONSOLE_HEIGHT 28
#endif</code><br>
Build is javascript-2.0-msvc-10.0.14393-tarball==2.0.0-alpha+47.7e2b2e4</li>
</ul>



<a name="310679694"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Test%20issues/near/310679694" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Rossiter <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Test.20issues.html#310679694">(Nov 17 2022 at 19:08)</a>:</h4>
<blockquote>
<p>fileOrganiser.cpp:186: wxString chooseFileString(Console* pConsole){<br>
fileOrganiser.cpp:51: wxString chooseLoadFile(Console* console){</p>
</blockquote>
<p>Without an include Visual Studio 2019 is complaining about a lack of reference.</p>



<a name="310719058"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Test%20issues/near/310719058" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Voss <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Test.20issues.html#310719058">(Nov 17 2022 at 23:27)</a>:</h4>
<p>Include what?  Sorry - don’t understand.</p>



<a name="310761274"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Test%20issues/near/310761274" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Voss <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Test.20issues.html#310761274">(Nov 18 2022 at 07:20)</a>:</h4>
<p>Following fix for : separator in recents, you can clear out duff Recents by using the Organiser to make them Favourites and then removing them as Favourite.</p>



<a name="310761576"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Test%20issues/near/310761576" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Voss <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Test.20issues.html#310761576">(Nov 18 2022 at 07:23)</a>:</h4>
<p>Best delete any badly parked consoles before testing new version.  Parking notes anybpresently parked one’s.</p>



<a name="310763813"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Test%20issues/near/310763813" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Rossiter <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Test.20issues.html#310763813">(Nov 18 2022 at 07:45)</a>:</h4>
<blockquote>
<p>Include what? Sorry - don’t understand.</p>
</blockquote>
<p><em>fileOrganiser.cpp</em> is not listed in <em>Plugin.cmake</em>. By include I meant <br>
<code>#include fileOrganiser.cpp</code><br>
But adding to <em>Plugin.cmake</em> may be enough.</p>



<a name="310786719"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Test%20issues/near/310786719" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Voss <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Test.20issues.html#310786719">(Nov 18 2022 at 10:20)</a>:</h4>
<p><span class="user-mention silent" data-user-id="399559">Mike Rossiter</span> <a href="#narrow/stream/349785-JavaScript_pi/topic/Test.20issues/near/310763813">said</a>:</p>
<blockquote>
<blockquote>
<p>Include what? Sorry - don’t understand.</p>
</blockquote>
<p><em>fileOrganiser.cpp</em> is not listed in <em>Plugin.cmake</em>. By include I meant <br>
<code>#include fileOrganiser.cpp</code><br>
But adding to <em>Plugin.cmake</em> may be enough.</p>
</blockquote>
<p>Odd - it was in my copy.  Have now sorted the list of src files which also touched it.  Pushed.</p>



<a name="310789102"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Test%20issues/near/310789102" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Rossiter <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Test.20issues.html#310789102">(Nov 18 2022 at 10:33)</a>:</h4>
<p>Recent scripts problem is fixed.<br>
<em>Parking.js</em><br>
The shrink part is not working for me.<br>
The script deletes the consoles when run from the main console, but not when the script is run as part of <em>00_main.js</em>.</p>



<a name="310789437"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Test%20issues/near/310789437" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Rossiter <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Test.20issues.html#310789437">(Nov 18 2022 at 10:35)</a>:</h4>
<p>Unable to add a console with <em>JavaScript Tools</em> button. Or change the name of a console.</p>



<a name="310790111"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Test%20issues/near/310790111" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Rossiter <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Test.20issues.html#310790111">(Nov 18 2022 at 10:39)</a>:</h4>
<blockquote>
<p>Odd - it was in my copy</p>
</blockquote>
<p>Maybe my messing. I have been playing with a version for O5.8. Windows build is fine apart from an icon issue. Not sure about MacOS. Tarball is here:<br>
<a href="https://cloudsmith.io/~mike-rossiter/repos/javascript-alpha/packages/">https://cloudsmith.io/~mike-rossiter/repos/javascript-alpha/packages/</a></p>



<a name="310791190"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Test%20issues/near/310791190" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Rossiter <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Test.20issues.html#310791190">(Nov 18 2022 at 10:46)</a>:</h4>
<blockquote>
<p>Unable to add a console with JavaScript Tools button. Or change the name of a console</p>
</blockquote>
<p>But I can paste a name into the textbox and add/change the name.</p>



<a name="310802701"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Test%20issues/near/310802701" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Voss <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Test.20issues.html#310802701">(Nov 18 2022 at 11:52)</a>:</h4>
<p><span class="user-mention silent" data-user-id="399559">Mike Rossiter</span> <a href="#narrow/stream/349785-JavaScript_pi/topic/Test.20issues/near/310791190">said</a>:</p>
<blockquote>
<blockquote>
<p>Unable to add a console with JavaScript Tools button. Or change the name of a console</p>
</blockquote>
<p>But I can paste a name into the textbox and add/change the name.</p>
</blockquote>
<p>It seems that validation as you type is not applied on paste.<br>
V2 has an extra bit in the constructor which I had attempted to only include for Apple but got it wrong.<br>
Just pushed (11:48) version that should omit this entirely for non-apple.  It is working  for Apple now.<br>
If not apple, it should be as was in V1.2.<br>
Please test again.<br>
`<br>
 ToolsClass( wxWindow *parent,  wxWindowID id = wxID_ANY, const wxString&amp; title = wxEmptyString, const wxPoint&amp; pos = wxDefaultPosition, const wxSize&amp; size = wxDefaultSize, long style = wxDEFAULT_DIALOG_STYLE )<br>
        :ToolsClassBase(parent, id, title, pos, size, style)<br>
        {</p>
<div class="codehilite"><pre><span></span><code>    // adding extra _ to list of valid chards via wxFormBuilder does not work.  Bug in wxWidgets?
    // so we will do it this way
    // this not yet available in wxWidgets as used by Windows and Linux so only for Apple for now`
</code></pre></div>

<p>#ifdef __APPLE__<br>
        wxTextValidator* validator;<br>
        validator = (wxTextValidator*)m_newConsoleName-&gt;GetValidator();<br>
        validator-&gt;AddCharIncludes("_");   <br>
        validator = (wxTextValidator*)m_changedName-&gt;GetValidator();<br>
        validator-&gt;AddCharIncludes("_");<br>
#endif</p>
<div class="codehilite"><pre><span></span><code>   this-&gt;resizeDialogue(0); // we open on first page
    }
</code></pre></div>

<p>`</p>



<a name="310803105"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Test%20issues/near/310803105" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Voss <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Test.20issues.html#310803105">(Nov 18 2022 at 11:55)</a>:</h4>
<p><span class="user-mention silent" data-user-id="399559">Mike Rossiter</span> <a href="#narrow/stream/349785-JavaScript_pi/topic/Test.20issues/near/310789102">said</a>:</p>
<blockquote>
<p>Recent scripts problem is fixed.<br>
<em>Parking.js</em><br>
The shrink part is not working for me.<br>
The script deletes the consoles when run from the main console, but not when the script is run as part of <em>00_main.js</em>.</p>
</blockquote>
<p>Screen shot before exiting parking test please.</p>



<a name="310807148"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Test%20issues/near/310807148" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Rossiter <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Test.20issues.html#310807148">(Nov 18 2022 at 12:18)</a>:</h4>
<p>Adding/renaming is still not playing for me.</p>
<blockquote>
<p>but not when the script is run as part of 00_main.js.</p>
</blockquote>
<p><em>shrinkYourself</em> is not playing.<br>
The problem of not removing consoles happens when an error is reported. Script finishes leaving consoles in place.<br>
Also after the rename to "<em>Maximum_length</em>" the name changes back to <em>ConsoleE</em> before the script departs.  Is this Ok?</p>
<p><a href="/user_uploads/33951/LraNpoLGLSxF29jp65EXJrmo/Parking-Tests-3.jpg">Parking-Tests-3</a> <a href="/user_uploads/33951/Cy96_W6Zjd3kX3tpCC0sW2g_/Parking-Tests-2.jpg">Parking-Tests-2</a></p>
<div class="message_inline_image"><a href="/user_uploads/33951/LraNpoLGLSxF29jp65EXJrmo/Parking-Tests-3.jpg" title="Parking-Tests-3"><img src="/user_uploads/33951/LraNpoLGLSxF29jp65EXJrmo/Parking-Tests-3.jpg"></a></div><div class="message_inline_image"><a href="/user_uploads/33951/Cy96_W6Zjd3kX3tpCC0sW2g_/Parking-Tests-2.jpg" title="Parking-Tests-2"><img src="/user_uploads/33951/Cy96_W6Zjd3kX3tpCC0sW2g_/Parking-Tests-2.jpg"></a></div>



<a name="310900459"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Test%20issues/near/310900459" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Voss <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Test.20issues.html#310900459">(Nov 18 2022 at 18:59)</a>:</h4>
<p>Much changes Parking.js to clean up under all circumstances.  You will need to <a href="https://github.com/antipole2/JavaScript_pi/blob/7aec92782232acbf325888aec60c4782f734592c/Tests_scripts/44_parking.js">re-download it from my repository</a>.</p>
<p>I have completely rewritten how the console minimisation and parking constants are set up for various platforms.  They are now in consolePositioning.h.  I have had a guess at the settings for Windows but I expect they will need tweaking.   There are instructions in the Technical Guide on how to do this.   I include a copy to save you looking in there.<br>
You can either send me screen shots so I can try tweaking and rebuild for you or, if you are willing, you could tweak the settings yourself and let me know the desired values.  A screen shot would also be welcome.<br>
Thanks so much for your help here.<br>
<a href="/user_uploads/33951/FzrIAPnsDdCcTu7i8C6knMeE/Screenshot-2022-11-18-at-18.58.27.png">Screenshot-2022-11-18-at-18.58.27.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/33951/FzrIAPnsDdCcTu7i8C6knMeE/Screenshot-2022-11-18-at-18.58.27.png" title="Screenshot-2022-11-18-at-18.58.27.png"><img src="/user_uploads/33951/FzrIAPnsDdCcTu7i8C6knMeE/Screenshot-2022-11-18-at-18.58.27.png"></a></div>



<a name="311042494"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Test%20issues/near/311042494" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Rossiter <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Test.20issues.html#311042494">(Nov 19 2022 at 16:34)</a>:</h4>
<p>Boat maintenance today. I will test <em>Parking.js</em> tomorrow.</p>



<a name="311054270"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Test%20issues/near/311054270" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Voss <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Test.20issues.html#311054270">(Nov 19 2022 at 18:20)</a>:</h4>
<p>I have improved the instructions for setting the constants for minimising and parking consoles.  Herewith an updated copy.  While it will take time to work through,  it should give good results.  The parking feature has really opened up the usability of the plugin with multiple scripts.<br>
<a href="/user_uploads/33951/t3FhEydjid4C_TO7JY1of7xj/Configure-parking.png">Configure-parking.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/33951/t3FhEydjid4C_TO7JY1of7xj/Configure-parking.png" title="Configure-parking.png"><img src="/user_uploads/33951/t3FhEydjid4C_TO7JY1of7xj/Configure-parking.png"></a></div>



<a name="311127388"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Test%20issues/near/311127388" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Rossiter <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Test.20issues.html#311127388">(Nov 20 2022 at 11:39)</a>:</h4>
<p><code>MIN_CONSOLE_HEIGHT</code> left in code.<br>
<code>CONSOLE_MIN_HEIGHT</code> used in <em>consolePositioning.h</em>. This is what I have now used.</p>



<a name="311127545"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Test%20issues/near/311127545" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Rossiter <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Test.20issues.html#311127545">(Nov 20 2022 at 11:40)</a>:</h4>
<p><em>consolePositining.h</em> needs adding to <em>Plugin.cmake</em>.</p>



<a name="311128478"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Test%20issues/near/311128478" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Voss <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Test.20issues.html#311128478">(Nov 20 2022 at 11:49)</a>:</h4>
<p><span class="user-mention silent" data-user-id="399559">Mike Rossiter</span> <a href="#narrow/stream/349785-JavaScript_pi/topic/Test.20issues/near/311127545">said</a>:</p>
<blockquote>
<p><em>consolePositining.h</em> needs adding to <em>Plugin.cmake</em>.</p>
</blockquote>
<p>Added</p>



<a name="311128695"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Test%20issues/near/311128695" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Voss <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Test.20issues.html#311128695">(Nov 20 2022 at 11:51)</a>:</h4>
<p><span class="user-mention silent" data-user-id="399559">Mike Rossiter</span> <a href="#narrow/stream/349785-JavaScript_pi/topic/Test.20issues/near/311127388">said</a>:</p>
<blockquote>
<p><code>MIN_CONSOLE_HEIGHT</code> left in code.<br>
<code>CONSOLE_MIN_HEIGHT</code> used in <em>consolePositioning.h</em>. This is what I have now used.</p>
</blockquote>
<p>Sorry - don't understand what you are telling me with either of these lines</p>



<a name="311129071"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Test%20issues/near/311129071" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Rossiter <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Test.20issues.html#311129071">(Nov 20 2022 at 11:55)</a>:</h4>
<p><code>MIN_CONSOLE_HEIGHT</code> is used in <em>JavaScriptgui_impl.h</em>. This definition not found. It should be <code>CONSOLE_MIN_HEIGHT</code>, coming from <em>consolePositioning.h</em>.</p>



<a name="311130231"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Test%20issues/near/311130231" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Voss <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Test.20issues.html#311130231">(Nov 20 2022 at 12:05)</a>:</h4>
<p><span class="user-mention silent" data-user-id="554731">Tony Voss</span> <a href="#narrow/stream/349785-JavaScript_pi/topic/Test.20issues/near/311128695">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="399559">Mike Rossiter</span> <a href="#narrow/stream/349785-JavaScript_pi/topic/Test.20issues/near/311127388">said</a>:</p>
<blockquote>
<p><code>MIN_CONSOLE_HEIGHT</code> left in code.<br>
<code>CONSOLE_MIN_HEIGHT</code> used in <em>consolePositioning.h</em>. This is what I have now used.</p>
</blockquote>
<p>Sorry - don't understand what you are telling me with either of these lines</p>
</blockquote>
<p>Now I do - will fix</p>



<a name="311130980"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Test%20issues/near/311130980" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Voss <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Test.20issues.html#311130980">(Nov 20 2022 at 12:11)</a>:</h4>
<p>Don't know how that CONSOLE_MIN_HEIGHT error stayed in, since it complied for me.<br>
Anyhow now fixed and rebuilds in progress as I type.</p>



<a name="311145150"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Test%20issues/near/311145150" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Rossiter <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Test.20issues.html#311145150">(Nov 20 2022 at 14:13)</a>:</h4>
<p>For the tools dialog I added #ifdef in <em>toolsDialogGui.cpp</em>:</p>
<p><code>#ifdef __APPLE__
    m_newConsoleName-&gt;SetValidator( wxTextValidator( wxFILTER_ALPHANUMERIC|wxFILTER_INCLUDE_CHAR_LIST, &amp;mNewNameInput ) );
    #endif</code></p>
<p><code>#ifdef __APPLE__
    m_changedName-&gt;SetValidator( wxTextValidator( wxFILTER_ALPHANUMERIC|wxFILTER_INCLUDE_CHAR_LIST, &amp;m_changedNameInput ) );
    #endif</code></p>
<p>This allows adding/changing console name for Windows at least.</p>



<a name="311151052"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Test%20issues/near/311151052" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Voss <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Test.20issues.html#311151052">(Nov 20 2022 at 15:07)</a>:</h4>
<p>Sorry about that.  I had tried to add _ to the alphanumeric character set by adding a character list in wxFormBuilder but never got it to work.</p>
<p>Instead I used  <code>validator-&gt;AddCharIncludes("_"); </code> in the constructor , which we have found is not available for Windows given the version of wxWidgets used.  This is, for now, only included in the __APPLE__ compile.</p>
<p>But I forgot to revert the field style in wxFormBuilder - hence your issue.  I have now removed my unsuccesfull wxFormBuilder experiment so that will obviate your last fix.</p>



<a name="311151196"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Test%20issues/near/311151196" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Voss <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Test.20issues.html#311151196">(Nov 20 2022 at 15:08)</a>:</h4>
<p>Pushed and rebuilding now.</p>



<a name="311155762"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Test%20issues/near/311155762" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Rossiter <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Test.20issues.html#311155762">(Nov 20 2022 at 15:49)</a>:</h4>
<p>Finally ... I have compiled for Windows. A wx3.2 cache in ShipDriver was causing me grief.<br>
Tools is fine.<br>
Just <em>shrinkYourself</em> is an issue for me, using <em>Parking.js</em>.</p>



<a name="311156118"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Test%20issues/near/311156118" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Voss <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Test.20issues.html#311156118">(Nov 20 2022 at 15:53)</a>:</h4>
<p>shrinkYourself ??</p>



<a name="311156527"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Test%20issues/near/311156527" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Voss <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Test.20issues.html#311156527">(Nov 20 2022 at 15:58)</a>:</h4>
<p>When the new Parking.js is run from the main test harness, it does not clear out the parked windows.  I know where to look.<br>
It works fine when run standalone.</p>



<a name="311156726"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Test%20issues/near/311156726" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Rossiter <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Test.20issues.html#311156726">(Nov 20 2022 at 16:00)</a>:</h4>
<p><code>Function step1(){ </code></p>
<p>A new problem. Unable to copy paste from the main console to another console.</p>



<a name="311157176"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Test%20issues/near/311157176" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Rossiter <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Test.20issues.html#311157176">(Nov 20 2022 at 16:04)</a>:</h4>
<p>The new problem may be a problem here. Think I need to re-boot.</p>



<a name="311158288"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Test%20issues/near/311158288" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Rossiter <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Test.20issues.html#311158288">(Nov 20 2022 at 16:16)</a>:</h4>
<blockquote>
<p>A new problem. Unable to copy paste from the main console to another console.</p>
</blockquote>
<p>It was my machine.  Copying is fine again.</p>



<a name="311161242"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Test%20issues/near/311161242" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Voss <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Test.20issues.html#311161242">(Nov 20 2022 at 16:47)</a>:</h4>
<p>Shrinking... or not in your case...</p>
<p>Please create /take a console with a long name and check that, using your mouse, you can shrink it down to the size just wide enough to display the name.   Then change its name to a short name. Suggest you use the Tools to do that.<br>
Now - can you shrink it down to the smaller size  needed for the shorter name, or does it refuse to shrink smaller than when it has the long name?<br>
The answer to this will narrow down where the problem is.</p>



<a name="311165347"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Test%20issues/near/311165347" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Rossiter <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Test.20issues.html#311165347">(Nov 20 2022 at 17:27)</a>:</h4>
<blockquote>
<p>can you shrink it down to the smaller size needed for the shorter name</p>
</blockquote>
<p>Yes I can shrink it.</p>



<a name="311169614"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Test%20issues/near/311169614" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Voss <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Test.20issues.html#311169614">(Nov 20 2022 at 18:13)</a>:</h4>
<p>Please hold off.  I  don't want you waisting time on stuff I am reworking.</p>



<a name="311585577"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Test%20issues/near/311585577" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Rossiter <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Test.20issues.html#311585577">(Nov 22 2022 at 12:52)</a>:</h4>
<p>Tested an update for O5.8. Everything working well. My big problem is that the SVG icons in the toolbar will not appear. A black square which when toggled turns grey. A couple of days testing many ideas have not produced a solution. ShipDriver and UKTides do not have this problem.</p>



<a name="311647387"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Test%20issues/near/311647387" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Voss <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Test.20issues.html#311647387">(Nov 22 2022 at 15:38)</a>:</h4>
<p><span class="user-mention silent" data-user-id="399559">Mike Rossiter</span> <a href="#narrow/stream/349785-JavaScript_pi/topic/Test.20issues/near/311585577">said</a>:</p>
<blockquote>
<p>Tested an update for O5.8. Everything working well.  <span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span> <span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span></p>
<p>My big problem is that the SVG icons in the toolbar will not appear. A black square which when toggled turns grey. A couple of days testing many ideas have not produced a solution. ShipDriver and UKTides do not have this problem.</p>
</blockquote>
<p>Re SVG - to borrow one of your phrases - that is above my pay grade.</p>
<p>I take it there need to be two builds - one for O5.8 and one for  O5. Will the catalogue update know which to offer?</p>



<a name="311650586"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Test%20issues/near/311650586" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Rossiter <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Test.20issues.html#311650586">(Nov 22 2022 at 15:53)</a>:</h4>
<blockquote>
<p>Will the catalogue update know which to offer?</p>
</blockquote>
<p>The plugin xml metadata will sort this out. Generally there will be two entries for each OS in the OpenCPN/plugins  metadata directory.</p>



<a name="311651562"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Test%20issues/near/311651562" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Voss <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Test.20issues.html#311651562">(Nov 22 2022 at 15:57)</a>:</h4>
<p>In the <a href="https://cloudsmith.io/~opencpn/repos/javascript-prod/packages/">JavaScript production repository</a> you can see the number of downloads.  Is that the number of installs or re-installs?  If so, it gives guidance on which platforms it is running.</p>
<p>Is there any chance of you giving a Linux one a whirl?</p>
<p>The <em>consolePositioning.h</em> config uses values you know for Windows and the other lot for everything else.  MY latest values allow for earlier releases of MacOS having a narrower window bar than for  MacOS Catalina, so they might be good for Linux?<br>
Please can you let me have your values for Windows to include in my source?</p>
<p>I have rewritten the resizing and parking, so it will need checking again.</p>
<p>Wrapping up a script is complicated.  There may be a onClose() function to run, a call back to an invoking script and maybe a chain to a successor script or even all three <span aria-label="face with spiral eyes" class="emoji emoji-1f635-200d-1f4ab" role="img" title="face with spiral eyes">:face_with_spiral_eyes:</span>   And if a script throes an error, which of these need to be done and what needs to be passed back?  I have had problems with the test suite because the re-written Parking.js uses onClose( ) and reports back to the main script.  It was doing the report back before the onClose( ) leading to the parking.js console being deleted before it had finally wrapped up.  OCPN crash.   I am chasing the last gremlins in that (while also having a hearth reworked for a wood burner and other things) and will let you know when it is  ready - as far as I can tell.</p>



<a name="311674447"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Test%20issues/near/311674447" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Rossiter <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Test.20issues.html#311674447">(Nov 22 2022 at 17:54)</a>:</h4>
<blockquote>
<p>Is that the number of installs or re-installs? </p>
</blockquote>
<p>It will be the number of first installs.  The reinstall comes from the local cache unless there has been a complete removal/reinstall of OpenCPN.</p>
<blockquote>
<p>Linux</p>
</blockquote>
<p>Tested on Ubuntu Focal with a 15 inch notebook pc. In Standard Mode JavaScript Tools notebook titles can't be read. Faint white text. With Dark Mode they appear correctly. There is a fix that Nohal provided. I will see if I can find it.</p>
<p><em>dialogue_test.js</em> size did not allow seeing the bottom of the console, to access the button.</p>
<p><em>consolePositioning.h</em> </p>
<p><code>#ifdef __WXMSW__
#define CONSOLE_MIN_HEIGHT 13
#define CONSOLE_STUB 50
#define CONSOLE_CHAR_WIDTH 12
#define PARK_FRAME_HEIGHT 10
#define PARK_CILL 3
#define PARK_FIRST_X 70
#define PARK_SEP 10</code><br>
These worked fine for me.</p>
<blockquote>
<p>rewritten the resizing and parking, so it will need checking again.</p>
</blockquote>
<p>TBC</p>



<a name="312363981"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Test%20issues/near/312363981" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Rossiter <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Test.20issues.html#312363981">(Nov 26 2022 at 15:36)</a>:</h4>
<blockquote>
<p>dialogue_test.js size did not allow seeing the bottom of the console</p>
</blockquote>
<p>Could this be placed at the top of the dialogue:<br>
<code>myDialogue.push({type:"button", label:["Finish","Read back"]})</code></p>



<a name="312379687"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Test%20issues/near/312379687" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Voss <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Test.20issues.html#312379687">(Nov 26 2022 at 17:52)</a>:</h4>
<p><span class="user-mention silent" data-user-id="399559">Mike Rossiter</span> <a href="#narrow/stream/349785-JavaScript_pi/topic/Test.20issues/near/312363981">said</a>:</p>
<blockquote>
<blockquote>
<p>dialogue_test.js size did not allow seeing the bottom of the console</p>
</blockquote>
<p>Could this be placed at the top of the dialogue:<br>
<code>myDialogue.push({type:"button", label:["Finish","Read back"]})</code></p>
</blockquote>
<p>Apologies for delays - just moving to new MacBook Air after damaged my old Mac  by knocking a cup of tea over it.</p>
<p><code>JSdialog.cpp line 597:       dialog-&gt;Fit();</code><br>
That should be sufficient and, as far I know worked before on Windows - otherwise you would not have been able to run the test script..  Are you now using something different?  Like new version of wxWidgets?</p>
<p>Yes, you could put the buttons at the top as a workaround during testing but not as a permanent solution.  We need to find why the window is not sizing correctly.  How much too small is it?</p>



<a name="312380445"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Test%20issues/near/312380445" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Rossiter <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Test.20issues.html#312380445">(Nov 26 2022 at 18:00)</a>:</h4>
<p>The test was done with ubuntu-focal and a 15" notebook pc. I will test again. The console can be re-sized but the bottom section disappears and with it the buttons.</p>



<a name="312811846"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Test%20issues/near/312811846" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Rossiter <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Test.20issues.html#312811846">(Nov 29 2022 at 10:36)</a>:</h4>
<p>Ubuntu 20.04 (Focal) Even with full-screen no buttons visible. Resizing causes shrinking from the base of the visible dialogue and does not make the buttons visible.<br>
<a href="/user_uploads/33951/4M27BlPj6dg6Z39Jzwm8kN4q/Screenshot-from-2022-11-29-10-29-52.png">Screenshot-from-2022-11-29-10-29-52.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/33951/4M27BlPj6dg6Z39Jzwm8kN4q/Screenshot-from-2022-11-29-10-29-52.png" title="Screenshot-from-2022-11-29-10-29-52.png"><img src="/user_uploads/33951/4M27BlPj6dg6Z39Jzwm8kN4q/Screenshot-from-2022-11-29-10-29-52.png"></a></div>



<a name="312885659"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Test%20issues/near/312885659" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Voss <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Test.20issues.html#312885659">(Nov 29 2022 at 16:48)</a>:</h4>
<p>The dialogue is OK on Mac and Windows so this looks like a Ubuntu problem - not a plugin coding one.<br>
Tee field length for the Name filed (1st one) could be made longer to allow for this font.<br>
The vertical space for the Ticklist is insufficient and the whole window is too shirt, as you say.  Looks like size() is in error.</p>
<p>Which version of wxWidgets is this using?<br>
I could, perhaps, put some Ubuntu.-specific code in to make extra space?</p>



<a name="312929523"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Test%20issues/near/312929523" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Rossiter <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Test.20issues.html#312929523">(Nov 29 2022 at 20:15)</a>:</h4>
<blockquote>
<p>Which version of wxWidgets is this using?</p>
</blockquote>
<p>wxWidgets 3.1.2, same as Windows. On Windows the dialogue can be extended beyond the OpenCPN screen. All the display height is available. On Ubuntu it is limited to the OpenCPN display area.</p>



<a name="321692247"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Test%20issues/near/321692247" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Voss <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Test.20issues.html#321692247">(Jan 16 2023 at 17:50)</a>:</h4>
<p><span class="user-mention silent" data-user-id="399559">Mike Rossiter</span> <a href="#narrow/stream/349785-JavaScript_pi/topic/Linux.20issues/near/321147844">said</a>:</p>
<blockquote>
<p>Message test does not work. Fails to find <em>71_message_test.js</em>. Need to restart <em>001_main.js</em></p>
</blockquote>
<p>The file in the test scripts is capitalised to <code>1_Message_test.js</code><br>
Please edit to 71_message_test.js if wrong in your copy.  I have just fixed it in repository.</p>



<hr><p>Last updated: Jun 26 2025 at 23:31 UTC</p>
</html>