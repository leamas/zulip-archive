<html>
<head><meta charset="utf-8"><title>Linux issues · JavaScript_pi · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/index.html">JavaScript_pi</a></h2>
<h3>Topic: <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Linux.20issues.html">Linux issues</a></h3>

<hr>

<base href="https://opencpn.zulipchat.com">

<head><link href="https://leamas.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="321147844"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Linux%20issues/near/321147844" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Rossiter <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Linux.20issues.html#321147844">(Jan 13 2023 at 12:25)</a>:</h4>
<p>Message test does not work. Fails to find <em>71_message_test.js</em>. Need to restart <em>001_main.js</em></p>



<a name="321155593"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Linux%20issues/near/321155593" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Voss <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Linux.20issues.html#321155593">(Jan 13 2023 at 13:02)</a>:</h4>
<p>Let's have a separate topic for these</p>



<a name="321155748"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Linux%20issues/near/321155748" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Rossiter <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Linux.20issues.html#321155748">(Jan 13 2023 at 13:03)</a>:</h4>
<p>Linus: parkConsole() ... It moves the console to the left of the screen but without shrinking!</p>



<a name="321155831"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Linux%20issues/near/321155831" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Linux.20issues.html#321155831">(Jan 13 2023 at 13:04)</a>:</h4>
<p>A message was moved here from <a class="stream-topic" data-stream-id="349785" href="/#narrow/stream/349785-JavaScript_pi/topic/Parking">#JavaScript_pi &gt; Parking</a> by <span class="user-mention silent" data-user-id="554731">Tony Voss</span>.</p>



<a name="321156085"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Linux%20issues/near/321156085" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Rossiter <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Linux.20issues.html#321156085">(Jan 13 2023 at 13:05)</a>:</h4>
<p>Printing does not produce a coloured text.</p>
<p>12:31 PM<br>
Dialogue - same issue with no ability to see buttons at the base of the dialogue.</p>
<p>12:32 PM<br>
Had to run tests individually because of the problem with the message test.</p>



<a name="321156518"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Linux%20issues/near/321156518" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Voss <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Linux.20issues.html#321156518">(Jan 13 2023 at 13:07)</a>:</h4>
<p><span class="user-mention silent" data-user-id="399559">Mike Rossiter</span> <a href="#narrow/stream/349785-JavaScript_pi/topic/Linux.20issues/near/321155748">said</a>:</p>
<blockquote>
<p>Linus: parkConsole() ... It moves the console to the left of the screen but without shrinking!</p>
</blockquote>
<p>To suppress the result so the console stays minimised, it should be:</p>
<p>consolePark(); scriptResult("");</p>



<a name="321158836"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Linux%20issues/near/321158836" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Voss <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Linux.20issues.html#321158836">(Jan 13 2023 at 13:18)</a>:</h4>
<p><span class="user-mention silent" data-user-id="399559">Mike Rossiter</span> <a href="#narrow/stream/349785-JavaScript_pi/topic/Linux.20issues/near/321147844">said</a>:</p>
<blockquote>
<p>Message test does not work. Fails to find <em>71_message_test.js</em>. Need to restart <em>001_main.js</em></p>
</blockquote>
<p>If it didn't find the file, you should have got an error like this example from MacOS:</p>
<blockquote>
<p>Error: Console Test - File path /Users/Tony/Documents/JavaScript-project/JavaScript_pi/Tests_scripts/Nonexistent.js not found<br>
The first test must have run OK so why did the 2nd fail?  Please examine the file string in the error message carefully.</p>
</blockquote>



<a name="321159507"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Linux%20issues/near/321159507" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Voss <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Linux.20issues.html#321159507">(Jan 13 2023 at 13:21)</a>:</h4>
<p><span class="user-mention silent" data-user-id="399559">Mike Rossiter</span> <a href="#narrow/stream/349785-JavaScript_pi/topic/Parking/near/321148920">said</a>:</p>
<blockquote>
<p>Dialogue - same issue with no ability to see buttons at the base of the dialogue.</p>
</blockquote>
<p>On MacOS I can enlarge the dialogue by dragging down.  Can you enlarge it to show the buttons?</p>



<a name="321395347"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Linux%20issues/near/321395347" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Voss <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Linux.20issues.html#321395347">(Jan 14 2023 at 18:31)</a>:</h4>
<p><span class="user-mention silent" data-user-id="399559">Mike Rossiter</span> <a href="#narrow/stream/349785-JavaScript_pi/topic/Linux.20issues/near/321156085">said</a>:</p>
<blockquote>
<p>Printing does not produce a coloured text.</p>
</blockquote>
<p>Does the script window have coloured lexing (strings in red etc) or is there no colour in both windows?</p>



<a name="321466921"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Linux%20issues/near/321466921" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Rossiter <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Linux.20issues.html#321466921">(Jan 15 2023 at 10:52)</a>:</h4>
<blockquote>
<p>Does the script window have coloured lexing</p>
</blockquote>
<p>Yes, blue, red and black.</p>



<a name="321687917"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Linux%20issues/near/321687917" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Voss <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Linux.20issues.html#321687917">(Jan 16 2023 at 17:20)</a>:</h4>
<p><span class="user-mention silent" data-user-id="399559">Mike Rossiter</span> <a href="#narrow/stream/349785-JavaScript_pi/topic/Linux.20issues/near/321466921">said</a>:</p>
<blockquote>
<blockquote>
<p>Does the script window have coloured lexing</p>
</blockquote>
<p>Yes, blue, red and black.</p>
</blockquote>
<p>Just building again at 17:13.<br>
The code that does the colour printing is thus:</p>
<div class="codehilite"><pre><span></span><code>void appendStyledText(wxString text, wxStyledTextCtrl* window, int colour){
    // Append coloured text to window
    int long beforeLength, afterLength;
    beforeLength = window-&gt;GetTextLength(); // where we are before adding text
    window-&gt;AppendText(text);
    afterLength = window-&gt;GetTextLength(); // where we are after adding text
    window-&gt;StartStyling((int)beforeLength,0);   // 2nd parameter included Linux still using wxWidgets v3.0.2
    window-&gt;SetStyling((int)(afterLength-beforeLength), colour);
    TRACE(24, wxString::Format(&quot;Styled text &#39;%s&#39; colour %i  start %li  end %li  length %i&quot;, text, colour,
        beforeLength, afterLength, (int)(afterLength-beforeLength)));
    }
</code></pre></div>
<p>Note I have a TRACE in.<br>
Note too the <code>StartStyling</code> line.  It has a 2nd deprecated parameter which generates warnings from the compiler. <br>
This we had to have to keep Linux happy.  Is that still the case?  Might this be the source of the problem Linux not printing in colour?<br>
If still a problem, please let me have a copy of the trace when running the print test to compare with what I see.</p>



<a name="321690678"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Linux%20issues/near/321690678" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Rossiter <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Linux.20issues.html#321690678">(Jan 16 2023 at 17:38)</a>:</h4>
<p><a href="/user_uploads/33951/P6x--fQih1JbxwOAf5B14WB-/javascript_trace.txt">javascript_trace.txt</a></p>



<a name="321692629"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Linux%20issues/near/321692629" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Rossiter <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Linux.20issues.html#321692629">(Jan 16 2023 at 17:52)</a>:</h4>
<p>Parking still not working for me with Ubuntu 20.04. Would gtk be causing a problem. Ubuntu uses gtk only from 20.04.</p>



<a name="321694992"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Linux%20issues/near/321694992" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Voss <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Linux.20issues.html#321694992">(Jan 16 2023 at 18:08)</a>:</h4>
<p><span class="user-mention silent" data-user-id="399559">Mike Rossiter</span> <a href="#narrow/stream/349785-JavaScript_pi/topic/Linux.20issues/near/321692629">said</a>:</p>
<blockquote>
<p>Parking still not working for me with Ubuntu 20.04. Would gtk be causing a problem. Ubuntu uses gtk only from 20.04.</p>
</blockquote>
<p>I haven't a clue.  Never been near gtk and have no Linux system.  It may be a big ask, but can you narrow it down?  What bit does not work?  Test on a fresh console  - not one that might already be parked under previous version.  Parking is now nicely contained in the console <code>park() </code>and <code>isParked()</code> methods.<br>
If parking a console via its park button does nothing at all, most likely is that <code>isParked()</code> is returning true when it should not.  Function is only 5 lines long.  There is a TRACE statement in park() level 25.<br>
In hope,T ony</p>



<a name="321698506"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Linux%20issues/near/321698506" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Voss <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Linux.20issues.html#321698506">(Jan 16 2023 at 18:33)</a>:</h4>
<p><span class="user-mention silent" data-user-id="399559">Mike Rossiter</span> <a href="#narrow/stream/349785-JavaScript_pi/topic/Linux.20issues/near/321690678">said</a>:</p>
<blockquote>
<p><a href="/user_uploads/33951/P6x--fQih1JbxwOAf5B14WB-/javascript_trace.txt">javascript_trace.txt</a></p>
</blockquote>
<p>Trace output identical with what I get.<br>
Since the script is lexed into colours OK, we know that styled text does work under this Linux, so it must be how the print coloured is implemented. Am mindful of that deprecated extra parameter on StartStyling.  Maybe remove it now if Linux no longer requires it?</p>



<a name="321698845"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Linux%20issues/near/321698845" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Voss <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Linux.20issues.html#321698845">(Jan 16 2023 at 18:35)</a>:</h4>
<p><span class="user-mention silent" data-user-id="554731">Tony Voss</span> <a href="#narrow/stream/349785-JavaScript_pi/topic/Linux.20issues/near/321159507">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="399559">Mike Rossiter</span> <a href="#narrow/stream/349785-JavaScript_pi/topic/Parking/near/321148920">said</a>:</p>
<blockquote>
<p>Dialogue - same issue with no ability to see buttons at the base of the dialogue.</p>
</blockquote>
<p>On MacOS I can enlarge the dialogue by dragging down.  Can you enlarge it to show the buttons?</p>
</blockquote>
<p>Any news on this query?</p>



<a name="321782908"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Linux%20issues/near/321782908" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Rossiter <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Linux.20issues.html#321782908">(Jan 17 2023 at 09:10)</a>:</h4>
<p>Testing this morning.</p>



<a name="321820701"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Linux%20issues/near/321820701" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Rossiter <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Linux.20issues.html#321820701">(Jan 17 2023 at 12:40)</a>:</h4>
<blockquote>
<p>Dialogue - same issue with no ability to see buttons</p>
</blockquote>
<p>My display on the laptop s 16:9. Unable to show a dialogue of the size wanted. No scrollbar to help. Remove a few entries and I can see the buttons.</p>
<blockquote>
<p>Parking - can you narrow it down? </p>
</blockquote>
<p>No luck so far.</p>
<blockquote>
<p>Printing: It has a 2nd deprecated parameter which generates warnings from the compiler.</p>
</blockquote>
<p>Unable to compile for Ubuntu without the second parameter.</p>



<a name="321823287"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Linux%20issues/near/321823287" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Voss <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Linux.20issues.html#321823287">(Jan 17 2023 at 12:54)</a>:</h4>
<p><span class="user-mention silent" data-user-id="399559">Mike Rossiter</span> <a href="#narrow/stream/349785-JavaScript_pi/topic/Linux.20issues/near/321820701">said</a>:</p>
<blockquote>
<blockquote>
<p>Dialogue - same issue with no ability to see buttons</p>
</blockquote>
<p>My display on the laptop s 16:9. Unable to show a dialogue of the size wanted. No scrollbar to help. Remove a few entries and I can see the buttons.</p>
</blockquote>
<p>What do you mean by 16:9?  Are you saying your display is too small to show the whole dialogue?</p>



<a name="321823432"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Linux%20issues/near/321823432" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Rossiter <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Linux.20issues.html#321823432">(Jan 17 2023 at 12:55)</a>:</h4>
<blockquote>
<p>Are you saying your display is too small </p>
</blockquote>
<p>Correct.</p>



<a name="321832879"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Linux%20issues/near/321832879" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Voss <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Linux.20issues.html#321832879">(Jan 17 2023 at 13:43)</a>:</h4>
<p><span class="user-mention silent" data-user-id="399559">Mike Rossiter</span> <a href="#narrow/stream/349785-JavaScript_pi/topic/Linux.20issues/near/321823432">said</a>:</p>
<blockquote>
<blockquote>
<p>Are you saying your display is too small </p>
</blockquote>
<p>Correct.</p>
</blockquote>
<p>Maybe we don't try and address that?</p>



<a name="321860580"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Linux%20issues/near/321860580" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Rossiter <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Linux.20issues.html#321860580">(Jan 17 2023 at 15:41)</a>:</h4>
<blockquote>
<p>Maybe we don't try and address that?</p>
</blockquote>
<p>Agree with leaving as is.</p>



<a name="321865410"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Linux%20issues/near/321865410" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Rossiter <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Linux.20issues.html#321865410">(Jan 17 2023 at 16:01)</a>:</h4>
<blockquote>
<p>Parking - can you narrow it down?</p>
</blockquote>
<p><a href="https://forums.wxwidgets.org/viewtopic.php?t=47598">https://forums.wxwidgets.org/viewtopic.php?t=47598</a><br>
Going to try clientSize().</p>



<a name="321870471"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Linux%20issues/near/321870471" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Rossiter <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Linux.20issues.html#321870471">(Jan 17 2023 at 16:23)</a>:</h4>
<p>Progress, maybe?<br>
In park() I used SetClientSize() iso SetSize. Parking works.  Using <em>44_parking.js</em> I get the consoles on top of each other.</p>



<a name="321871000"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Linux%20issues/near/321871000" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Voss <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Linux.20issues.html#321871000">(Jan 17 2023 at 16:26)</a>:</h4>
<p>There's a JS function to return relevant console details.  So, if in my console named "4", I run the script</p>
<div class="codehilite"><pre><span></span><code>require(&quot;Consoles&quot;);
print(JSON.stringify(consoleDetails(&quot;4&quot;),null,&quot;\t&quot;), &quot;\n&quot;);
</code></pre></div>
<p>I get the output</p>
<div class="codehilite"><pre><span></span><code>{
    &quot;name&quot;: &quot;4&quot;,
    &quot;position&quot;: {
        &quot;x&quot;: 513,
        &quot;y&quot;: 198
    },
    &quot;size&quot;: {
        &quot;x&quot;: 761,
        &quot;y&quot;: 699
    },
    &quot;minSize&quot;: {
        &quot;x&quot;: 90,
        &quot;y&quot;: 29
    },
    &quot;clientSize&quot;: {
        &quot;x&quot;: 761,
        &quot;y&quot;: 671
    }
}
</code></pre></div>
<p>NB the reported position is <strong>relative to the frame</strong> and not the screen as returned by<code> GetPosition()</code><br>
Source of this API in <code>optional.cpp</code> starting at line 28</p>



<a name="321873853"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Linux%20issues/near/321873853" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Rossiter <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Linux.20issues.html#321873853">(Jan 17 2023 at 16:39)</a>:</h4>
<p>I get a similar set of figures with my amended version of JS.</p>



<a name="321874262"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Linux%20issues/near/321874262" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Voss <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Linux.20issues.html#321874262">(Jan 17 2023 at 16:41)</a>:</h4>
<p>If consoles are parking on top of each other,  <code>isParked()</code> for the previously parked console is returning false.<br>
Could be because you messed with the sizing/positioning.  See <code>isParked()</code>.</p>



<a name="321875748"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Linux%20issues/near/321875748" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Voss <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Linux.20issues.html#321875748">(Jan 17 2023 at 16:48)</a>:</h4>
<p>It is possible that if you set the size of a console smaller than the system likes, GetSize will return something different from what you set it as.<br>
Suggest you use the Parking tool in the tools to set the parking parameters right for your platform.</p>



<a name="321875830"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Linux%20issues/near/321875830" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Rossiter <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Linux.20issues.html#321875830">(Jan 17 2023 at 16:48)</a>:</h4>
<p>My mistake. I restarted OpenCPN and the consoles are spread correctly.</p>



<a name="321876379"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Linux%20issues/near/321876379" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Voss <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Linux.20issues.html#321876379">(Jan 17 2023 at 16:50)</a>:</h4>
<p>Worth using the tools to customise the parking parameters for that platform and then revealing them so they can be configured as the platform defaults.</p>



<a name="321876524"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Linux%20issues/near/321876524" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Rossiter <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Linux.20issues.html#321876524">(Jan 17 2023 at 16:51)</a>:</h4>
<p><em>Printing: " post on X11 with GTK3 the decorations are not available until the window is fully realized."</em><br>
Looking at this one to see if it helps the colours.</p>



<a name="321889351"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Linux%20issues/near/321889351" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Rossiter <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Linux.20issues.html#321889351">(Jan 17 2023 at 17:48)</a>:</h4>
<blockquote>
<p>Worth using the tools to customise the parking parameters</p>
</blockquote>
<p>Your MacOS parameters work for Ubuntu:<br>
#define CONSOLE_MIN_HEIGHT 29<br>
#define CONSOLE_STUB 77<br>
#define PARK_LEVEL 25<br>
#define PARK_FIRST_X 3<br>
#define PARK_SEP 6<br>
Have you tested SetClientSize() iso SetSize() to see if it causes problems? No problems on Windows.</p>



<a name="321892720"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Linux%20issues/near/321892720" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Rossiter <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Linux.20issues.html#321892720">(Jan 17 2023 at 18:03)</a>:</h4>
<blockquote>
<p>Printing: " post on X11 with GTK3 the decorations are not available until the window is fully realized."</p>
</blockquote>
<p>Wrong ... it is StartStyling. Second parameter is a bitmask. Needs to be 255 for wx3.0 (Ubuntu). Tested and this works.</p>



<a name="321894187"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Linux%20issues/near/321894187" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Rossiter <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Linux.20issues.html#321894187">(Jan 17 2023 at 18:10)</a>:</h4>
<p>Printing ... Second parameter of StartStyling() is ignored in Windows (wx3.1.2) 255 does not harm the styling.</p>



<a name="321912892"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Linux%20issues/near/321912892" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Voss <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Linux.20issues.html#321912892">(Jan 17 2023 at 19:47)</a>:</h4>
<p>Let me summarise where I think we are at with Linux...<br>
1 Parking parameters can be same as for Mac<br>
2 Need mask of 255 as 2nd parameter in StartStyling<br>
3 Tall dialogues exceed your small screen  hiding the bottom buttons - propose not to do anything about that<br>
4 You said something about needing to use  SetClientSize() instead of SetSize.  That is not good when we are working out where to place the window itself.  I hope that is no longer an issue?<br>
So I think we are all go for Linux apart from 4 ?  Is that so?</p>



<a name="322018854"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Linux%20issues/near/322018854" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Rossiter <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Linux.20issues.html#322018854">(Jan 18 2023 at 10:38)</a>:</h4>
<blockquote>
<p>2 Need mask of 255 as 2nd parameter in StartStyling</p>
</blockquote>
<p>Found info here:<br>
<a href="https://forums.wxwidgets.org/viewtopic.php?t=43834&amp;start=15">https://forums.wxwidgets.org/viewtopic.php?t=43834&amp;start=15</a></p>
<blockquote>
<p>SetClientSize() instead of SetSize. That is not good when we are working out where to place the window itself</p>
</blockquote>
<p>Have not used SetClientSize() in the constructor for the console itself. Used in the following:<br>
setConsoleMinSize()<br>
park()<br>
onChangeName()</p>



<a name="322047654"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Linux%20issues/near/322047654" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Voss <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Linux.20issues.html#322047654">(Jan 18 2023 at 13:07)</a>:</h4>
<p>Please can you explain for me why you are using  SetClientSize() instead of SetSize() ?  What is wrong with SetSize()?</p>



<a name="322060719"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Linux%20issues/near/322060719" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Rossiter <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Linux.20issues.html#322060719">(Jan 18 2023 at 14:07)</a>:</h4>
<p><a href="https://forums.wxwidgets.org/viewtopic.php?t=47598">https://forums.wxwidgets.org/viewtopic.php?t=47598</a></p>
<p>Ubuntu is using the X11 windowing system. (Not that I understand this stuff)</p>



<a name="322069295"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Linux%20issues/near/322069295" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Voss <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Linux.20issues.html#322069295">(Jan 18 2023 at 14:42)</a>:</h4>
<p>So I think it best to use SetClientSize just in the Ubuntu case.  What is the compiler flag for this that I can use in a conditional compilation , equivalent to <code>#ifdef __WXMSW__</code> for Windows ?<br>
And do you just have a straight swap of replacing SetSize with SetClientSize?</p>



<a name="322310662"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Linux%20issues/near/322310662" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Voss <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Linux.20issues.html#322310662">(Jan 19 2023 at 15:34)</a>:</h4>
<p>My understanding is that the problem =s with Linux arise because the size of the window (client size + 'decorations') is not known until the window is substantiated.<br>
At present setMinSize() is called within the constructor and, hence, before the window can be substantiated.<br>
How about I move the call outside the constructor?  I think GetSize should work then?<br>
Not too difficult to do.<br>
Worth a try?</p>



<a name="322335510"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Linux%20issues/near/322335510" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Voss <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Linux.20issues.html#322335510">(Jan 19 2023 at 17:25)</a>:</h4>
<p>OK done.  Have commented out Linux conditional stuff for now with //- so can find it again, should I need to reinstate.<br>
Note that the dump tool in Tools diagnostic panel dumps lots of useful info about each console.  Have just added GetSize and GetMinSize so you can see what those functions return for each console.<br>
Building now.</p>



<a name="322340270"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Linux%20issues/near/322340270" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Rossiter <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Linux.20issues.html#322340270">(Jan 19 2023 at 17:47)</a>:</h4>
<p>Parking works 99%. In the test console "1" appears under the dialogue iso in line with the other consoles.</p>
<p>Did you remove the parameter 255 from StartStyling(). Colours have gone from the print test in Ubuntu.</p>



<a name="322344835"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Linux%20issues/near/322344835" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Voss <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Linux.20issues.html#322344835">(Jan 19 2023 at 18:07)</a>:</h4>
<p>Whoops - never put the 255 in may sources.  Have done so now.<br>
99% is big improvement.<br>
A screenshot of the console "1" issue please and a console dump taken with the problem showing, which will detail all the consoles and their states for me.</p>



<a name="322358418"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Linux%20issues/near/322358418" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Rossiter <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Linux.20issues.html#322358418">(Jan 19 2023 at 19:12)</a>:</h4>
<p>StartStyling() ... src/JSExtensions.cpp ... Line 55<br>
Still showing 0 iso 255</p>



<a name="322360072"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Linux%20issues/near/322360072" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Voss <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Linux.20issues.html#322360072">(Jan 19 2023 at 19:21)</a>:</h4>
<p>Have not pushed yet, so you will not have 255 yet.</p>



<a name="322360214"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Linux%20issues/near/322360214" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Voss <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Linux.20issues.html#322360214">(Jan 19 2023 at 19:22)</a>:</h4>
<p>Waiting until I have studied the ‘1’ console issue</p>



<a name="322493349"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Linux%20issues/near/322493349" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Rossiter <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Linux.20issues.html#322493349">(Jan 20 2023 at 11:55)</a>:</h4>
<blockquote>
<p>In the test console "1" appears under the dialogue</p>
</blockquote>
<p>Unable to reproduce this now. Parking works correctly but the minimum height needs reducing, say height 25, even though the tool still say 38.</p>
<p>I have increased the number of packages that can be held in Cloudsmith javascript-alpha to 100. 20 meant that we had some 1.1 packages in the list meaning I lost your 2.0 ones for Ubuntu Focal.</p>



<a name="322512874"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Linux%20issues/near/322512874" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Voss <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Linux.20issues.html#322512874">(Jan 20 2023 at 13:28)</a>:</h4>
<p>So I have reduced default console min height to 20L for Linux and will remove all the conditional compiling for Linux that I put in.  The parking will be handled exactly as for the other platforms now that I have moved stuff out of the constructor.<br>
Thank for adjusting the repository.<br>
I have a simple addition for the Tools and will build final alpha with that.</p>



<hr><p>Last updated: Feb 23 2025 at 06:14 UTC</p>
</html>