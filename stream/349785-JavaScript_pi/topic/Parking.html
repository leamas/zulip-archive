<html>
<head><meta charset="utf-8"><title>Parking · JavaScript_pi · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/index.html">JavaScript_pi</a></h2>
<h3>Topic: <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Parking.html">Parking</a></h3>

<hr>

<base href="https://opencpn.zulipchat.com">

<head><link href="https://leamas.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="321000913"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Parking/near/321000913" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Voss <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Parking.html#321000913">(Jan 12 2023 at 18:03)</a>:</h4>
<p>Found major problems with parking.  Positions were relative to the screen, so any movement of the frame destroyed everything.  Also you could set a console smaller than allowed by drag.  These probably explain why you could not get it working on Windows.</p>
<p>I have now completely re-written that part.  It is much better, smaller, more understandable and hence more maintainable.  Only issue is that switching in or out of full screen mode unparks any parked consoles.  But I can live with that, at least until someone complains.</p>
<p>I have also created a special script configParking.js which helps you work out the values to go in consolePositioning.h.  This virtually eliminates the need for trial and error compiling.  You will find it in the test scripts folder.  An extract fom the technical manual on this is attached.</p>
<p>Best of luck and thanks<br>
<a href="/user_uploads/33951/HgMjDcSo9XRojWlH4s3gMilx/Screenshot-2023-01-12-at-17.50.39.png">Screenshot-2023-01-12-at-17.50.39.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/33951/HgMjDcSo9XRojWlH4s3gMilx/Screenshot-2023-01-12-at-17.50.39.png" title="Screenshot-2023-01-12-at-17.50.39.png"><img src="/user_uploads/33951/HgMjDcSo9XRojWlH4s3gMilx/Screenshot-2023-01-12-at-17.50.39.png"></a></div>



<a name="321001395"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Parking/near/321001395" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Rossiter <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Parking.html#321001395">(Jan 12 2023 at 18:05)</a>:</h4>
<p>Great work.  Will test again tomorrow.</p>



<a name="321001746"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Parking/near/321001746" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Voss <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Parking.html#321001746">(Jan 12 2023 at 18:06)</a>:</h4>
<p>Pushed and alpha4 built  ca 17:40 today</p>



<a name="321133200"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Parking/near/321133200" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Rossiter <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Parking.html#321133200">(Jan 13 2023 at 11:08)</a>:</h4>
<p>All the tests pass. If a console that had a test script is cleared and RUN is pressed OpenCPN crashes. Now going to linux.</p>



<a name="321147400"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Parking/near/321147400" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Rossiter <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Parking.html#321147400">(Jan 13 2023 at 12:23)</a>:</h4>
<blockquote>
<p>consolePark(); scriptResult();</p>
</blockquote>
<p>On Linux this does not work. Result undefined.</p>



<a name="321147999"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Parking/near/321147999" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Rossiter <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Parking.html#321147999">(Jan 13 2023 at 12:26)</a>:</h4>
<p>Printing does not produce a coloured text.</p>



<a name="321148920"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Parking/near/321148920" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Rossiter <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Parking.html#321148920">(Jan 13 2023 at 12:31)</a>:</h4>
<p>Dialogue - same issue with no ability to see buttons at the base of the dialogue.</p>



<a name="321149098"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Parking/near/321149098" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Rossiter <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Parking.html#321149098">(Jan 13 2023 at 12:32)</a>:</h4>
<p>Had to run tests individually because of the problem with the message test.</p>



<a name="321154692"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Parking/near/321154692" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Voss <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Parking.html#321154692">(Jan 13 2023 at 12:59)</a>:</h4>
<p><span class="user-mention silent" data-user-id="399559">Mike Rossiter</span> <a href="#narrow/stream/349785-JavaScript_pi/topic/Parking/near/321147400">said</a>:</p>
<blockquote>
<blockquote>
<p>consolePark(); scriptResult();</p>
</blockquote>
<p>On Linux this does not work. Result undefined.</p>
</blockquote>
<p>Whoops - I expect that moved the console but enlarged it enough to display the result.<br>
<code>scriptResult()</code> returns the presently set result.<br>
To suppress the result so the console stays minimised, it should be:</p>
<blockquote>
<p>consolePark(); scriptResult("");</p>
</blockquote>



<a name="321155600"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Parking/near/321155600" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Rossiter <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Parking.html#321155600">(Jan 13 2023 at 13:02)</a>:</h4>
<p>It moves the console to the left of the screen but without shrinking!</p>



<a name="321689814"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Parking/near/321689814" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Voss <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Parking.html#321689814">(Jan 16 2023 at 17:32)</a>:</h4>
<p>You can now suppress the result with <code>scriptResult(null);</code><br>
Parking has significant enhancements<br>
(1) Consoles now have a parking button near the tools button, so you can park them without running a script.<br>
(2) Parked consoles can be manually shuffled/reordered/repositioned within the parking lot and stay parked as long as the height remains close to the parking level.<br>
(3) I have solved the problem of working out how much width to allow for the name. 'iiii' now less than 'MMMM' <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span> <br>
(4) There is now a Parking tab in the tools.  You can customise the parking parameters, which will be remembered in the config file.  So each user can choose their own preferred place. You can also reveal the current parameters in the form needed for the <code>parkingConfig.h</code> file.  So to customise for a given platform, you customise so it work s optimally and can then copy out the settings to go in the <code>parkingConfig.h</code> file thus making them the default for that platform.  I think that is neat. <span aria-label="smirk" class="emoji emoji-1f60f" role="img" title="smirk">:smirk:</span></p>



<a name="322070414"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Parking/near/322070414" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Voss <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Parking.html#322070414">(Jan 18 2023 at 14:48)</a>:</h4>
<p>Please confirm the <code>consolePositioning.h</code> values for Windows so I can include in the source.  Presently</p>
<div class="codehilite"><pre><span></span><code>#ifdef __WXMSW__
#define CONSOLE_MIN_HEIGHT 20
#define CONSOLE_STUB 50
#define PARK_LEVEL 25
#define PARK_FIRST_X 70
#define PARK_SEP 8
</code></pre></div>



<a name="322075295"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Parking/near/322075295" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Rossiter <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Parking.html#322075295">(Jan 18 2023 at 15:08)</a>:</h4>
<p>Personally I prefer the same values for Windows as the MacOS has. Might simplify things a bit. Yes ... I see the clear button of a console when mimimised but for me this is useful for removing a console.</p>



<a name="322087826"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Parking/near/322087826" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Voss <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Parking.html#322087826">(Jan 18 2023 at 15:56)</a>:</h4>
<p><span class="user-mention silent" data-user-id="399559">Mike Rossiter</span> <a href="#narrow/stream/349785-JavaScript_pi/topic/Parking/near/322075295">said</a>:</p>
<blockquote>
<p>Personally I prefer the same values for Windows as the MacOS has. Might simplify things a bit. Yes ... I see the clear button of a console when mimimised but for me this is useful for removing a console.</p>
</blockquote>
<p>Clearing and removing parked consoles frequently is something you have been doing regularly during testing - but not something the user would do often.  If you try to close a fulling minimised console if will grow anyway to show the message and the clear button.  I suggest for consistency and so I do not have to document a special case for Windows, I would prefer that it minimises as much as possible - not leaving the Clear button visible.  So please can you confirm the values for that for Windows.</p>



<a name="322098168"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Parking/near/322098168" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Rossiter <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Parking.html#322098168">(Jan 18 2023 at 16:36)</a>:</h4>
<p>My SetClientSize() causes a problem with Windows. I cannot eliminate the "Clear" button! But shrinkYourself() from the script works. Frustrating.</p>



<a name="322098368"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Parking/near/322098368" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Rossiter <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Parking.html#322098368">(Jan 18 2023 at 16:37)</a>:</h4>
<p>Parking button also leaves the clear button visible.</p>



<a name="322098677"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Parking/near/322098677" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Rossiter <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Parking.html#322098677">(Jan 18 2023 at 16:39)</a>:</h4>
<p>Last setting  after using the tools:</p>
<div class="codehilite"><pre><span></span><code>#define CONSOLE_MIN_HEIGHT 39
#define CONSOLE_STUB 57
#define PARK_LEVEL 76
#define PARK_FIRST_X 76
#define PARK_SEP 9
</code></pre></div>



<a name="322105621"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Parking/near/322105621" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Voss <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Parking.html#322105621">(Jan 18 2023 at 17:08)</a>:</h4>
<p>For Windows I want to use SetSize() rather than SetClientSize - hence my request for the compiler flag for Linux.  That should fix your issue with Windows. <br>
<code>#define CONSOLE_MIN_HEIGHT 39</code> is large.  Previously you had 20.  That is probably why you still see the Clear button.</p>



<a name="322114727"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Parking/near/322114727" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Rossiter <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Parking.html#322114727">(Jan 18 2023 at 17:47)</a>:</h4>
<blockquote>
<p>hence my request for the compiler flag for Linux</p>
</blockquote>
<p>#ifdef(__LINUX__)<br>
#endif</p>
<p>Reduced CONSOLE_MIN_HEIGHT to 20 without effect. Need to wait for the mods for Linux/Windows to test again.</p>



<a name="322129194"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Parking/near/322129194" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Voss <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Parking.html#322129194">(Jan 18 2023 at 18:57)</a>:</h4>
<p>Had to use <code>#ifdef __LINUX__</code> not <code>#ifdef(__LINUX__)</code> as it is not a macro for me.<br>
Have applied condition to use <code>SetClientSize()</code> for Linux and <code>SetSize()</code> for all others in following</p>
<div class="codehilite"><pre><span></span><code>setConsoleMinSize()
park()
onChangeName()
</code></pre></div>
<p>but cannot test other than for MacOS.<br>
Have also found why, when a parked console's name was changed to something shorter, the parked console was not being made shorter.  Now it is.<br>
Alpha builds started ca 18:40<br>
Please give it a whirl. <span aria-label="pray" class="emoji emoji-1f64f" role="img" title="pray">:pray:</span></p>



<a name="322235297"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Parking/near/322235297" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Rossiter <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Parking.html#322235297">(Jan 19 2023 at 09:44)</a>:</h4>
<p>Windows is good. Will test Linux later this morning.</p>



<a name="322260702"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Parking/near/322260702" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Rossiter <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Parking.html#322260702">(Jan 19 2023 at 11:54)</a>:</h4>
<p>Problems with Linux. Back to square 1. <br>
Now trying:<br>
#if defined (__LINUX__)</p>



<a name="322268298"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Parking/near/322268298" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Rossiter <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Parking.html#322268298">(Jan 19 2023 at 12:31)</a>:</h4>
<p>That worked. Just getting some console settings for Ubuntu.</p>



<a name="322276336"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Parking/near/322276336" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Rossiter <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Parking.html#322276336">(Jan 19 2023 at 13:13)</a>:</h4>
<div class="codehilite"><pre><span></span><code>#if defined(__LINUX__)
#define CONSOLE_MIN_HEIGHT 38
#define CONSOLE_STUB 79
#define PARK_LEVEL 48
#define PARK_FIRST_X 66
#define PARK_SEP 21
#endif
</code></pre></div>
<p>Cannot remove the clear button.</p>



<a name="322276708"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Parking/near/322276708" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Rossiter <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Parking.html#322276708">(Jan 19 2023 at 13:14)</a>:</h4>
<p>Trying again with minimum height 20, just in case there was a mistake.</p>



<a name="322278943"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Parking/near/322278943" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Rossiter <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Parking.html#322278943">(Jan 19 2023 at 13:25)</a>:</h4>
<p>No difference ... the height still includes the clear button.</p>



<a name="322311169"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Parking/near/322311169" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Rossiter <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Parking.html#322311169">(Jan 19 2023 at 15:36)</a>:</h4>
<p>Yes please.</p>



<hr><p>Last updated: Feb 09 2025 at 14:28 UTC</p>
</html>