<html>
<head><meta charset="utf-8"><title>Catalogue updating · JavaScript_pi · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/index.html">JavaScript_pi</a></h2>
<h3>Topic: <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Catalogue.20updating.html">Catalogue updating</a></h3>

<hr>

<base href="https://opencpn.zulipchat.com">

<head><link href="https://leamas.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="322985265"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Catalogue%20updating/near/322985265" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Voss <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Catalogue.20updating.html#322985265">(Jan 23 2023 at 10:31)</a>:</h4>
<p>I no longer have access to our previous exchanges over this on Slack.</p>
<p>I have the new v2.0.0 build in the production repository.  Do I need to do anything so the catalogue gets updated?  Or maybe that happens routinely?<br>
The catalogue still <strong>shows</strong> v1.1b but it actually loads v2.0 2022:11:12 alpha  - somehow it got hold of that <span aria-label="face with raised eyebrow" class="emoji emoji-1f928" role="img" title="face with raised eyebrow">:face_with_raised_eyebrow:</span> </p>
<p>Also I have a very minor tweak to the plugin description on the OpenCPN manuals page.  I have made the update in the manuals page of the plugin repository but maybe something ha to happen for that to get pulled into the OpenCPN manual?</p>



<a name="322991906"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Catalogue%20updating/near/322991906" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Rossiter <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Catalogue.20updating.html#322991906">(Jan 23 2023 at 11:05)</a>:</h4>
<p>Sorry. Nothing routine here:<br>
<a href="https://opencpn-manuals.github.io/main/AlternativeWorkflow/InstallConfigure/Catalog-Github-Integration.html">https://opencpn-manuals.github.io/main/AlternativeWorkflow/InstallConfigure/Catalog-Github-Integration.html</a><br>
Easiest way of deleting your old auto branch in your fork of OpenCPN/plugins is to use the web page of your fork. Delete the auto branch using the branches page.<br>
Synch with Dave's Master branch using the <em>Synch Fork</em> button.<br>
Compile the JS plugin with a new tag.<br>
New metadata files are made in the fork OpenCPN/plugins folder (auto branch).<br>
Use terminal to merge these with the master branch.<br>
Make the PR for Dave to add the metadata files to the catalog.</p>
<p>I can update the manual. Just a matter of running a script. (Alec and  Rick can also do this).</p>



<a name="322999125"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Catalogue%20updating/near/322999125" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Rossiter <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Catalogue.20updating.html#322999125">(Jan 23 2023 at 11:43)</a>:</h4>
<p>Manual updated. Please can you check your changes were made.</p>



<a name="323028785"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Catalogue%20updating/near/323028785" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Rossiter <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Catalogue.20updating.html#323028785">(Jan 23 2023 at 14:09)</a>:</h4>
<p>Forgot to mention: Before you make the final PR for the catalog you need to remove old metadata xml files for the previous verson of the plugin.</p>



<a name="323050593"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Catalogue%20updating/near/323050593" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Voss <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Catalogue.20updating.html#323050593">(Jan 23 2023 at 15:34)</a>:</h4>
<p><span class="user-mention silent" data-user-id="399559">Mike Rossiter</span> <a href="#narrow/stream/349785-JavaScript_pi/topic/Catalogue.20updating/near/323028785">said</a>:</p>
<blockquote>
<p>Forgot to mention: Before you make the final PR for the catalog you need to remove old metadata xml files for the previous verson of the plugin.</p>
</blockquote>
<p>From where?  The repository?  Don't see why as the auto branch points to the correct metadata.  And removing before the catalogue has been updated might clobber anyone updating the catlogue before the PR has been completed.</p>



<a name="323053596"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Catalogue%20updating/near/323053596" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Voss <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Catalogue.20updating.html#323053596">(Jan 23 2023 at 15:47)</a>:</h4>
<p>PR does checks. Looks like problem with wx315?</p>
<div class="codehilite" data-code-language="processing"><pre><span></span><code>76
metadata/javascript-v2.0.0d-darwin-wx315-10.13.6.xml:20: element target: Schemas validity error : Element 'target': [facet'enumeration'] The value 'darwin-wx315' is not an element of the set {'all', 'android-arm64', 'android-arm64-v8a', 'android-armeabi-v7a', 'android-armhf', 'darwin', 'darwin-arm64', 'darwin-wx32', 'debian-armhf', 'debian-wx32-armhf', 'debian-gtk3-armhf', 'debian-x86_64', 'debian-wx32-x86_64', 'debian-arm64', 'debian-wx32-arm64', 'flatpak-aarch64', 'flatpak-x86_64', 'mingw', 'mingw-x86_64', 'msvc', 'msvc-64', 'msvc-wx32', 'raspbian-armhf', 'ubuntu-armhf', 'ubuntu-gtk3-armhf', 'ubuntu-gtk3-x86_64', 'ubuntu-x86_64'}.
77
metadata/javascript-v2.0.0d-darwin-wx315-10.13.6.xml fails to validate
</code></pre></div>



<a name="323055314"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Catalogue%20updating/near/323055314" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Voss <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Catalogue.20updating.html#323055314">(Jan 23 2023 at 15:55)</a>:</h4>
<div class="codehilite" data-code-language="delete"><pre><span></span><code>Synch with Dave's Master branch using the Synch Fork button.
Compile the JS plugin with a new tag.
New metadata files are made in the fork OpenCPN/plugins folder (auto branch).
</code></pre></div>
<p>Seems like after deleting the old auto branch to clear it, I have to create a new auto branch, else build fails.</p>



<a name="323057183"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Catalogue%20updating/near/323057183" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Voss <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Catalogue.20updating.html#323057183">(Jan 23 2023 at 16:03)</a>:</h4>
<p><span class="user-mention silent" data-user-id="399559">Mike Rossiter</span> <a href="#narrow/stream/349785-JavaScript_pi/topic/Catalogue.20updating/near/322999125">said</a>:</p>
<blockquote>
<p>Manual updated. Please can you check your changes were made.</p>
</blockquote>
<p>Not updated.<br>
<a href="https://github.com/antipole2/JavaScript_pi/blob/master/manual/modules/ROOT/pages/index.adoc">My manual page in JS repository</a><br>
<a href="https://opencpn-manuals.github.io/plugins/javascript/0.1/index.html">OCPN pJavaScript page</a></p>



<a name="323059048"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Catalogue%20updating/near/323059048" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Voss <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Catalogue.20updating.html#323059048">(Jan 23 2023 at 16:10)</a>:</h4>
<p><span class="user-mention silent" data-user-id="554731">Tony Voss</span> <a href="#narrow/stream/349785-JavaScript_pi/topic/Catalogue.20updating/near/323050593">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="399559">Mike Rossiter</span> <a href="#narrow/stream/349785-JavaScript_pi/topic/Catalogue.20updating/near/323028785">said</a>:</p>
<blockquote>
<p>Forgot to mention: Before you make the final PR for the catalog you need to remove old metadata xml files for the previous verson of the plugin.</p>
</blockquote>
<p>From where?  The repository?  Don't see why as the auto branch points to the correct metadata.  And removing before the catalogue has been updated might clobber anyone updating the catlogue before the PR has been completed.</p>
</blockquote>
<p>Ah yes - I remember - section 3.2 in the guide</p>



<a name="323071557"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Catalogue%20updating/near/323071557" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Rossiter <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Catalogue.20updating.html#323071557">(Jan 23 2023 at 17:02)</a>:</h4>
<blockquote>
<p>Not updated.</p>
</blockquote>
<p>Latest commit 4 days ago is in the manual online now. Do you need to delete the browser cache and reload?</p>



<a name="323074004"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Catalogue%20updating/near/323074004" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Rossiter <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Catalogue.20updating.html#323074004">(Jan 23 2023 at 17:13)</a>:</h4>
<blockquote>
<p>From where? The repository? Don't see why as the auto branch points to the correct metadata. And removing before the catalogue has been updated might clobber anyone updating the catlogue before the PR has been completed.</p>
</blockquote>
<p>Apologies. I forgot to say that a new auto branch in the fork (made from master) was needed before compiling the prod release again. You are removing the old metadata files from the master branch of the fork OpenCPN/plugins as a final step before the PR. It changes nothing in the catalog until the PR is accepted. I have had many tantrums with the workflow as well.</p>



<a name="323075839"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Catalogue%20updating/near/323075839" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Voss <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Catalogue.20updating.html#323075839">(Jan 23 2023 at 17:21)</a>:</h4>
<p>Despite the error saying the PR had failed and was not completed, I have just got a message saying it had been merged into master.  I had not deleted the old version files.<br>
Updated the plugin catalog and reinstalled the plugin and it offered me both versions - I can choose which to install!<br>
I will clean the old versions out at the next update.</p>



<a name="323076208"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Catalogue%20updating/near/323076208" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Voss <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Catalogue.20updating.html#323076208">(Jan 23 2023 at 17:23)</a>:</h4>
<p>By the way, I never got around to merging autoi back into Master.  I just did a PR on auto branch and it seems to have worked.</p>



<a name="323078285"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Catalogue%20updating/near/323078285" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Rossiter <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Catalogue.20updating.html#323078285">(Jan 23 2023 at 17:33)</a>:</h4>
<p>This means that the master branch of the fork is out of step with the upstream master. Leave it a day or two and when you make the PR from auto you could be overwriting files made by another user for another plugin, if you have not deleted/remade the auto branch. </p>
<p><span class="user-mention" data-user-id="399510">@Alec Leamas</span> : Is there another reason for the merge? Rick has also missed out the merge in the past and made the PR from auto.</p>



<a name="323081805"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Catalogue%20updating/near/323081805" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Catalogue.20updating.html#323081805">(Jan 23 2023 at 17:49)</a>:</h4>
<p><span class="user-mention" data-user-id="399559">@Mike Rossiter</span>  <span class="user-mention" data-user-id="554731">@Tony Voss</span> </p>
<p>You are right: If the auto branch cannot be merged into master but later is accepted as PR it means the the local master branch  is not synced with the upstream master branch.</p>
<p>Here, "local" is the master in your, mine or Tony's fork of OpenCPN/plugins. "upstream" is the master branch at OpenCPN/plugins.</p>
<p>I would not recommend the workflow to submit the auto branch without first merging it with master. We also have new, still undocumented workflows needed to handle the "frozen" builds -- this is new in the 5.8.0 cycle.</p>
<p>The workflow to make a PR is described in <a href="https://opencpn-manuals.github.io/main/AlternativeWorkflow/InstallConfigure/Catalog-Github-Integration.html#make-PR">https://opencpn-manuals.github.io/main/AlternativeWorkflow/InstallConfigure/Catalog-Github-Integration.html#make-PR</a></p>
<p>In particular, the steps to sync the local master with upstream is:</p>
<div class="codehilite"><pre><span></span><code>    $ git remote update upstream
    $ git checkout master
    $ git rebase upstream/master
</code></pre></div>
<p>After these steps, the local master is ok. Next step is to sync auto with the local master (and thus also upstream/master):</p>
<div class="codehilite"><pre><span></span><code>     $ git fetch origin auto:auto
     $ git checkout auto
     $ git rebase master
</code></pre></div>
<p>After these steps, auto is synced with both local master and upstream/master. It is now ready to be merged using:</p>
<div class="codehilite"><pre><span></span><code>    $ git checkout master
    $ git merge --squash auto
    $ git commit -m &quot;Merging auto branch into master&quot;
</code></pre></div>
<p>Now is the time to remove old builds while still keeping those with are frozen in place. For now, this is a manual step which needs some thought before doing the PR.</p>



<a name="324720475"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Catalogue%20updating/near/324720475" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Voss <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Catalogue.20updating.html#324720475">(Jan 30 2023 at 16:21)</a>:</h4>
<p>Been having lots of grief with this process - me being not well versed in github.<br>
Now found problems arose because the location of the manual page has been moved and url validation failing.  Fixed that.</p>
<p>Following Alec's recipe</p>
<div class="codehilite"><pre><span></span><code>$ git merge --squash auto
$ git commit -m &quot;Merging auto branch into master&quot;
</code></pre></div>
<p>All looks OK but does not update my Master plugins/metadata on remote.<br>
I have to do a <code>git push</code>, which also triggers the checking even if I am not ready for that.<br>
Alec doesn't mention that.  Am I missing something?  Or is Alec assuming I will know that?</p>



<a name="324739690"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Catalogue%20updating/near/324739690" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Rossiter <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Catalogue.20updating.html#324739690">(Jan 30 2023 at 17:46)</a>:</h4>
<p>Not easy until you do it a few times. No worry about the catalog as you are not making a PR.</p>
<blockquote>
<p>I have to do a git push, which also triggers the checking</p>
</blockquote>
<p>The instructions assume people know that  <code>git push</code> follows <code>git commit</code> . This  should update your master branch of the plugins fork.</p>
<p>Many times I have had to delete the fork. Make a new fork of OpenCPN/plugins and go through the build process again. </p>
<p>You won't see the metadata change on your Mac unless you checkout master and pull the changes. This  can be done using Github Desktop.  You should see changes to the metadata if you look at the OpenCPN/plugins repo  fork online.</p>



<a name="324740281"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Catalogue%20updating/near/324740281" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Catalogue.20updating.html#324740281">(Jan 30 2023 at 17:48)</a>:</h4>
<blockquote>
<p>This can be done using Github Desktop. You should see changes to the metadata if you look at the OpenCPN/plugins repo fork online.</p>
</blockquote>
<p>Or, simpler in my view</p>
<div class="codehilite"><pre><span></span><code>    $ git checkout master
    $ git remote update origin
    $ git rebase origin/master
</code></pre></div>
<p>which does the same as <code>git pull</code>but allows you to use <code>git rebase --abort</code> if anything goes wrong.</p>



<a name="324882654"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Catalogue%20updating/near/324882654" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Voss <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Catalogue.20updating.html#324882654">(Jan 31 2023 at 11:10)</a>:</h4>
<p>My PR for Javascriptv2.0.1d back to OCPN Master is still open after 24hrs.  It passed the URL checks this time but still reports an xmllint error.  Might that be why it has not been closed?  Have run Alec's recipe   to check it (3.3) and there is no output, which I think means it was found OK.  Don't think that is within my control?  Can someone advise please?</p>



<a name="324892333"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Catalogue%20updating/near/324892333" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Rossiter <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Catalogue.20updating.html#324892333">(Jan 31 2023 at 11:58)</a>:</h4>
<p>I think the problem is with the Darwin target name (<em>darwin-wx315</em>). This name is not in the .xsd. Now uses <em>darwin</em>.<br>
Commit here removed darwin-wx315:<br>
<a href="https://github.com/OpenCPN/plugins/commit/cf1c447ae2d117d588a532304dd454c1df94082b">https://github.com/OpenCPN/plugins/commit/cf1c447ae2d117d588a532304dd454c1df94082b</a><br>
<span class="user-mention" data-user-id="399510">@Alec Leamas</span> Does Tony need to move to another update-template or should <em>darwin-wx315</em> be restored?</p>



<a name="324893173"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Catalogue%20updating/near/324893173" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Rossiter <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Catalogue.20updating.html#324893173">(Jan 31 2023 at 12:02)</a>:</h4>
<p>Tony is using template <em>sd3.1.4</em> at the moment.</p>



<a name="324901104"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Catalogue%20updating/near/324901104" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Voss <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Catalogue.20updating.html#324901104">(Jan 31 2023 at 12:42)</a>:</h4>
<p><span class="user-mention silent" data-user-id="399559">Mike Rossiter</span> <a href="#narrow/stream/349785-JavaScript_pi/topic/Catalogue.20updating/near/324892333">said</a>:</p>
<blockquote>
<p>Commit here removed darwin-wx315:</p>
</blockquote>
<p>What do I need to do to take advantage of your fix Mike?  Update script?  Rebuild?</p>



<a name="324903126"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Catalogue%20updating/near/324903126" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Rossiter <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Catalogue.20updating.html#324903126">(Jan 31 2023 at 12:52)</a>:</h4>
<p>Let's wait.<br>
<span class="user-mention" data-user-id="399510">@Alec Leamas</span>  Tony is building with sd3.1.4 which produces a target of darwin-wx315.  This is for OpenCPN 5.6.2. This target name is not recognised by ocpn-plugin.xsd.</p>



<a name="324909618"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Catalogue%20updating/near/324909618" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Voss <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Catalogue.20updating.html#324909618">(Jan 31 2023 at 13:21)</a>:</h4>
<p>Sorry both - I am getting confused... between Mike and Alec's proposals.   Oh dear!  Trying to do two things at once.<br>
(1) Re-catalogue JS v2.0.1 for OCPNv5.6.1.  Have the xml files ready but the PR fails on lint.<br>
As of now, Darwin xml  has <code>  &lt;target&gt;darwin-wx315&lt;/target&gt;</code> <br>
Should I edit it to <code>  &lt;target&gt;darwin&lt;/target&gt;</code> ?</p>
<p>(2) Am trying to use the new build system to build for OCPNv5.7<br>
Here I have just updated templates to sd3.2.2 as advised by Mike<br>
Only doing local builds for now, so XML not an issue at the mo.</p>



<a name="324921183"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Catalogue%20updating/near/324921183" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Rossiter <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Catalogue.20updating.html#324921183">(Jan 31 2023 at 14:07)</a>:</h4>
<p>Yes ... two things going on, which may be linked.<br>
(1) Build for OpenCPN 5.6.2 - target <em>darwin-wx315</em> not recognised. <br>
(2) Building for OpenCPN 5.7/8 - no artifacts will be built for <em>darwin-wx315</em> or <em>darwin</em>. Only <em>darwin-wx32</em> artifacts.<br>
In this beta stage we should be able to build for both OpenCPN 5.6.2 and 5.7/8 and PR for either should be accepted.<br>
Raising an issue at OpenCPN/plugins.</p>



<a name="324921272"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Catalogue%20updating/near/324921272" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Rossiter <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Catalogue.20updating.html#324921272">(Jan 31 2023 at 14:07)</a>:</h4>
<p>Issue raised here:<br>
<a href="https://github.com/OpenCPN/plugins/issues/815">https://github.com/OpenCPN/plugins/issues/815</a></p>



<a name="324997533"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Catalogue%20updating/near/324997533" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Catalogue.20updating.html#324997533">(Jan 31 2023 at 19:26)</a>:</h4>
<blockquote>
<p>Should I edit it to   &lt;target&gt;darwin&lt;/target&gt; ?</p>
</blockquote>
<p>Yes</p>
<blockquote>
<p>Am trying to use the new build system to build for OCPNv5.7</p>
</blockquote>
<p>Right. Just beware that you really should use the 5.7 beta with these plugins (they are built using wxWidgets 3.2 which is what the 5.7 beta does, but not 5.6.2). If you are walking this path, <strong>don't</strong> make the edit above.</p>



<a name="325152884"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Catalogue%20updating/near/325152884" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Voss <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Catalogue.20updating.html#325152884">(Feb 01 2023 at 13:06)</a>:</h4>
<p><span class="user-mention" data-user-id="399559">@Mike Rossiter</span>   I am totally stuck trying to build v2.0.1   for OCPNv5.2 (wx3.1) using the 'old' build system.  I am patching the Darwin xml file to change the target to just &lt;target&gt;darwin&lt;/target&gt; but I think something else is amiss.  The PRs back to  OCPN stall with a conflict and now when I start the process with</p>
<div class="codehilite"><pre><span></span><code>git remote update upstream
git checkout master
</code></pre></div>
<p>that fails with<br>
<code>error: Committing is not possible because you have unmerged files.</code></p>
<p>I have got into a complete mess and cannot untangle it.  I have wasted <strong>days</strong> on this.  I think the best way to proceed might be to pull from OpenCPN/plugins abandoning the mess on my fork and starting again. Is there a way I can do that? to force my fork back to what is on OpenCPN/plugins?</p>



<a name="325204959"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Catalogue%20updating/near/325204959" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Rossiter <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Catalogue.20updating.html#325204959">(Feb 01 2023 at 16:33)</a>:</h4>
<p>Been there many times. I ended up deleting the fork of OpenCPN/plugins, the repo in your Github. Then go to OpenCPN/plugins and make a new fork. Everything is then up to date with the upstream!</p>



<a name="325247369"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Catalogue%20updating/near/325247369" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony Voss <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Catalogue.20updating.html#325247369">(Feb 01 2023 at 19:17)</a>:</h4>
<p>Another failure and wasted day.  Started with fresh OCPN/plugins but always get stuck with  conflict in <code> ocpn-plugins.xml</code> when trying to rebase.  I do not know what has gone wrong but something is twisted - possibly because I edited &lt;target&gt; to darwin or something else is broken.<br>
I have had it.  I must start other things like cruise planning.<br>
Sorry for the rant but I have had it </p>
<div class="codehilite"><pre><span></span><code>git status
interactive rebase in progress; onto 1e163127
Last commands done (15 commands done):
   pick 5a38c993 Removing obsolete metadata
   pick 37f27b52 Update ocpn-plugins.xml
  (see more in file .git/rebase-merge/done)
Next commands to do (13 remaining commands):
   pick ec79c3e8 Change Darwin target from darwin-wx315 to darwin
   pick 89abb5c0 ae74893: flatpak-x86_64: v2.0.1 build e
  (use &quot;git rebase --edit-todo&quot; to view and edit)
You are currently rebasing branch &#39;auto&#39; on &#39;1e163127&#39;.
  (all conflicts fixed: run &quot;git rebase --continue&quot;)

nothing to commit, working tree clean
</code></pre></div>



<a name="325282525"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Catalogue%20updating/near/325282525" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Catalogue.20updating.html#325282525">(Feb 01 2023 at 22:37)</a>:</h4>
<p>Tony: what timezone are you in? Perhaps we could arrange a session where we resolve this ..</p>



<a name="325282981"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Catalogue%20updating/near/325282981" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Catalogue.20updating.html#325282981">(Feb 01 2023 at 22:40)</a>:</h4>
<p>This topic was moved here from <a class="stream-topic" data-stream-id="349785" href="/#narrow/stream/349785-JavaScript_pi/topic/.28no.20topic.29">#JavaScript_pi &gt; (no topic)</a> by <span class="user-mention silent" data-user-id="399510">Alec Leamas</span>.</p>



<a name="325356522"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Catalogue%20updating/near/325356522" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Rossiter <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Catalogue.20updating.html#325356522">(Feb 02 2023 at 10:07)</a>:</h4>
<p>Alec: The problem seems to stem from the withdrawal of the target <em>darwin-wx315</em>.  This target may be needed by other plugin updates for 5.6.2. Would it not be simpler just to reinstate the target in <em>ocpn-plugin.xsd</em>?</p>



<a name="325510322"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Catalogue%20updating/near/325510322" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Catalogue.20updating.html#325510322">(Feb 02 2023 at 22:30)</a>:</h4>
<p>NO, not that simple. In the end, it's a question about what main opencpn accepts, hardcoded facts.  And darwin-wx315 is not on that list.</p>
<p>This ABI is basically a mistake, we should have named it wx32 from the beginning. But we didn't. Shit happens.</p>



<a name="325510426"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Catalogue%20updating/near/325510426" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Catalogue.20updating.html#325510426">(Feb 02 2023 at 22:31)</a>:</h4>
<p><span class="user-mention" data-user-id="399559">@Mike Rossiter</span>  ^ Sorry for late reply</p>



<a name="325591411"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Catalogue%20updating/near/325591411" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Rossiter <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Catalogue.20updating.html#325591411">(Feb 03 2023 at 10:22)</a>:</h4>
<p>Templates sd3.1.x are for O5.6.2 <br>
Templates sd3.2.x are for O 5.7/8 (wxWidgets 3.2.1)<br>
<span class="user-mention" data-user-id="399510">@Alec Leamas</span> : <em>PluginSetup.cmake</em> for templates sd3.1.x uses:<br>
<code>set(plugin_target "darwin-wx315")</code><br>
In order for O5.6.2 to recognise MacOS plugins should a new release of sd3.1 be made with:<br>
<code>set(plugin_target "darwin")</code></p>



<a name="325591714"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Catalogue%20updating/near/325591714" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Catalogue.20updating.html#325591714">(Feb 03 2023 at 10:23)</a>:</h4>
<blockquote>
<p>In order for O5.6.2 to recognise MacOS plugins should a new release of sd3.1 be made with:<br>
set(plugin_target "darwin")</p>
</blockquote>
<p>No, my bad. 5.6.2 actually recognizes darwin-wx315. OTOH 5.7/5.8 only recognizes -wx32</p>



<a name="325592306"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/349785-JavaScript_pi/topic/Catalogue%20updating/near/325592306" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/349785-JavaScript_pi/topic/Catalogue.20updating.html#325592306">(Feb 03 2023 at 10:27)</a>:</h4>
<p>One basic issue here is the checking done in opencpn/plugins. In a sane world we would have a beta version of ocpn-plugin.xsd which was used when validating the beta branch PRs and master version used when validating  master PRs.</p>
<p>However, we now have a master ocpn-plugin.xsd which is used to validate  all sorts of PRs. This will fail, since the list of know ABI:s differs on different branches.</p>



<hr><p>Last updated: Dec 28 2024 at 06:35 UTC</p>
</html>