<html>
<head><meta charset="utf-8"><title>Test issues · Master - 5.8.0  (was: comms) · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/index.html">Master - 5.8.0  (was: comms)</a></h2>
<h3>Topic: <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html">Test issues</a></h3>

<hr>

<base href="https://opencpn.zulipchat.com">

<head><link href="https://leamas.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="294148227"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/294148227" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#294148227">(Aug 18 2022 at 18:45)</a>:</h4>
<p>A new stream for findings:<br>
The TCP GSV data from my server did in some way transferred bad data to Dashboard. "Number of satellites" was collected from a empty field. See pict.<br>
With this "hack" it was solved but may need a prof rework?<br>
In "comm_decoder.cpp" row; 221</p>
<blockquote>
<div class="codehilite"><pre><span></span><code>if (m_NMEA0183.Gsv.MessageNumber == 1)
temp_data.n_satellites = m_NMEA0183.Gsv.SatsInView;
else return false; // Other msg numbers can be scrap
</code></pre></div>

</blockquote>
<p><a href="/user_uploads/33951/t1oi6Aivf2JvDStVl7vjYWIQ/bild.png">bild.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/33951/t1oi6Aivf2JvDStVl7vjYWIQ/bild.png" title="bild.png"><img src="/user_uploads/33951/t1oi6Aivf2JvDStVl7vjYWIQ/bild.png"></a></div>



<a name="294158444"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/294158444" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#294158444">(Aug 18 2022 at 19:50)</a>:</h4>
<p>Good catch. Not sure about the patch as as such.</p>
<p>You can make PRs against the comm branch, it's one of the options when  submitting the PR. This one should be easy anyway, but just so you know.</p>
<p>Sidenote: "Test issues" is  an "issue" in zulip parlance, not a stream. The stream is on a higher level, all these discussions takes place in the "comms" stream. There are other streams to the left, notably one for the manuals.</p>



<a name="294199574"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/294199574" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#294199574">(Aug 19 2022 at 03:55)</a>:</h4>
<p>Hakan<br>
Have not looked closely at Plugin interface for new message scheme yet.  Coming soon, bit by bit.</p>



<a name="294214249"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/294214249" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#294214249">(Aug 19 2022 at 07:21)</a>:</h4>
<p><span class="user-mention" data-user-id="517002">@Dave Register</span> Not that an interface is available in ocpn_plugin.h</p>



<a name="294217591"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/294217591" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#294217591">(Aug 19 2022 at 07:55)</a>:</h4>
<p>Dave..<br>
Independent of the plugin interface I do think we need to clean out possible null values in GSV message number &gt; 1. For example by my patch above?</p>



<a name="294356960"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/294356960" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#294356960">(Aug 19 2022 at 20:20)</a>:</h4>
<p>In comm_decoder.cpp:295</p>
<blockquote>
<p>if (ParseN2kPGN129029(v, SID, DaysSince1970, SecondsSinceMidnight,<br>
                        Latitude, Longitude, Altitude,<br>
                        GNSStype, GNSSmethod,<br>
                        nSatellites, HDOP, PDOP, GeoidalSeparation,<br>
                        nReferenceStations, ReferenceStationType, ReferenceSationID,<br>
                        AgeOfCorrection<br>
                        )) {</p>
</blockquote>
<p>Strange... If I compare this list with the info for PGN 129029 <a href="https://copperhilltech.com/content/NMEA2K_Network_Design_v2.pdf">here</a> there are two more fields between GNSSmethod and  nSatellites. Either is my link not correct or I misunderstand the code?</p>



<a name="294358638"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/294358638" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#294358638">(Aug 19 2022 at 20:33)</a>:</h4>
<p>A strange message every time when starting O is present today.  The log file can't be removed.<br>
In English: err 32: The file can't be handled since it busy by another process.  ?? <br>
Have we moved the log file renaming to log.log so it's already open?<br>
<a href="/user_uploads/33951/w-AVEE5g3yeKQLFJfGRar1R7/bild.png">bild.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/33951/w-AVEE5g3yeKQLFJfGRar1R7/bild.png" title="bild.png"><img src="/user_uploads/33951/w-AVEE5g3yeKQLFJfGRar1R7/bild.png"></a></div>



<a name="294377451"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/294377451" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#294377451">(Aug 19 2022 at 23:51)</a>:</h4>
<p>About ParseN2kPGN129029:  The order of arguments is not related to the order of the values in the message.  So, no problem.</p>



<a name="294440906"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/294440906" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#294440906">(Aug 20 2022 at 13:21)</a>:</h4>
<p>The opencpn.log-file error message when the log file should be renamed to log.log (i.e. opencpn.log should be deleted?)<br>
is happening here:<br>
BasePlatform.cpp : 643</p>
<blockquote>
<p>g_logger = new OcpnLog(mlog_file.mb_str());<br>
  m_Oldlogger = wxLog::SetActiveTarget(g_logger);</p>
</blockquote>
<p>Row 643 g_logger.... is executed.<br>
the error message appears when row 644 m_Oldlogger...is running.<br>
The new opencpn.log.log file is created but the old opencpn.log still remains.<br>
I can't find the real problem. Are we missing to close to old log file?</p>



<a name="294441965"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/294441965" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#294441965">(Aug 20 2022 at 13:30)</a>:</h4>
<p>Related to last post about log file error or not..<br>
When I stop O a number of messages are shown instead of print the info to the log file. See picts.</p>
<p><a href="/user_uploads/33951/6i62BI4ZnL16rM9wYE3ZHSao/bild.png">bild.png</a> <br>
<a href="/user_uploads/33951/QBMra0E3c0jJvRk2QHKuNK0W/bild.png">bild.png</a> <br>
<a href="/user_uploads/33951/5th9yYoagl66aF6q7J2UQCPz/bild.png">bild.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/33951/6i62BI4ZnL16rM9wYE3ZHSao/bild.png" title="bild.png"><img src="/user_uploads/33951/6i62BI4ZnL16rM9wYE3ZHSao/bild.png"></a></div><div class="message_inline_image"><a href="/user_uploads/33951/QBMra0E3c0jJvRk2QHKuNK0W/bild.png" title="bild.png"><img src="/user_uploads/33951/QBMra0E3c0jJvRk2QHKuNK0W/bild.png"></a></div><div class="message_inline_image"><a href="/user_uploads/33951/5th9yYoagl66aF6q7J2UQCPz/bild.png" title="bild.png"><img src="/user_uploads/33951/5th9yYoagl66aF6q7J2UQCPz/bild.png"></a></div>



<a name="294446033"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/294446033" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#294446033">(Aug 20 2022 at 14:06)</a>:</h4>
<p>I see the same.  Alec?</p>



<a name="294447892"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/294447892" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#294447892">(Aug 20 2022 at 14:23)</a>:</h4>
<p>Later...</p>



<a name="294648217"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/294648217" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#294648217">(Aug 22 2022 at 10:43)</a>:</h4>
<p>Look ahead mode..<br>
When serial connected to either N0183 or N2K (using YDNU-02) the Look ahead mode is 180° false. So it could be called "Look behind mode" instead :)</p>



<a name="294821784"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/294821784" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#294821784">(Aug 23 2022 at 08:14)</a>:</h4>
<p>N2K uses SI units...<br>
Apparently SI units are used by the N2K standard.<br>
With this the SOG value shows correct data:</p>
<blockquote>
<div class="codehilite"><pre><span></span><code>if (ParseN2kPGN129026(v, SID, ref, COG, SOG)) {
temp_data.gCog = GEODESIC_RAD2DEG(COG);
temp_data.gSog = MS2KNOTS(SOG);
return true;
</code></pre></div>

<p>} </p>
</blockquote>
<p>So we may introduce these into comm_decoder?</p>
<blockquote>
<p>#define GEODESIC_RAD2DEG(r) ((r) * (180.0 / M_PI))<br>
#define MS2KNOTS(r) ((r) * (1.9438444924406))</p>
</blockquote>



<a name="294826108"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/294826108" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#294826108">(Aug 23 2022 at 08:48)</a>:</h4>
<blockquote>
<p>So we may introduce these into comm_decoder?<br>
#define</p>
</blockquote>
<p>Wouldn't   <code>static inline double GeodesicRadToDeg(double rads) {...}</code>  be a better option in this case?</p>



<a name="294866662"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/294866662" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#294866662">(Aug 23 2022 at 13:36)</a>:</h4>
<p>I can't judge that.. I just copied a few examples from Dashboard.</p>



<a name="294868585"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/294868585" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#294868585">(Aug 23 2022 at 13:46)</a>:</h4>
<p>Those examples are basically code of  the 90'ies,   modern (since 20 years!) C++ does not use  macros in such situations.  The problem with macros is that the compiler cannot type check . There is no difference in generated code in an example like this.</p>



<a name="294870292"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/294870292" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#294870292">(Aug 23 2022 at 13:54)</a>:</h4>
<blockquote>
<p>There is no difference in generated code </p>
</blockquote>
<p>Well, the compiler could actually optimize any function, so also a <code>static inline</code>one. Which it certainly cannot do with a macro...</p>



<a name="295051244"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/295051244" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#295051244">(Aug 24 2022 at 13:50)</a>:</h4>
<p>Done, by static inline.....</p>



<a name="295177288"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/295177288" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#295177288">(Aug 25 2022 at 07:47)</a>:</h4>
<p>Very good. Issue "SI-units" closed.</p>



<a name="295597910"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/295597910" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#295597910">(Aug 27 2022 at 13:31)</a>:</h4>
<p><strong>Look ahead mode..</strong><br>
I reported the the Look ahead mode for serial devices are +- 180° false.<br>
Now I'm using N0183 network TCP ("my" server)  and the Look ahead is mode still false. <br>
But it may be my conclusion to say 180° false is not a correct description.<br>
Since the boat symbol is always in the bottom part of the screen it may be the Look ahead function don't get correct COG (or heading) from the new code in the coom branch? The function seems to assume northerly (0°) course all time?</p>



<a name="297221704"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/297221704" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#297221704">(Sep 05 2022 at 12:51)</a>:</h4>
<p><strong>Network stability</strong>...<br>
If a network connection is established in O and the PC's network is temporarily disconnected or the network is changed to another card/wifi provider OCPN's connection is not reestablished but need a O restart. to connect again.</p>



<a name="297222591"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/297222591" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#297222591">(Sep 05 2022 at 12:58)</a>:</h4>
<p>The task list function in TODO list was nice.  <br>
Should I use one here as well or move solved messages to a new topic: "solved issues"?</p>



<a name="297241350"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/297241350" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#297241350">(Sep 05 2022 at 15:08)</a>:</h4>
<p>Please do, it might indeed be useful.</p>



<a name="297243580"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/297243580" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#297243580">(Sep 05 2022 at 15:25)</a>:</h4>
<p>There was an "or" in the sentence but suppose you answered to make a task list?</p>



<a name="297596965"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/297596965" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#297596965">(Sep 07 2022 at 13:56)</a>:</h4>
<p>I run into a O crash.<br>
I built the code of today and run it with a serial connection from last run. No problem.<br>
I then switched to a network TCP connection. The serial now went down nicely and the TCP connection was established. Very good!<br>
Then I closed O and restated with the network TCP enabled in config. Crash after "OnInitTimer...4"<br>
Cal stack here: and debug exception pict. below</p>
<blockquote>
<div class="codehilite"><pre><span></span><code> opencpn.exe!Multiplexer::HandleN0183(std::shared_ptr&lt;Nmea0183Msg const &gt; n0183_msg) Line 281 C++
opencpn.exe!Multiplexer::{ctor}::__l2::&lt;lambda&gt;(ObservedEvt ev) Line 106    C++
opencpn.exe!wxEventFunctorFunctor&lt;wxEventTypeTag&lt;ObservedEvt&gt;,void &lt;lambda&gt;(ObservedEvt) &gt;::operator()(wxEvtHandler * __formal, wxEvent &amp; event) Line 503   C++
[External Code] 
[Frames below may be incorrect and/or missing, no symbols loaded for wxbase312u_vc_custom.dll]  Unknown
opencpn.exe!NotifySetupOptionsPlugin(const PlugInContainer * pic) Line 2024 C++
opencpn.exe!PlugInManager::NotifySetupOptions() Line 2039   C++
opencpn.exe!options::CreateControls() Line 5823 C++
opencpn.exe!options::options(MyFrame * parent, int id, const wxString &amp; caption, const wxPoint &amp; pos, const wxSize &amp; size, long style) Line 1600    C++
opencpn.exe!MyFrame::OnInitTimer(wxTimerEvent &amp; event) Line 5277    C++
[External Code] 
opencpn.exe!WinMain(HINSTANCE__ * hInstance, HINSTANCE__ * hPrevInstance, char * __formal, int nCmdShow) Line 947   C++
[External Code]
</code></pre></div>

</blockquote>
<p><a href="/user_uploads/33951/vVpEyLq1sB9Sz_QBdHVXSdQV/bild.png">bild.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/33951/vVpEyLq1sB9Sz_QBdHVXSdQV/bild.png" title="bild.png"><img src="/user_uploads/33951/vVpEyLq1sB9Sz_QBdHVXSdQV/bild.png"></a></div>



<a name="297648834"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/297648834" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#297648834">(Sep 07 2022 at 18:25)</a>:</h4>
<p>The NMEA Debug window is now working again for all N0183. Serial or Network.  Thanks</p>



<a name="297649416"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/297649416" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#297649416">(Sep 07 2022 at 18:29)</a>:</h4>
<p><strong>Connection input filter...</strong><br>
Although it's reported as functional in the NMEA Debug window, color is changed, the filter has no function neither for a Network nor a serial connection. <br>
If I for example filter out AIVDM on a TCP connection AIS targets are still updated.</p>



<a name="297649915"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/297649915" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#297649915">(Sep 07 2022 at 18:32)</a>:</h4>
<p>Trying to add a filter to a serial connection creates a O crash. </p>
<blockquote>
<div class="codehilite"><pre><span></span><code>  535f5945()
[Frames below may be incorrect and/or missing]
opencpn.exe!CommDriverN0183SerialThread::Entry() Line 555   C++
[External Code]
</code></pre></div>

</blockquote>



<a name="297654143"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/297654143" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#297654143">(Sep 07 2022 at 18:57)</a>:</h4>
<p><strong>No Position to plugins (Radar_pi)</strong><br>
Although heading is nicely transferred to the  radar plugin position is not. I haven't yet checked other plugins.</p>



<a name="297661864"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/297661864" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#297661864">(Sep 07 2022 at 19:46)</a>:</h4>
<p>About crash on startup with TCP enabled:<br>
Do you have only one enabled connection, your TCP server?</p>



<a name="297661980"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/297661980" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#297661980">(Sep 07 2022 at 19:47)</a>:</h4>
<p>Is it always happening?  I am having no trouble...</p>



<a name="297693500"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/297693500" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#297693500">(Sep 08 2022 at 00:33)</a>:</h4>
<p>Corrected N0183 input filtering and Debug Window functionality.<br>
Could not reproduce any problems with setting filters...</p>



<a name="297716562"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/297716562" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#297716562">(Sep 08 2022 at 06:45)</a>:</h4>
<p><span class="user-mention silent" data-user-id="517002">Dave Register</span> <a href="#narrow/stream/332168-comms/topic/Test.20issues/near/297661864">said</a>:</p>
<blockquote>
<p>About crash on startup with TCP enabled:<br>
Do you have only one enabled connection, your TCP server?</p>
</blockquote>
<p>Yes, only my TCP server.<br>
Yes, it happens all times. Both when running normal and Debug via VS2017.<br>
Debug halts at multiplexer.cpp: 247  "target_driver._Ptr was nullptr."<br>
log ends at:<br>
08:40:34.500 MESSAGE ocpn_frame.cpp:5030 OnInitTimer...4<br>
08:40:36.879 MESSAGE options.cpp:5331 options: got device count: 1</p>
<p>The only way I can get O to start after that is to disable the TCP connection in config.<br>
Config settings before that:<br>
|1;0;signalk.stupan.se;10112;0;;4800;1;0;1;;0;;3;0;1;0;1;Stupan TCP;0;|</p>
<p>New call stack</p>
<blockquote>
<blockquote>
<p>opencpn.exe!Multiplexer::HandleN0183(std::shared_ptr&lt;Nmea0183Msg const &gt; n0183_msg) Line 247    C++<br>
    opencpn.exe!Multiplexer::{ctor}::__l2::&lt;lambda&gt;(ObservedEvt ev) Line 106    C++<br>
    opencpn.exe!wxEventFunctorFunctor&lt;wxEventTypeTag&lt;ObservedEvt&gt;,void &lt;lambda&gt;(ObservedEvt) &gt;::operator()(wxEvtHandler * __formal, wxEvent &amp; event) Line 503   C++<br>
    [External Code] <br>
    [Frames below may be incorrect and/or missing, no symbols loaded for wxbase312u_vc_custom.dll]  Unknown<br>
    opencpn.exe!NotifySetupOptionsPlugin(const PlugInContainer * pic) Line 2024 C++<br>
    opencpn.exe!PlugInManager::NotifySetupOptions() Line 2039   C++<br>
    opencpn.exe!options::CreateControls() Line 5823 C++<br>
    opencpn.exe!options::options(MyFrame * parent, int id, const wxString &amp; caption, const wxPoint &amp; pos, const wxSize &amp; size, long style) Line 1600    C++<br>
    opencpn.exe!MyFrame::OnInitTimer(wxTimerEvent &amp; event) Line 5270    C++<br>
    [External Code] <br>
    opencpn.exe!WinMain(HINSTANCE__ * hInstance, HINSTANCE__ * hPrevInstance, char * __formal, int nCmdShow) Line 947   C++<br>
    [External Code]</p>
</blockquote>
</blockquote>



<a name="297727732"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/297727732" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#297727732">(Sep 08 2022 at 08:13)</a>:</h4>
<p><span class="user-mention silent" data-user-id="517002">Dave Register</span> <a href="#narrow/stream/332168-comms/topic/Test.20issues/near/297693500">said</a>:</p>
<blockquote>
<p>Corrected N0183 input filtering and Debug Window functionality.<br>
Could not reproduce any problems with setting filters...</p>
</blockquote>
<ol>
<li>Yes very good, the N0183 filter function is now working on both network; TCP  and serial; COM3. (Test cases: exclude AIVDM or receive only AIVDM)</li>
<li>I still can't change the filter settings for a serial(COM3) connection. Neither set nor clean out a filter.  See call stack below.<br>
If I though restart after the crash the filter settings are saved to config and functional.<br>
Note: On a Network, TCP, connection I can change filter settings wo problems.</li>
</ol>
<p>CommDriverN0183SerialThread.cpp:554   <strong><em>" Access violation executing location 0x535F5945."</em></strong><br>
call stack:</p>
<blockquote>
<div class="codehilite"><pre><span></span><code>  535f5945()  Unknown
[Frames below may be incorrect and/or missing]  Unknown
opencpn.exe!CommDriverN0183SerialThread::Entry() Line 554   C++
[External Code]
</code></pre></div>

</blockquote>



<a name="297729399"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/297729399" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#297729399">(Sep 08 2022 at 08:24)</a>:</h4>
<p><strong>Network stability...</strong><br>
The last changes has corrected the network stability.<br>
With an enabled TCP connection I can now disable the PC network and O's data is lost. When the wifi is again established the O TCP connection is reestablished.  <br>
Issue solved. Thanks /H</p>



<a name="297729967"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/297729967" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#297729967">(Sep 08 2022 at 08:28)</a>:</h4>
<p>Alec..<br>
The issues on top of this topic regarding windows messaging instead of log entries and when .log is saved to .log.log is now corrected and it works as normal.<br>
Thansk /H</p>



<a name="297733953"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/297733953" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#297733953">(Sep 08 2022 at 08:56)</a>:</h4>
<p>Dave...<br>
More about the "CommDriverN0183SerialThread.cpp" crash at filter changes above.<br>
I get a crash on exactly the same row (554) also when shifting from a serial N2K to a serial N0183 connection.<br>
So the filter change and connection change would run the same methods?</p>



<a name="297794529"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/297794529" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#297794529">(Sep 08 2022 at 14:32)</a>:</h4>
<p><strong>socketCAN...</strong><br>
How can I use the new checkbox in options?<br>
I've a RPi with such a connection and can use my Garmin GNSS/Heading device there. <br>
For now it's connected to SignalK via the SK MCS _N2k plugin but that can be switched off. <br>
So please advice how to use in OCPN /H</p>



<a name="297861048"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/297861048" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#297861048">(Sep 08 2022 at 20:35)</a>:</h4>
<p>Hakan...<br>
The socketCAN interface will need to be setup from the cli.  This can be automated, so not needed manually on every reboot.  I am assuming our existing socketCAN users will know this, generally.  We will document the specifics of OCPN.</p>
<p>Here are my preliminary notes, will become documentation eventually.</p>
<p>With real hardware (Waveshare RS485 CAN hat)<br>
<a href="https://www.pragmaticlinux.com/2021/10/can-communication-on-the-raspberry-pi-with-socketcan/">https://www.pragmaticlinux.com/2021/10/can-communication-on-the-raspberry-pi-with-socketcan/</a></p>
<div class="codehilite"><pre><span></span><code>  Edit /boot/config.txt
  Add the following two lines, then reboot.

  dtparam=spi=on
  dtoverlay=mcp2515-can0,oscillator=12000000,interrupt=25,spimaxfrequency=2000000

  Enable SPI Interface
  $ sudo raspi-config

  From cli:

  $ modprobe can
  $ modprobe can_raw
  $ sudo ip link set can0 type can bitrate 250000   // This number is critical for NMEA2000
  $ sudo ip link set up can0

  Test it:
  pi@raspberrypi:~ $ candump can0
  can0  0DF80501   [8]  A3 68 5D F5 EF D1 EA FD
  can0  0DF80501   [8]  A4 FF FF FF FF 03 FC 00
  can0  0DF80501   [8]  A5 B5 00 D2 01 3F F2 FF
  can0  0DF80501   [8]  A6 FF 00 FF FF FF FF FF
</code></pre></div>

<p>In OCPN settings, just enable the socketCAN interface, specify interface as Can0.<br>
   Check the logfile for problems starting the interface.</p>



<a name="297862068"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/297862068" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#297862068">(Sep 08 2022 at 20:43)</a>:</h4>
<p>I'll check tomorrow noon if I understand this. (I've some other work to do before that)<br>
One Q: Should I add a new connection and click the socketCAN checkbox in the upper left corner? See pict<br>
<a href="/user_uploads/33951/0nzPs-mpoc_eiKPEnflMvB-D/bild.png">bild.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/33951/0nzPs-mpoc_eiKPEnflMvB-D/bild.png" title="bild.png"><img src="/user_uploads/33951/0nzPs-mpoc_eiKPEnflMvB-D/bild.png"></a></div>



<a name="297864625"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/297864625" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#297864625">(Sep 08 2022 at 21:02)</a>:</h4>
<p>The modprobe and ip commands described can and should IMHO be configured once they work in manual mode described here. It's about editing a file in /etc/modprobe.d (fixes  the modprobe command) and using nmcli to  create a persistent can0 device</p>



<a name="297865155"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/297865155" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#297865155">(Sep 08 2022 at 21:06)</a>:</h4>
<p>Actually no. Since systemd, kernel modules to load are listed in ls /etc/modules-load.d. /etc/modprobe.d is not used for this purpose any more.</p>



<a name="297865383"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/297865383" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#297865383">(Sep 08 2022 at 21:08)</a>:</h4>
<p>Hakan.<br>
Yes, select socketCAN interface, and choose "can0" as source.  The logfile will show failure if the cli commands mentioned have not been issued.</p>



<a name="297865626"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/297865626" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#297865626">(Sep 08 2022 at 21:10)</a>:</h4>
<p>Alec...<br>
In production, we can edit /etc/modules-load.d (with user permission as we do with serial permissions now).  But current testers who have socketCAN hardware will know this stuff today.  Otherwise socketCAN does nothing.</p>



<a name="297901946"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/297901946" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#297901946">(Sep 09 2022 at 03:29)</a>:</h4>
<p>Hakan...<br>
Cannot reproduce problem with look-ahead mode, in either COG-up, or HDT-up.  All looks fine here with your TCP feed.</p>



<a name="297968076"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/297968076" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#297968076">(Sep 09 2022 at 13:04)</a>:</h4>
<p>Dave..<br>
<strong>Look ahead mode</strong><br>
For head up, COG/HDT, all is fine. Agree. Then the ship symbol should be situated ~1/3 screen high from bottom.<br>
In north up mode however the ship symbol should be situated with 1/3 screen width from behind the boat. All seems OK using a northerly course. But see my picture. The ship is still in the bottom screen part although heading south.<br>
<a href="/user_uploads/33951/dV5CoU4c-lqraqtOOcO1p5HQ/bild.png">bild.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/33951/dV5CoU4c-lqraqtOOcO1p5HQ/bild.png" title="bild.png"><img src="/user_uploads/33951/dV5CoU4c-lqraqtOOcO1p5HQ/bild.png"></a></div>



<a name="298040377"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/298040377" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#298040377">(Sep 09 2022 at 19:29)</a>:</h4>
<p><strong>socketCAN</strong>  Not an issue but nice test info..</p>
<p>N2K instrument is still the Garmin GNSS/HDT sensor.<br>
RPi4 (Buster):<br>
Since I already have a board with the MCP2515 CAN Bus Module the driver can0 is already present.<br>
Works like charm once socketCAN mode is selected and driver is default can0.<br>
Win:<br>
The YDNU-02 is still on N2k-bus and simultaneously used on Win OCPN</p>
<p>Now OCPN is a close to be part of the "future" game of NAV....  :)</p>



<a name="298119305"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/298119305" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#298119305">(Sep 10 2022 at 11:00)</a>:</h4>
<p><strong>Heading priority</strong><br>
When shifting from e.g. a network N0183 TCP connection to a serial N0183 connection seems the priority for heading stuck to the TCP source and wont let the heading from the serial COM3 source to be used.<br>
One disturbing factor could be the TCP source contains HDM but the COM3 use HDT?<br>
(I've tried to follow the prio logic but need more time to grasp it :))</p>



<a name="298127710"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/298127710" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#298127710">(Sep 10 2022 at 12:08)</a>:</h4>
<p><strong>Heading priority</strong>  - more info<br>
If I instead switch from a SignalK source to serial N0183 COM3 the prio logic is working as it should and heading is shown.</p>



<a name="298521655"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/298521655" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#298521655">(Sep 13 2022 at 06:33)</a>:</h4>
<p><strong>N0183 Input filtering also for plugins</strong><br>
A connection's input filter e.g. "Accept only sentences"  is reflected for O core but sentences that should have been sorted out are still sent to Pluginmanager and further on to e.g. Dashboard.<br>
Expectation: <br>
A N0183 sentenced filtered out by multiplexer would not be transfererad to plugins.</p>



<a name="298883699"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/298883699" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#298883699">(Sep 15 2022 at 00:03)</a>:</h4>
<p>"N0183 Input filtering also for plugins"<br>
Corrected in github now.</p>



<a name="298909763"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/298909763" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#298909763">(Sep 15 2022 at 06:36)</a>:</h4>
<p>"N0183 Input filtering also for plugins"<br>
Thanks. Task closed</p>



<a name="299229084"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/299229084" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#299229084">(Sep 16 2022 at 19:33)</a>:</h4>
<p>On Win present comm code.<br>
If I enable a Signal K connection it can't be switched off.<br>
I can in options disable the connection, click Apply and OK but the SK data is still flowing wo interruption until O is closed.</p>
<p>TCP and serial connections are as normal in this matter.</p>



<a name="299266516"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/299266516" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#299266516">(Sep 17 2022 at 02:43)</a>:</h4>
<p>Corrected in github now.</p>



<a name="299276635"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/299276635" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#299276635">(Sep 17 2022 at 06:15)</a>:</h4>
<p>Confirmed. Now also SK shuts down while disabled.</p>



<a name="299286822"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/299286822" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#299286822">(Sep 17 2022 at 08:21)</a>:</h4>
<p>Ship symbol heading.<br>
Something has recently happened with the ship symbol orientation.<br>
It's not following heading changes. See attached pict where the ship is not turning although HDT is changing.<br>
COG/SOG from the source (YDNU) is not changed. Still COG=--- SOG=0.<br>
If I restart O the first received HDT is directing the ship symbol but subsequent updates are not reflected.</p>
<p>Dashboard's HDT instrument values are though nicely following any change from the source.</p>
<p>The TCP feed is updating the ship but there we have valid COG/SOG all time.</p>
<p><a href="/user_uploads/33951/_FYXOOe9RfJWjUlXbXVT2zOT/bild.png">bild.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/33951/_FYXOOe9RfJWjUlXbXVT2zOT/bild.png" title="bild.png"><img src="/user_uploads/33951/_FYXOOe9RfJWjUlXbXVT2zOT/bild.png"></a></div>



<a name="299288621"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/299288621" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#299288621">(Sep 17 2022 at 08:37)</a>:</h4>
<p>Note to complete "Ship symbol heading"<br>
If I use N2K data instead of N0183 Dashboard gets no HDT</p>



<a name="299314776"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/299314776" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#299314776">(Sep 17 2022 at 12:25)</a>:</h4>
<p><span class="user-mention" data-user-id="522486">@Håkan Svensson</span>  Next step would be to add some static N2K testing. To that end, we'd  need some recorded data to replay, similar to the stuff you sent we for N0183.  That is, record the data from one or more N2K devices. Is this something you could do?</p>



<a name="299318235"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/299318235" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#299318235">(Sep 17 2022 at 12:57)</a>:</h4>
<p>For that Dave would be the expert. He has some N2K captures able to play on Linux canplayer: Vcan0.<br>
I haven't yet tested that function but may have to learn further on. Would be nice if I could include N2H data with my test server: Signalk.stupan?</p>



<a name="299320373"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/299320373" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#299320373">(Sep 17 2022 at 13:17)</a>:</h4>
<p>In any case, the first step is some recording(s)...</p>



<a name="299323665"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/299323665" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#299323665">(Sep 17 2022 at 13:44)</a>:</h4>
<p>Probably you noticed on CF I asked for some candump recordings of rich n2k data streams.  Got a couple of useful submissions.<br>
Shall I post them somewhere?  Where?</p>



<a name="299324403"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/299324403" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#299324403">(Sep 17 2022 at 13:50)</a>:</h4>
<p>Why not here? Just to attach.</p>



<a name="299326144"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/299326144" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#299326144">(Sep 17 2022 at 14:02)</a>:</h4>
<p>OK, will do. In clean new topic.</p>



<a name="299326591"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/299326591" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#299326591">(Sep 17 2022 at 14:07)</a>:</h4>
<p>Ship Symbol Heading:<br>
I do not have an n2k dump with actual moving ownship.  Always recorded at anchor.  And I'm tied to a dock, static HDT, SOG=0, so no live data either.<br>
I await your live data from this coming trip.</p>



<a name="299329360"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/299329360" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#299329360">(Sep 17 2022 at 14:29)</a>:</h4>
<p>I think my described issue is when COG=nan and SOG=0. Then HDT is updated only once at connection init. As soon COG have got a value heading is also alive. <br>
This is O core so I could try to debug if you can imaging where it happens. (My compass can be rotated to test)</p>



<a name="299359326"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/299359326" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#299359326">(Sep 17 2022 at 20:05)</a>:</h4>
<p>Can you send me a candump -L file with rotating compass?</p>



<a name="299372763"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/299372763" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#299372763">(Sep 17 2022 at 23:43)</a>:</h4>
<p>Hakan...<br>
For info: the candump file in topic "N2K Recording..." contains PGNs for Wind direction/speed.  Also HDT.  All works fine in Dashboard with your latest patch.  Thanks for the good code.</p>



<a name="299374812"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/299374812" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#299374812">(Sep 18 2022 at 00:23)</a>:</h4>
<p>Ship symbol Heading:  Corrected in github now.<br>
No need for rotating compass candump file.</p>



<a name="299441024"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/299441024" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#299441024">(Sep 18 2022 at 14:28)</a>:</h4>
<p><span class="user-mention" data-user-id="522486">@Håkan Svensson</span>  Is <a href="http://signalk.stupan.se">signalk.stupan.se</a> down, do I have a network problems, me just dumb?</p>
<div class="codehilite"><pre><span></span><code>$ nc -v signalk.stupan.se 10112
Ncat: Version 7.92 ( https://nmap.org/ncat )
Ncat: No route to host.
</code></pre></div>



<a name="299441304"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/299441304" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#299441304">(Sep 18 2022 at 14:30)</a>:</h4>
<p>Dave..<br>
Ship symbol path I'll test later on.<br>
Now in the boat after a days trip. A N2K boat close to. I'll make some "live" test. A lot instrument on board. I'll be back.</p>
<p>Alec..<br>
Yes it's down since I have the RPi server on board to use it for make a candump. So no problem on your side!</p>



<a name="299442481"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/299442481" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#299442481">(Sep 18 2022 at 14:42)</a>:</h4>
<p>OK, thanks. Any idea when it's planned to be up again?</p>



<a name="299443051"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/299443051" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#299443051">(Sep 18 2022 at 14:48)</a>:</h4>
<p>Alec..<br>
I "worst" case Wednesday eve. At least for AIS targets since that feed goes to my router at home.  All depends how the tests are working here.</p>



<a name="299444681"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/299444681" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#299444681">(Sep 18 2022 at 15:05)</a>:</h4>
<p><span class="user-mention" data-user-id="517002">@Dave Register</span> <br>
I'm in the friends boat testing.<br>
I see a short glimt of most data but got a O crash. <br>
Seems like when receiving some AIS data. Call stack  and picture below:<br>
I also saw a strange air pressure value I'll try to check. But I still can't debug Dashboard so I don't know if that's the failure.<br>
On the net for Anydesk if desired.</p>
<blockquote>
<div class="codehilite"><pre><span></span><code>  opencpn.exe!__report_gsfailure(...) Line 220    C
opencpn.exe!AisDecoder::HandleN2K_129809(std::shared_ptr&lt;Nmea2000Msg const &gt; n2k_msg) Line 684  C++
[Inline Frame] opencpn.exe!AisDecoder::InitCommListeners::__l2::&lt;lambda_8774a3ccfbb1d24e498ba41463bf9fae&gt;::operator()(ObservedEvt) Line 395 C++
opencpn.exe!wxEventFunctorFunctor&lt;wxEventTypeTag&lt;ObservedEvt&gt;,&lt;lambda_8774a3ccfbb1d24e498ba41463bf9fae&gt; &gt;::operator()(wxEvtHandler * __formal, wxEvent &amp; event) Line 502    C++
[External Code] 
[Frames below may be incorrect and/or missing, no symbols loaded for wxbase312u_vc_custom.dll]  Unknown
opencpn.exe!NotifySetupOptionsPlugin(const PlugInContainer * pic) Line 2058 C++
opencpn.exe!PlugInManager::NotifySetupOptions() Line 2073   C++
opencpn.exe!options::CreateControls() Line 5823 C++
opencpn.exe!options::options(MyFrame * parent, int id, const wxString &amp; caption, const wxPoint &amp; pos, const wxSize &amp; size, long style) Line 1600    C++
opencpn.exe!MyFrame::OnInitTimer(wxTimerEvent &amp; event) Line 5270    C++
[External Code] 
opencpn.exe!WinMain(HINSTANCE__ * hInstance, HINSTANCE__ * hPrevInstance, char * __formal, int nCmdShow) Line 946   C++
[External Code]
</code></pre></div>

</blockquote>
<p><a href="/user_uploads/33951/YrD9Ao1hjzvq-KegBmrSnJBK/bild.png">bild.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/33951/YrD9Ao1hjzvq-KegBmrSnJBK/bild.png" title="bild.png"><img src="/user_uploads/33951/YrD9Ao1hjzvq-KegBmrSnJBK/bild.png"></a></div>



<a name="299445702"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/299445702" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#299445702">(Sep 18 2022 at 15:14)</a>:</h4>
<p>The crash would not be from DB since it's not loaded in debug mode.</p>



<a name="299446680"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/299446680" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#299446680">(Sep 18 2022 at 15:24)</a>:</h4>
<p>anydesk OK now.  New address, or old still good?</p>



<a name="299446759"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/299446759" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#299446759">(Sep 18 2022 at 15:25)</a>:</h4>
<p><span class="user-mention" data-user-id="399510">@Alec Leamas</span> <br>
I can test AIS targets with socketCAN vcan replay...</p>



<a name="299446906"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/299446906" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#299446906">(Sep 18 2022 at 15:26)</a>:</h4>
<p>Please do!</p>



<a name="299451781"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/299451781" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#299451781">(Sep 18 2022 at 16:15)</a>:</h4>
<p>Building now.</p>



<a name="299452080"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/299452080" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#299452080">(Sep 18 2022 at 16:18)</a>:</h4>
<p>On branch comm-deps: AIS targets reporting just fine using vcan0 log replay.</p>



<a name="299452404"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/299452404" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#299452404">(Sep 18 2022 at 16:21)</a>:</h4>
<p>OK,  lets go. I'll merge. Keep heads down...</p>



<a name="299464410"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/299464410" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#299464410">(Sep 18 2022 at 18:28)</a>:</h4>
<p><span class="user-mention" data-user-id="517002">@Dave Register</span> <br>
Candump from the real boat attached.<br>
Rather big but I want to be sure we get Atons. They are sent by base stations but not that often.</p>
<p><a href="/user_uploads/33951/K9Zl0-JrNobgeosiCR387e0W/livetest_on_board.log">livetest_on_board.log</a></p>



<a name="299465941"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/299465941" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#299465941">(Sep 18 2022 at 18:47)</a>:</h4>
<p>Dave..<br>
True wind speed/angle:<br>
I get no N2K true wind speed/angle from the boat I'm testing.<br>
You mention your test data was funktional also for wind. Can you verify you also got true wind in Dashboard from your test capture?</p>
<p>The PGN 130306 here seems to send only "WindReference" = 2 and that's apparent wind. That's strange since the N0183 data contains also true wind (VWT).</p>



<a name="299467088"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/299467088" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#299467088">(Sep 18 2022 at 19:03)</a>:</h4>
<p>FWIW: These devices seen on the live boat (screen dump): <br>
And the YDNU reports the same, no true wind, just apparent so DB is correct :)</p>
<p><a href="/user_uploads/33951/hiGpzse8-fz1MGawuzttGs35/bild.png">bild.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/33951/hiGpzse8-fz1MGawuzttGs35/bild.png" title="bild.png"><img src="/user_uploads/33951/hiGpzse8-fz1MGawuzttGs35/bild.png"></a></div>



<a name="299485860"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/299485860" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#299485860">(Sep 19 2022 at 00:17)</a>:</h4>
<p>PGN 129041 implemented for basic functionality.  I see two ATONS from the "livetest_on_board.log" recording.<br>
In github "comm" now.</p>



<a name="299486386"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/299486386" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#299486386">(Sep 19 2022 at 00:28)</a>:</h4>
<p>PGN 130306:  I do not get anything other than "Windreference=2" on any of my logfiles.  I suppose it is up to the sensor to calculate true reference, based on other available data.  When we go to Alpha test, this will be a question for testers with full N2K instrumentation.<br>
More info:<br>
<a href="https://mt.panbo.com/2012/11/nmea-wind-data-will-this-work.html">https://mt.panbo.com/2012/11/nmea-wind-data-will-this-work.html</a></p>



<a name="299512161"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/299512161" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#299512161">(Sep 19 2022 at 07:05)</a>:</h4>
<p>True wind:<br>
Do we guess the YDNU is calculating this in N0183 mode? I doubt but values are there.<br>
So we better use our own calculation if not present in 130306. I'll have a look.</p>



<a name="299518051"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/299518051" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#299518051">(Sep 19 2022 at 07:55)</a>:</h4>
<p>"PGN 129041 implemented for basic functionality":<br>
Yes, Atons are there, very good.<br>
But still are base stations neither viewed on screen nor in the AIS target list.</p>



<a name="299519368"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/299519368" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#299519368">(Sep 19 2022 at 08:04)</a>:</h4>
<p>Dave..<br>
Win crash:<br>
In Win I again get the crash like we investigated yesterday.<br>
Investigating...</p>



<a name="299523572"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/299523572" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#299523572">(Sep 19 2022 at 08:37)</a>:</h4>
<p>Dave..<br>
If I add your temp. patches from yesterday all is fine again:</p>
<div class="codehilite"><pre><span></span><code>@@ -692,8 +692,9 @@ bool AisDecoder::HandleN2K_129794( std::shared_ptr&lt;const Nmea2000Msg&gt; n2k_msg ){
                         Beam, PosRefStbd, PosRefBow, ETAdate, ETAtime,
                         Draught, Destination, AISversion, GNSStype,
                         DTE, AISinfo) )
     {
+    Name[20] = Destination[20] = 0;
     // Is this target already in the global target list?
     //  Search the current AISTargetList for an MMSI match
     int mmsi = UserID;
     long mmsi_long = mmsi;
@@ -731,12 +732,13 @@ bool AisDecoder::HandleN2K_129809( std::shared_ptr&lt;const Nmea2000Msg&gt; n2k_msg ){

   uint8_t MessageID;
   tN2kAISRepeat Repeat;
   uint32_t UserID;
-  char Name[20];
+  char Name[21];

   if (ParseN2kPGN129809(v, MessageID, Repeat, UserID, Name))
   {
+    Name[20] = 0;
     // Is this target already in the global target list?
     //  Search the current AISTargetList for an MMSI match
     int mmsi = UserID;
     long mmsi_long = mmsi;
</code></pre></div>



<a name="299523772"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/299523772" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#299523772">(Sep 19 2022 at 08:39)</a>:</h4>
<p>(deleted)</p>



<a name="299557183"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/299557183" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#299557183">(Sep 19 2022 at 12:43)</a>:</h4>
<p>Dave..<br>
AIS own ship target.<br>
The boat I'm testing in is named "Windrus".<br>
As can be seen om the pict, and probably in the N2K capture: "Livetest on board.log"  the own ship AIS target is drawn as well. Compare to show N0183 AIVDO. This will most likely create future trouble.<br>
Have you investigated how own ship is handled in N2K AIS messages?</p>
<p><a href="/user_uploads/33951/zuAU12GTkScuJbAmIggbeaOA/bild.png">bild.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/33951/zuAU12GTkScuJbAmIggbeaOA/bild.png" title="bild.png"><img src="/user_uploads/33951/zuAU12GTkScuJbAmIggbeaOA/bild.png"></a></div>



<a name="299571483"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/299571483" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#299571483">(Sep 19 2022 at 14:07)</a>:</h4>
<p>N2K AIS: MMSI Properties not reflected<br>
When any option in MMSI properties is set, like "Ignore" or "Follower" it's not reflected.<br>
I tried to Ignore own ship's MMSI but no change.<br>
Added in ToDo list.</p>



<a name="299573063"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/299573063" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#299573063">(Sep 19 2022 at 14:16)</a>:</h4>
<p>Base stations:  We've to add decode for PGN 129793, not currently in Timo's library.   TODO....</p>



<a name="299574607"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/299574607" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#299574607">(Sep 19 2022 at 14:25)</a>:</h4>
<p>AIS ownship target:<br>
The N2K PGN 129039 does not have information to indicate "ownship", or otherwise.  So we must filter away by ownship MMSI.  So, that means we must have a settings field (somewhere?) for the user to specify ownship MMSI.<br>
Thoughts?</p>



<a name="299574747"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/299574747" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#299574747">(Sep 19 2022 at 14:26)</a>:</h4>
<p>MMSI properties:<br>
Probably not yet implemented for N2K.  TODO...</p>



<a name="299575966"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/299575966" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#299575966">(Sep 19 2022 at 14:33)</a>:</h4>
<p>Crash without string patch:<br>
Ooops.  forgot that.  In github now</p>



<a name="299588793"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/299588793" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#299588793">(Sep 19 2022 at 15:41)</a>:</h4>
<p>Base stations: OK I make a todo task.</p>
<p>Target String patch: Thought so. Easy done :)<br>
Connected to this or not:<br>
I've seen every time connected that after some 15 minutes os so all AIS targets are starting to randomly(?) disappear from the screen, shows up a short, 1 sek, glimt. Happens every second.  Randomly means some targets disappear some are left.  <br>
Another way to describe it would be: Once a target is received it's shown for 1 second and then gone. AIS target database filled up?....<br>
If I restart O all is fine another 15 minutes.<br>
Try the live-capture if you see the same. Otherwise Anydesk here?</p>



<a name="299596155"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/299596155" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#299596155">(Sep 19 2022 at 16:04)</a>:</h4>
<p>AIS ownship target:</p>
<blockquote>
<p>The N2K PGN 129039 does not have information to indicate "ownship", or otherwise. So we must filter away by ownship MMSI. So, that means we must have a settings field (somewhere?) for the user to specify ownship MMSI.<br>
Thoughts?</p>
</blockquote>
<p>Not easy.. A "ownship MMSI" could do. With more or less sophisticated user reminder... (If AIS are received from N2K and no user setting -&gt; Ask?....)  <br>
I suppose there's no N2K solution.  Also discussed on Panbo. It may be MFDs has to adapt to this in the way you suggest.<br>
Should we discuss with more frequently N2K users like Steven, Timo, Hubert???</p>



<a name="299599706"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/299599706" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#299599706">(Sep 19 2022 at 16:24)</a>:</h4>
<p>Yes, we need more discussion.  But this can be deferred for discussion during Alpha test.</p>



<a name="299599799"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/299599799" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#299599799">(Sep 19 2022 at 16:24)</a>:</h4>
<p>Agree</p>



<a name="299599874"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/299599874" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#299599874">(Sep 19 2022 at 16:24)</a>:</h4>
<p>Disappearing AIS targets:<br>
Cannot reproduce from live capture.  File ends, and targets disappear normally.<br>
Anydesk?</p>



<a name="299740063"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/299740063" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#299740063">(Sep 20 2022 at 12:37)</a>:</h4>
<p>Now finalizing N2K tests on board Vindrus. The boat owner is thanked from us. Packing my things. Heading home again. For any strange reason wind comes from ahead! :)</p>



<a name="299967293"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/299967293" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#299967293">(Sep 21 2022 at 14:32)</a>:</h4>
<p>For info is my test server ´´´signalk.stupan.se  TCP port: 10112´´´ now up and running again.</p>



<a name="299976846"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/299976846" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#299976846">(Sep 21 2022 at 15:05)</a>:</h4>
<p>Dear linux gurus:<br>
Is there a way to send candumps to another PC via wifi?<br>
something like: canplayer 192.168.1.255:10112=can0 -I name-of-the-log-file<br>
If so the text step would be to allow "socketCan" also on Win as UDP.</p>



<a name="300084695"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/300084695" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#300084695">(Sep 22 2022 at 06:28)</a>:</h4>
<p>Windows..<br>
I've seen a bug in SignalK connection to plugins/Dashboard.<br>
When O starts data is coming into O core but not to Dashboard. I need to enter Connections and re-enable to get data to Dashboard.<br>
Method to re create:</p>
<ul>
<li>
<p>In options-&gt;connection enable a SK connection. I use my server port 3000.  (No automatic discovery) Klick OK or Apply<br>
 Now all data including Dashboard are received.</p>
</li>
<li>
<p>Stop OCPN and restart.<br>
 Only O data like position and AIS targets are received, Nothing to Dashboard.</p>
</li>
<li>
<p>In options-&gt;connection disable the SK connection. Klick Apply.</p>
</li>
<li>Again enable the SK connection and klick OK or Apply<br>
Now all data including Dashboard are again received.</li>
</ul>



<a name="300085852"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/300085852" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#300085852">(Sep 22 2022 at 06:38)</a>:</h4>
<p>I don't see the same on Linux RPi</p>



<a name="300087200"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/300087200" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#300087200">(Sep 22 2022 at 06:51)</a>:</h4>
<p>Well, now I see the same also on the RPi4</p>



<a name="300087520"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/300087520" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#300087520">(Sep 22 2022 at 06:54)</a>:</h4>
<p>Linux RPi4  New behavior. O upstart take considerable longer time.<br>
When starting O there is only a black background and the spinning cursor for a looong time (10-15 s) until the normal view is shown with charts and menu icons.<br>
During the black screen the status bar is though there but wo data.</p>



<a name="300090079"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/300090079" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#300090079">(Sep 22 2022 at 07:15)</a>:</h4>
<p>And to be clear.. You've to see the effect on Dashboard instrument receiving data from SK, like wind or depth or GNSS status. Data received from O core like SOG, COG, HDT via "SetPositionFixEx()" are well received all time.</p>



<a name="300114376"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/300114376" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#300114376">(Sep 22 2022 at 10:05)</a>:</h4>
<p><strong>N2K SOG irrelevant data protection.</strong><br>
Dave..<br>
I've a couple of time seen a not valid SOG data of 613 knots ~= 1192 m/s. See pict.<br>
If I search around web other has seen the same as well.<br>
One protection would be like below. I can PR or you may have a better patch.</p>
<blockquote>
<p>@@ -449,9 +449,9 @@ bool CommBridge::HandleN2K_129026(std::shared_ptr&lt;const Nmea2000Msg&gt; n2k_msg) { <br>
   if (!m_decoder.DecodePGN129026(v, temp_data))<br>
     return false; <br>
"-"  if (!N2kIsNA(temp_data.gSog) &amp;&amp; !N2kIsNA(temp_data.gCog)){<br>
"+"  if (!N2kIsNA(temp_data.gSog) &amp;&amp; temp_data.gSog &lt; 1130 &amp;&amp; !N2kIsNA(temp_data.gCog)){</p>
</blockquote>
<p><a href="/user_uploads/33951/T4wEJSVxWu1j0MBUJ5xoGBaM/bild.png">bild.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/33951/T4wEJSVxWu1j0MBUJ5xoGBaM/bild.png" title="bild.png"><img src="/user_uploads/33951/T4wEJSVxWu1j0MBUJ5xoGBaM/bild.png"></a></div>



<a name="300115483"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/300115483" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#300115483">(Sep 22 2022 at 10:13)</a>:</h4>
<p><strong><em>velocity_watchdog is not used?</em></strong><br>
Dave..<br>
What I can see is the velocity_watchdog not counting down and also no code to "empty" gSog or gCog.<br>
So, whenever a COG and SOG is well received the last value is there also when the sensor reports "nothing" as many seems to do when ship is no longer moving.<br>
I'll make a "TODO"</p>



<a name="300163093"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/300163093" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#300163093">(Sep 22 2022 at 13:46)</a>:</h4>
<p>"Linux RPi4 New behavior. O upstart take considerable longer time."<br>
Could this be due to slow network connection to server?  What happens with no connections enabled?</p>



<a name="300209808"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/300209808" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#300209808">(Sep 22 2022 at 17:27)</a>:</h4>
<p>Slow network? If you mean network to e.g. my SK server it's the same machine. And it's the same if connected to can0 or serial port only. <br>
My imagination is this happens before any attempt to connect. The log file use 4-5 seconds from start log to "Finalize Canvases" so this new black screen may also be there before log file is opened?<br>
The last times it was a black O screen for six seconds "only" so it differs.</p>



<a name="300212640"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/300212640" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#300212640">(Sep 22 2022 at 17:42)</a>:</h4>
<p>The black screen behavior is the same wo any connections.</p>



<a name="300233842"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/300233842" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#300233842">(Sep 22 2022 at 19:46)</a>:</h4>
<p>Maybe some plugin load is slow?</p>



<a name="300287498"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/300287498" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#300287498">(Sep 23 2022 at 04:40)</a>:</h4>
<p>Black screen:  For a test I checked out to a stage a week ago. The black screen lasted for 4 seconds. And then back to recent comm and now the same about 4 seconds. All time the same settings in O. So my previous observation of very slow start up didn't showed up again. Occasional? Well... let's forget it. Thanks for listening.</p>



<a name="300328760"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/300328760" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#300328760">(Sep 23 2022 at 10:06)</a>:</h4>
<p>Dave..<br>
A Linux connection socketCAN won't disconnect when disabled. I think similar to a SK connection you corrected some week(s) ago.</p>



<a name="300427701"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/300427701" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#300427701">(Sep 23 2022 at 18:29)</a>:</h4>
<p>Dave..<br>
AIS own ship detection.<br>
Couldn't resist investigating Steven's  advice...<br>
For a test I added this:<br>
At ais_decoder: 532 if (ParseN2kPGN129039)</p>
<blockquote>
<div class="codehilite"><pre><span></span><code> if (AISTransceiverInformation == 4) {
  wxLogMessage(wxString::Format(_T(&quot; ***** AISTransceiverInformation: %d, mmsi: %d&quot;), AISTransceiverInformation, UserID));
</code></pre></div>

</blockquote>
<p>Result:  AISTransceiverInformation = 4 would indicate own ship</p>
<p>26581341 =  Vindrus = Own ship in the "liverecorder"</p>
<blockquote>
<p>20:15:13.711 MESSAGE ais_decoder.cpp:533  <strong>*</strong> AISTransceiverInformation: 4, mmsi: 265813410<br>
20:15:14.732 MESSAGE ais_decoder.cpp:533  <strong>*</strong> AISTransceiverInformation: 4, mmsi: 265813410<br>
20:15:15.744 MESSAGE ais_decoder.cpp:533  <strong>*</strong> AISTransceiverInformation: 4, mmsi: 265813410<br>
20:15:16.751 MESSAGE ais_decoder.cpp:533  <strong>*</strong> AISTransceiverInformation: 4, mmsi: 265813410<br>
20:15:17.772 MESSAGE ais_decoder.cpp:533  <strong>*</strong> AISTransceiverInformation: 4, mmsi: 265813410</p>
</blockquote>
<p>This result wo if (AISTransceiverInformation = 4)</p>
<blockquote>
<p>9:54:03.931 MESSAGE ais_decoder.cpp:534  <strong>*</strong> AISTransceiverInformation: 0, mmsi: 265797660<br>
19:54:04.231 MESSAGE ais_decoder.cpp:534  <strong>*</strong> AISTransceiverInformation: 4, mmsi: 265813410<br>
19:54:05.230 MESSAGE ais_decoder.cpp:534  <strong>*</strong> AISTransceiverInformation: 0, mmsi: 265669180<br>
19:54:06.125 MESSAGE ais_decoder.cpp:534  <strong>*</strong> AISTransceiverInformation: 4, mmsi: 265813410</p>
</blockquote>



<a name="300430988"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/300430988" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#300430988">(Sep 23 2022 at 18:50)</a>:</h4>
<p>Hakan...<br>
OK, should be an easy fix, then.  There is much to learn about PGN decoding from those smarter than us....</p>



<a name="300437040"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/300437040" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#300437040">(Sep 23 2022 at 19:27)</a>:</h4>
<p>PGN 129039 is class B. I wonder where the same info for class A lives.<br>
But it's strange with 129039  since it contains "NavStat" not applicable for class B?<br>
More to learn?</p>



<a name="300438782"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/300438782" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#300438782">(Sep 23 2022 at 19:40)</a>:</h4>
<p>Class A would be here ParseN2kPGN129794 but called: AISinfo. The same structure; 4 = own ship?</p>



<a name="300447956"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/300447956" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#300447956">(Sep 23 2022 at 20:43)</a>:</h4>
<p>Probably.  We need a Class A tester.</p>



<a name="300541368"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/300541368" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#300541368">(Sep 24 2022 at 13:55)</a>:</h4>
<p>Yes and if not available by the alpha testers I can make a trip to the workshop where I sometimes have duties. There would be a new class A device I "could test" before a possible delivery. Keep it open for a time...<br>
You may make some code for class B to test as a start? And maybe for class A as well so we can test it's not disturbing what's not own ship until own ship "filter" is tested?</p>



<a name="300594064"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/300594064" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#300594064">(Sep 25 2022 at 00:00)</a>:</h4>
<p>"You may make some code for class B to test as a start?"<br>
Done, in github now, for Class A/B</p>



<a name="300596860"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/300596860" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#300596860">(Sep 25 2022 at 00:55)</a>:</h4>
<p>"velocity_watchdog is not used?"<br>
Corrected in github now.</p>



<a name="300602043"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/300602043" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#300602043">(Sep 25 2022 at 02:46)</a>:</h4>
<p>Implemented N2K PGN 129793 (Base Station)</p>



<a name="300602071"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/300602071" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#300602071">(Sep 25 2022 at 02:47)</a>:</h4>
<p><span class="user-mention" data-user-id="399510">@Alec Leamas</span> <br>
I am ready to merge comm into master now, if you have no objections.</p>



<a name="300621548"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/300621548" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#300621548">(Sep 25 2022 at 08:37)</a>:</h4>
<p>A very short test (Not at home..)<br>
velocity WD OK.<br>
Base stations OK.</p>
<p>AIS own ship detection, class B - not working. (Class A not tested)<br>
Using "livetest_on_board.log" the own ship is still on screen.<br>
I made a debug log:</p>
<blockquote>
<p>10:22:39.333 MESSAGE ais_decoder.cpp:586  <strong>*</strong> Vindrus, 265813410: b_Ownship: 1, AISTransceiverInformation 4</p>
</blockquote>
<p>So it should have worked?? Did you get it to work?<br>
One doubt: Now is b_OwnShip true if "AISTransceiverInformation "  != 0. How are the enum 1, 2,3 used?. Maybe we should set  b_OwnShip = true only if AISTransceiverInformation = 4 (N2kaisown_information_not_broadcast)?</p>



<a name="300643759"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/300643759" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#300643759">(Sep 25 2022 at 12:21)</a>:</h4>
<p><span class="user-mention" data-user-id="517002">@Dave Register</span>   Certainly no objections, it's time.</p>



<a name="300657193"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/300657193" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#300657193">(Sep 25 2022 at 14:30)</a>:</h4>
<p>Done.<br>
Shifting to branch "master" for new work and testing.</p>



<a name="300658923"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/300658923" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#300658923">(Sep 25 2022 at 14:46)</a>:</h4>
<p>"AIS own ship detection, class B - not working. "<br>
Corrected in master.  Working too fast here. Thanks.</p>



<a name="300684166"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/300684166" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#300684166">(Sep 25 2022 at 19:29)</a>:</h4>
<p>AIS own ship detection, class B - not working:<br>
Yes, now it works fine. Thanks.<br>
I think we let the Todo task be left until class A is checked.</p>



<a name="300684540"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/300684540" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#300684540">(Sep 25 2022 at 19:35)</a>:</h4>
<p>Dave, no comments on this:</p>
<blockquote>
<p>Now is b_OwnShip true if "AISTransceiverInformation " != 0. How are the enum 1, 2,3 used?. Maybe we should set b_OwnShip = true only if AISTransceiverInformation = 4 (N2kaisown_information_not_broadcast)?</p>
</blockquote>
<p>or are you sure we will never see "AISTransceiverInformation" or "AISinfo" being 1, 2 or 3?</p>



<a name="300713936"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/300713936" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#300713936">(Sep 26 2022 at 03:45)</a>:</h4>
<p>"Maybe we should set b_OwnShip = true only if AISTransceiverInformation = 4 (N2kaisown_information_not_broadcast)?"<br>
That is what we do now.  All other values leave the b_OwnShip as false, as set when the pTargetData is created.</p>



<a name="300721628"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/300721628" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#300721628">(Sep 26 2022 at 05:50)</a>:</h4>
<p>Yes of course! Fast logical error in my head only. Apologise.</p>



<a name="300894882"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/300894882" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#300894882">(Sep 26 2022 at 20:31)</a>:</h4>
<p>AIS Alert dialog not working.<br>
Windows, TCP or SignalK connections.<br>
Although enabled in options-&gt;ships the CPA alert dialog is not working. The CPA functions is though working so CPA point, lines and red color indication of actual ship are there.</p>



<a name="300922690"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/300922690" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#300922690">(Sep 27 2022 at 00:55)</a>:</h4>
<p>" Linux connection socketCAN won't disconnect when disabled."<br>
Corrected.  You will need to delete and re-add the socketCAN connection to pick up the correction in code.</p>



<a name="300924300"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/300924300" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#300924300">(Sep 27 2022 at 01:20)</a>:</h4>
<p><span class="user-mention" data-user-id="399510">@Alec Leamas</span> <br>
Not exactly sure what we are meant to do with Class "AisInfoGui".  I do not see it instantiated anywhere.  So we get no GUI AIS alerts.<br>
???</p>



<a name="300943768"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/300943768" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#300943768">(Sep 27 2022 at 06:12)</a>:</h4>
<p>"Linux connection socketCan won't..........."<br>
Yes, now working as expected. Thanks.</p>



<a name="300945112"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/300945112" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#300945112">(Sep 27 2022 at 06:27)</a>:</h4>
<p><strong><em>Connection type SignalK does not establish signal k data to dashboard at O restart.</em></strong></p>
<p>For Win and RPi.<br>
Method to reproduce:</p>
<ol>
<li>In Options-&gt;connections enable a SignalK connection to ´´´signalk.stupan.se : 3000´´´ no automatic discovery. Click OK</li>
<li>Now all data including SK-DB are shown.</li>
<li>Close O and restart.</li>
<li>
<p>Now only DB data received from SetPositionFixEx(), POS/COG/SOG/HDT, are shown. Data from SK, via handleSKUpdate() are not shown.<br>
O core has all needed data.</p>
</li>
<li>
<p>In options-&gt;Connections disable the SK connection &gt; click Apply.</p>
</li>
<li>Enable the same SK connection &gt; Click OK. <br>
Now all DB data including those from SK are shown.</li>
</ol>
<p>Note: On RPI if connected to SK local host, that's 192.168.1.73, instead of ´´´signalk.stupan.se´´´ I could not reproduce. Could there be some kind of time related issue upon O start up missing to forward to plugins when the connection takes more time to establish, like the external network?</p>



<a name="300945995"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/300945995" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#300945995">(Sep 27 2022 at 06:36)</a>:</h4>
<p><strong><em>Velocity watchdog</em></strong><br>
No works fine. Thanks</p>



<a name="300952593"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/300952593" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#300952593">(Sep 27 2022 at 07:35)</a>:</h4>
<p>Dave..<br>
About on CF reported issues with scrap data like <a href="https://www.cruisersforum.com/forums/f134/opencpn-version-5-7-alpha-test-268872-3.html#post3684675">this</a><br>
What O version is distributed? Was it built before or after we introduced the N2kIsNA check? (commit: eb40f6c9be 2022-09-19)<br>
If after that we may introduce more data validation?</p>



<a name="300956177"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/300956177" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#300956177">(Sep 27 2022 at 08:05)</a>:</h4>
<p>PR to add more depth data validation pushed.</p>



<a name="300989081"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/300989081" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#300989081">(Sep 27 2022 at 11:56)</a>:</h4>
<p><span class="user-mention" data-user-id="517002">@Dave Register</span>  It was just one of my early sketches. Let's drop it.</p>



<a name="300995606"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/300995606" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#300995606">(Sep 27 2022 at 12:35)</a>:</h4>
<p><strong><em>Linux screen updating</em></strong><br>
On my RPi when AIS targets should be marked as lost by the  crossing line and finally disappearing nothing is visible if the screen is not updated by a mouse drag or similar. <br>
The "lost line" is not seen and the target symbols are left on screen until I change it and force a screen update.<br>
This behavior would be new. I have anyway never seen it before. <br>
This is valid both for N0183 TCP and N2K can0 data.<br>
On Win all is as normal. All targets are marked as lost and later gone in due time even without manual screen updates.</p>



<a name="301006943"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/301006943" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#301006943">(Sep 27 2022 at 13:35)</a>:</h4>
<p>"About on CF reported issues with scrap data"<br>
Do not know the details of Steve's data.  I have asked.<br>
We need more "failing" logfiles to debug the n2k library functions involved.  Do you have any failing candump files?  Can you make any from live data?<br>
Theoretically, we should not need to validate data other than N2kIsNA().  But there seems to be something wrong going on with the N2K debug library functions.</p>



<a name="301009470"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/301009470" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#301009470">(Sep 27 2022 at 13:47)</a>:</h4>
<p><span class="user-mention" data-user-id="399510">@Alec Leamas</span><br>
"Let's drop it."<br>
Umm, don't think so.  This is the class that listens for AIS Alerts, and then creates the Alert GUI dialog.  Needs to be somewhere.  Maybe a simple global, instantiated at startup?  Possibly as a singleton?</p>



<a name="301021537"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/301021537" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#301021537">(Sep 27 2022 at 14:45)</a>:</h4>
<p>Too quick... back later, must handle my yacht...</p>



<a name="301041032"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/301041032" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#301041032">(Sep 27 2022 at 15:49)</a>:</h4>
<p>"... issues with scrap data"<br>
What's in the "livetest_on_board.log" I don't know but no strange values seen when playing. If that's because all data is fine or our validation is working I don't know.<br>
I've run with my Simrad GNSS/Heading device but not seen any oddities.</p>
<p>The depth error reported on CF could theoretically come from a bad offset. Corrected in a PR.<br>
The strange true wind data could, far fetched?, come from a bug by me. Corrected in the same PR.</p>



<a name="301085058"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/301085058" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#301085058">(Sep 27 2022 at 18:27)</a>:</h4>
<p>(deleted)</p>



<a name="301137236"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/301137236" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#301137236">(Sep 28 2022 at 00:01)</a>:</h4>
<p>"I've a couple of time seen a not valid SOG data of 613 knots ~= 1192 m/s"<br>
Have you seen this lately?  On live data, or a recording?  I have not seen this in any recordings I have.<br>
This is the case that we really need to understand.  That is, N2kIsNA()  has reported "OK, valid data",  but the data are clearly wrong.<br>
Steve has also reported the same for lat/lon.  All these values come from core OCPN by plugin API, and not from N2K parsing in Dashboard.<br>
Please keep an eye out for this.</p>



<a name="301170273"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/301170273" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#301170273">(Sep 28 2022 at 07:12)</a>:</h4>
<p>The last time I saw it was before you fixed the watchdog for SOG and more. That time the bad value, &gt;600 kn, was stuck to SOG probably because all subsequent data was -1*10^9 (7) and sorted out by N2kIsNA().<br>
I assume, without evidence, these bad values comes when it goes from valid data to the NAN equality -1*10^9?<br>
Yesterday I tried to force a bad SOG by moving around with the sensor until a valid COG/SOG was received and then stay still. But during about ten minutes of that exercise nothing but relevant data was seen. I'll of course keep my eyes open to see it again.<br>
The N2kIsNA() check of AIS data was in my mind as well. Very good!</p>



<a name="301193060"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/301193060" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#301193060">(Sep 28 2022 at 09:47)</a>:</h4>
<p><strong><em>Route icons changed</em></strong><br>
This is a weird issue to nail.<br>
Sometimes, but not always, after updating O with new changes route WPs are changed. See picture.<br>
One way to reset the icons is in Options-&gt;Charts-&gt;Vector chart display change the Boundaries to Plain -&gt;Apply and back to Symbolized -&gt;OK. Then all icons in routes are reset to what's stated.  In my example Diamonds. <br>
If there's another way to reset I don't know, the way described was just a coincident.  <br>
<a href="/user_uploads/33951/Ebe6tYvotvjSI-IfJdxck17c/bild.png">bild.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/33951/Ebe6tYvotvjSI-IfJdxck17c/bild.png" title="bild.png"><img src="/user_uploads/33951/Ebe6tYvotvjSI-IfJdxck17c/bild.png"></a></div>



<a name="301215242"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/301215242" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#301215242">(Sep 28 2022 at 12:10)</a>:</h4>
<p>In Win as usual: Also icons in a temporary layer are not correct. Stated "Marks-Mooring-Float" is instead "tempsud"<br>
One file attached. (SE west coast where my server are cruising)<br>
<a href="/user_uploads/33951/Y9QTsUVLi3qGapDBFFkP8qoa/SXKs-bojar-2022_nya_bjorko.gpx">SXKs-bojar-2022_nya_bjorko.gpx</a></p>



<a name="301229425"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/301229425" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#301229425">(Sep 28 2022 at 12:55)</a>:</h4>
<p><strong><em>mmsitoname.csv is not populated</em></strong><br>
RPi receiving N2k AIS targets.<br>
If I delete mmsitoname.csv and start O a new file is created but it's not populated. See pict:</p>
<p><a href="/user_uploads/33951/leCF7XyCOFi0n5PskqybbBvE/bild.png">bild.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/33951/leCF7XyCOFi0n5PskqybbBvE/bild.png" title="bild.png"><img src="/user_uploads/33951/leCF7XyCOFi0n5PskqybbBvE/bild.png"></a></div>



<a name="301232264"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/301232264" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#301232264">(Sep 28 2022 at 13:09)</a>:</h4>
<p>More for AIS targets: Even if the ship's name is received no other data like size and destination are printed to the AIS query dialog. My test source is "livetest_on_board.log" via vcan0=can0</p>



<a name="301253911"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/301253911" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#301253911">(Sep 28 2022 at 14:52)</a>:</h4>
<p><span class="user-mention" data-user-id="522486">@Håkan Svensson</span>  You can leave the messages to me. The code seems to work, but I cannot wrap my head around how this is possible given the state reported. Need some thinking, probably ending up in just removing the log message.</p>



<a name="301257914"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/301257914" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#301257914">(Sep 28 2022 at 15:10)</a>:</h4>
<p><span class="user-mention" data-user-id="517002">@Dave Register</span> AisInfoGu.</p>
<p>This class does not need to be visible from anywhere or anyone. It just listens to events and displays user feedback. Hence, the proper solution is to instantiate it together with other classes, probably in ocpn_app.  And that's basically it.</p>
<p>If one  or two classes needs to know about it it's probably better to pass it to them in the CTOR rather than making it global. </p>
<p>We should IMHO basically not create any new global classes at all. Singletons is an option, but this should basically also be avoided except in some cases which are sort of  "well-known" instances such as the message buses and  the registry.  That is, we should think twice before creating a new singleton, and in this case I think it could and should be avoided.</p>



<a name="301278661"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/301278661" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#301278661">(Sep 28 2022 at 16:42)</a>:</h4>
<p>I predicted an answer like this.  And I agree, completely.  I'll instantiate it once in ocpn_app, never to be seen again.<br>
Thanks</p>



<a name="301278730"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/301278730" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#301278730">(Sep 28 2022 at 16:42)</a>:</h4>
<p>"You can leave the messages to me. "<br>
Which messages?</p>



<a name="301301042"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/301301042" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#301301042">(Sep 28 2022 at 18:33)</a>:</h4>
<p>Dave..<br>
The newly uploaded candump, ..Manfred.., may be worth to run.<br>
The hdt is well received. Var is -0.000100 so hdm is calculated by us since there's a Var and Var is not null/0 to let WMM do the job. The result is equalized HDT and HDM while the real VAR is 3.9° E</p>
<p>I made some debug print from comm_decoder and Dashboard:</p>
<blockquote>
<p>ParseN2kPGN127250. Heading: 3.390800 Variation: -1000000000.000000 <br>
ParseN2kPGN127250. Heading: -1000000000.000000 Variation: -0.000100 <br>
ParseN2kPGN127250. Heading: 3.393900 Variation: -1000000000.000000 <br>
pfix.Hdt: 194.456146 pfix.Hdm: nan pfix.Var: -0.005730</p>
</blockquote>



<a name="301302207"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/301302207" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#301302207">(Sep 28 2022 at 18:38)</a>:</h4>
<p>more: I also tested to validate the variation in comm_decoder:329<br>
if(!N2kIsNA(Variation))temp_data.gVar = Variation;<br>
But no difference so here N2kIsNA() is naturally not a solution? <br>
Or.. should we take care of this close to zero value (-0.000100) like we have done before.<br>
Or.. Since the sensor says a value != 0.0 we claim the instrument and not O?</p>



<a name="301305719"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/301305719" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#301305719">(Sep 28 2022 at 18:58)</a>:</h4>
<blockquote>
<p>Which messages?</p>
</blockquote>
<p>The "duplicate listener" log messages</p>



<a name="301320051"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/301320051" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#301320051">(Sep 28 2022 at 20:24)</a>:</h4>
<p>Dave..<br>
Running "candump-2022-06-28_Manfred_Part1.log"<br>
If you look at ParseN2kPGN127250 in comm_decoder you'll se the "ref" is "1" and that's "N2khr_magnetic=1"<br>
That would indicate Hdm and not Hdt? Or do I get this wrong?<br>
Btw: it's the same for livetest_on_board.log. "ref" = 1. Hmm...</p>



<a name="301354826"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/301354826" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#301354826">(Sep 29 2022 at 01:35)</a>:</h4>
<p>Hakan...<br>
On Manfred log, variation:<br>
SteveAD in CF has it correctly decoded.  The Garmin device insists that the variation is (-0.0001).  This may be an error in Garmin firmware, or maybe we must interpret variation as being "available, but not calibrated", somehow. In any event, it is a valid report.  This n2k message arrives first in the log, so it is chosen as a legitimate priority source for gVar.</p>



<a name="301355123"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/301355123" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#301355123">(Sep 29 2022 at 01:40)</a>:</h4>
<p>There is another potential source of gVar on the net.  It reports correctly "unavailable".  So the Garmin value is accepted for all further processing.<br>
I do not like to make "special cases" for devices which we do not understand well.  So I think we must accept this situation as-is, and ask the user to verify that the Garmin equipment is functioning and programmed correctly.</p>



<a name="301357314"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/301357314" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#301357314">(Sep 29 2022 at 02:14)</a>:</h4>
<p>More.<br>
Good catch on tN2kHeadingReference value.  I think you are correct, and I have corrected 129250 parsing to reflect this parameter.<br>
Did not fix the Manfred log essential problem with Garmin gVar validity, though.  HDT still same as HDM, because gVar is .0001.  I think we should not "adjust" a reported value that appears to be "N2K valid", even if we (you and I) think we know better.</p>



<a name="301359541"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/301359541" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#301359541">(Sep 29 2022 at 02:50)</a>:</h4>
<p>Alec...<br>
I was unable to easily follow our agreement regarding ais_info_gui.  There is too much tangle-up with ais_decoder, still.  So I took an easy way out, just to get the alert function testable.  Another giant FIXME, I'm afraid.</p>



<a name="301359576"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/301359576" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#301359576">(Sep 29 2022 at 02:51)</a>:</h4>
<p><span class="user-mention" data-user-id="522486">@Håkan Svensson</span> <br>
AIS Alert dialog fixed in github.</p>



<a name="301361849"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/301361849" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#301361849">(Sep 29 2022 at 03:31)</a>:</h4>
<p>Dave...<br>
N2kHeadingReference<br>
The change is working although I'm in some way doubtful. The new heading is even more misdirected.  See picture where the ship is in real parallel with the quay as the COG says.<br>
We need more data from other sources to verify this. <br>
<a href="/user_uploads/33951/7gsVmJLFqch1VKS92VuaujB-/bild.png">bild.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/33951/7gsVmJLFqch1VKS92VuaujB-/bild.png" title="bild.png"><img src="/user_uploads/33951/7gsVmJLFqch1VKS92VuaujB-/bild.png"></a></div>



<a name="301437686"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/301437686" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#301437686">(Sep 29 2022 at 13:16)</a>:</h4>
<p>I guess it seems to me that the source of HDM in the equipment has simply not been calibrated.  This needs confirmation, if possible.</p>



<a name="301443935"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/301443935" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#301443935">(Sep 29 2022 at 13:47)</a>:</h4>
<p><strong><em>AIS alert dialog</em></strong><br>
Tested on Win for serial N0183, Network TCP and SignalK connections only.<br>
The AIS alert dialog works. </p>
<ul>
<li>But sounds work only once for the first target. Subsequent alerts for other targets does not play the sound.</li>
<li>DSC alerts are not working. (It uses the same dialog.) </li>
</ul>
<p>On Rpi buster:<br>
Playing "livetest_on_board.log"  candump via vcan0.<br>
The Alert dialog works. But if I select option "play sound" O crashes, "Segmentation fault" at the alert.</p>



<a name="301447127"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/301447127" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#301447127">(Sep 29 2022 at 14:01)</a>:</h4>
<p>Corrected AIS name cache and vessel dimensions, in github now.</p>



<a name="301447928"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/301447928" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#301447928">(Sep 29 2022 at 14:04)</a>:</h4>
<p>"I guess it seems to me that the source of HDM in......"<br>
Yes, that's the simple and first hand answer. My doubts is because this boat use to be "in order".   But I can't say for sure so that's why we need to get the heading confirmed by someone who know actual status.</p>



<a name="301454977"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/301454977" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#301454977">(Sep 29 2022 at 14:36)</a>:</h4>
<p>"Corrected AIS name cache and vessel dimensions..."<br>
Tested on RPi.<br>
Yes, the name cache is now populated as well as used. Good.</p>
<p>The AIS target query now contain vessel dimensions but  are still missing data. </p>
<ul>
<li>For Class A; call sign, IMO, Vessel type, destination and ETA.  See picture for a object to test on.</li>
<li>For Class B; call sign and vessel type.</li>
<li>"Vessel type" for Atons are though there as well as in the AIS target list.</li>
</ul>
<p>From N2k:<br>
<a href="/user_uploads/33951/e0rIpn7aCJ3a_9bxX61efdKm/bild.png">bild.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/33951/e0rIpn7aCJ3a_9bxX61efdKm/bild.png" title="bild.png"><img src="/user_uploads/33951/e0rIpn7aCJ3a_9bxX61efdKm/bild.png"></a></div><p>From TCP:<br>
<a href="/user_uploads/33951/N0-ZpcALclvIW5kd-fAJydOb/bild.png">bild.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/33951/N0-ZpcALclvIW5kd-fAJydOb/bild.png" title="bild.png"><img src="/user_uploads/33951/N0-ZpcALclvIW5kd-fAJydOb/bild.png"></a></div>



<a name="301457486"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/301457486" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#301457486">(Sep 29 2022 at 14:47)</a>:</h4>
<p>"Populate more fiddly static data" seems simple enough for me to complete. I'll make a try if OK?</p>



<a name="301462103"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/301462103" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#301462103">(Sep 29 2022 at 15:07)</a>:</h4>
<p>Please do.<br>
Today, I am dealing with outer effects of Hurricane Ian.  Flooding in my area, so fussing with land stuff (car, tools), dock lines, etc.<br>
A real distraction from coding....</p>



<a name="301513683"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/301513683" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#301513683">(Sep 29 2022 at 19:13)</a>:</h4>
<p>AIS alert sound management corrected, in github now.</p>



<a name="301519063"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/301519063" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#301519063">(Sep 29 2022 at 19:47)</a>:</h4>
<p>So docks already secured? Good to see.<br>
Dave.. Alec..<br>
I need help with this (or just leave this and push the rest?)<br>
How to calculate such a date / time format?</p>
<blockquote>
<p>From ParseN2k PGN 129794<br>
    We have: uint16_t ETAdate  and  double ETAtime;<br>
    printf("ETADate: %d  EATTime; %f\n", ETAdate, ETAtime);    <br>
    Result:  Name: ADA   ETADate: 19465  EATTime; 61200.000000<br>
     Should equal: Date: April 18 Time: 17:00<br>
      or ETA_Mo = 4  ETA_Day = 18 ETA_Hr = 17  ETA_min = 00<br>
    Result2: Name: RON  ETADate: 19408  EATTime; 39420.000000<br>
    Should equal: Date: Feb 20  Time: 10:57</p>
</blockquote>



<a name="301527406"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/301527406" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#301527406">(Sep 29 2022 at 20:37)</a>:</h4>
<p>AIS alert sound..<br>
Now sounds is working on RPi. Thanks.<br>
It sounds once for every new alert. But do I remember correct if the alert sound should also be repeated for each target until "Silence Alert" or "Acknowledge"? In any case it doesn't.</p>



<a name="301553041"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/301553041" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#301553041">(Sep 30 2022 at 00:18)</a>:</h4>
<p>"But do I remember correct... "  I don't remember either.  Test and see, if you've time.<br>
Date time:  Try this...<br>
ETADate : Probably is number of days since linux epoch began, January 1, 1970.<br>
ETAtime:  Probably number of seconds since midnight.</p>
<p>Did I mention that this would all be fiddly?</p>



<a name="301611360"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/301611360" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#301611360">(Sep 30 2022 at 10:17)</a>:</h4>
<p>"fiddly"? Not important or like tedious? :)<br>
Anyhow: All are there except the date/time conversion.  I give it up a would appreciate studying your fix to this if you please?<br>
A PR with a FIXME will come.</p>



<a name="301654925"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/301654925" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#301654925">(Sep 30 2022 at 14:05)</a>:</h4>
<p>"fiddly", like "tedious fine detail".</p>



<a name="301666169"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/301666169" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#301666169">(Sep 30 2022 at 14:54)</a>:</h4>
<p><strong><em>AIS alert repeated sound</em></strong> until "Silent Alert" or "no longer CPA-alert"<br>
Dave.. Alec..<br>
The code is there but I think something has happened to "ais_info_gui.cpp": 135</p>
<p><a href="/user_uploads/33951/NeQWOmTWtGjYZlsXyQBVkown/bild.png">bild.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/33951/NeQWOmTWtGjYZlsXyQBVkown/bild.png" title="bild.png"><img src="/user_uploads/33951/NeQWOmTWtGjYZlsXyQBVkown/bild.png"></a></div>



<a name="301707590"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/301707590" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#301707590">(Sep 30 2022 at 18:17)</a>:</h4>
<p>Corrected, I think, in github now.</p>



<a name="301716326"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/301716326" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#301716326">(Sep 30 2022 at 19:06)</a>:</h4>
<p>AIS ETA DateTime:<br>
How nice coding! And correct date and time! (I know since some ships don't bother to change after I installed the device. Fisherman you know? :)) <br>
I feel excused to not get all parts of your logic from simply reading WxWidgets docs. One need some experience as well. Date, seconds + Time, seconds gives  total seconds. Clever. </p>
<p>AIS alert sound.<br>
Works fine in both Win and RPi.<br>
Thanks!</p>



<a name="301723866"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/301723866" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#301723866">(Sep 30 2022 at 19:54)</a>:</h4>
<p>Just so you know, "fiddling" with date/time logic, especially time zones, is one of the most annoying programming tasks I ever do.</p>



<a name="301928640"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/301928640" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#301928640">(Oct 02 2022 at 12:21)</a>:</h4>
<p>YDNU-N0183 HDT is not updated <br>
Win10:<br>
A test on another PC never seen the N2k - master code before. To install I successfully built a install package and used that on the other PC. No problem except first program close was hanged. Next restart wo obstacles. <br>
It works fine using serial N2k at COM3 with YDNU source.  All data are there and updated accordingly.<br>
I disabled that connection. Changed port to COM2 and restarted O.<br>
Enabled a new serial N0183 COM3 connection:<br>
All data except HDT are updated. <br>
HDT is updated once when connection is enabled, or after O restart. But it's not updated after that.<br>
If I turn the compass HDM(G) is updated but neither ship symbol nor data to Dashboard, i.e pfix.Hdt.<br>
Compare the picture where HDM is correct but not HDT even if correct received.<br>
Could it be the same HDT failure a CF post reported?<br>
<a href="/user_uploads/33951/XgbREpF9fhiZ4jpCog0sek3Q/bild.png">bild.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/33951/XgbREpF9fhiZ4jpCog0sek3Q/bild.png" title="bild.png"><img src="/user_uploads/33951/XgbREpF9fhiZ4jpCog0sek3Q/bild.png"></a></div>



<a name="301931186"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/301931186" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#301931186">(Oct 02 2022 at 12:48)</a>:</h4>
<p>I can reproduce the above on the first Win10 and also on the Linux RPi if the YDNU is N0183 connected via a USB port</p>



<a name="302016339"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/302016339" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#302016339">(Oct 03 2022 at 08:06)</a>:</h4>
<p><strong><em>Layers: Icon failures and destroyed view port</em></strong><br>
On Win10 and O-charts chart files.<br>
When loading a temporary layer the icons are not correct as mentioned before.<br>
Also is the whole chart view sometimes more or less destroyed when zooming. See pict for one example.<br>
I couldn't reproduce the destroyed view on RPi but icons are also not correct.<br>
A layer gpx-file to test on attached. <br>
<a href="/user_uploads/33951/HmZV29nTiW5iEI0A7WLNvYEV/bild.png">bild.png</a> <br>
<a href="/user_uploads/33951/E8cv3R-8EDunqFXnWbisxFK9/SXKs-bojar-2020-OT.gpx">SXKs-bojar-2020-OT.gpx</a></p>
<div class="message_inline_image"><a href="/user_uploads/33951/HmZV29nTiW5iEI0A7WLNvYEV/bild.png" title="bild.png"><img src="/user_uploads/33951/HmZV29nTiW5iEI0A7WLNvYEV/bild.png"></a></div>



<a name="302068959"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/302068959" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#302068959">(Oct 03 2022 at 13:57)</a>:</h4>
<blockquote>
<p>Could it be the GUI problem with icons and more described in Test issues has something to do with the split of "code" and GUI?</p>
</blockquote>
<p>It 's really hard to say "it could not"... Anyway, the icons are just not loaded, and I doubt the split is involved in that. That is not to say it is not possible.</p>
<p>The way to be sure is to make a bisect.</p>



<a name="302176506"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/302176506" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#302176506">(Oct 04 2022 at 01:17)</a>:</h4>
<p>Hakan...<br>
I could not reproduce the layer-icon problem on linux.  More info:</p>
<ol>
<li>Since the icon name in the GPX file is unknown to OCPN, he uses a temporary internal substitution name "tempsub".  This is done to preserve the original icon name in the database, for possible later export.</li>
<li>icon name "tempsub" is always drawn as a circle.</li>
<li>You may follow and debug the logic in "RoutePointGui::ReLoadIcon(void)"<br>
Dave</li>
</ol>



<a name="302177730"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/302177730" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#302177730">(Oct 04 2022 at 01:33)</a>:</h4>
<p>Cannot reproduce the YDNU-02 N0183 mode update problem with HDT, since I have no HDT on n2k bus.<br>
Maybe Anydesk?</p>



<a name="302198150"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/302198150" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#302198150">(Oct 04 2022 at 06:32)</a>:</h4>
<p>Layer Icons:<br>
Correct, on Linux no graphical problem as said. This was for Win 10. Seen on two of mine and a third not my PC.</p>
<ol>
<li>The icon name in the file is "Marks-Mooring-Float" also present in "C:\Program Files (x86)\OpenCPN\uidata\markicons"  respective  "/home/pi/.opencpn/iconCache" so how come O can not find it now? No problem in 5.6.2.</li>
</ol>



<a name="302208971"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/302208971" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#302208971">(Oct 04 2022 at 07:59)</a>:</h4>
<p>Layers:<br>
The Win10 graphical issue.<br>
Now I can not reproduce it! So what's the difference?<br>
For a test I installed and loaded CM93 instead of O-Charts -&gt; No graph issues!<br>
Back to O-Charts, still no issues. Hmm... <br>
Checked on the other PC -&gt; Now as normal wo graphical issues. <br>
What's the common difference? The one common activity is I did a chart database update??<br>
Thoughts?</p>



<a name="302211270"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/302211270" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#302211270">(Oct 04 2022 at 08:14)</a>:</h4>
<p>HDT serial N0183.<br>
Anydesk, of course. Pls mail a suitable time.<br>
What I can see is gHdt not updated from temp_data.gHdt due to some priority issue: comm_bridge.cpp: 611</p>



<a name="302379439"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/302379439" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#302379439">(Oct 05 2022 at 02:59)</a>:</h4>
<p>Hakan...<br>
Corrected all three issues discussed yesterday on Anydesk.<br>
Good luck.</p>



<a name="302603666"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/302603666" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#302603666">(Oct 06 2022 at 08:27)</a>:</h4>
<p>HDT issue:<br>
Works fine. If received HDT it's used. If filtering out HDT it's flawless calculated from HDM(G) and back to HDT when not filtered. Great!</p>



<a name="302604176"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/302604176" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#302604176">(Oct 06 2022 at 08:30)</a>:</h4>
<p><strong><em>Extended icons:</em></strong><br>
Now all icons are found. Normal and extended.<br>
Extended icons are though bigger than before. Some scale issue? <br>
See picture where standard icons are marked.<br>
<a href="/user_uploads/33951/_7KFk_5IH6jPSduCmKLyFznt/bild.png">bild.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/33951/_7KFk_5IH6jPSduCmKLyFznt/bild.png" title="bild.png"><img src="/user_uploads/33951/_7KFk_5IH6jPSduCmKLyFznt/bild.png"></a></div>



<a name="302608593"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/302608593" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#302608593">(Oct 06 2022 at 08:57)</a>:</h4>
<p><strong><em>Windows: Strange O hang</em></strong><br>
Not easy to describe but seems connected to scaling in some way.<br>
While creating and viewing these big extended icons and dragging/zooming around there's an occasional "unknown exception" error message. Both in runtime and debug. See pict 1. <br>
In Debug Call stack, plugins are in some way affected in a way not seen before. See pict 2<br>
When I stop the debug an exception occurs in a file: "delete_scalar_size.cpp". See pict 3 including pathway.</p>
<p>This issue can be reproduced although not in a logic repeatable and easy to describe way. </p>
<p>Pict1:<br>
<a href="/user_uploads/33951/kamU6kXONIs6YHSMPTSuPwfc/bild.png">bild.png</a> <br>
Pict2:<br>
<a href="/user_uploads/33951/fGmMYtuyopCAdLjIOo56vXSo/bild.png">bild.png</a> <br>
Pict3:<br>
<a href="/user_uploads/33951/E5nJdxm1aAhj6ralAFJP7CDj/bild.png">bild.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/33951/kamU6kXONIs6YHSMPTSuPwfc/bild.png" title="bild.png"><img src="/user_uploads/33951/kamU6kXONIs6YHSMPTSuPwfc/bild.png"></a></div><div class="message_inline_image"><a href="/user_uploads/33951/fGmMYtuyopCAdLjIOo56vXSo/bild.png" title="bild.png"><img src="/user_uploads/33951/fGmMYtuyopCAdLjIOo56vXSo/bild.png"></a></div><div class="message_inline_image"><a href="/user_uploads/33951/E5nJdxm1aAhj6ralAFJP7CDj/bild.png" title="bild.png"><img src="/user_uploads/33951/E5nJdxm1aAhj6ralAFJP7CDj/bild.png"></a></div>



<a name="302618974"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/302618974" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#302618974">(Oct 06 2022 at 10:03)</a>:</h4>
<p>scale icons:<br>
Here's another layer file where the icons grow very big: (SE west coast as usual)<br>
<a href="/user_uploads/33951/litc2Cy6-YpoUkr07Z-sKW6Z/Västkustens-Gästhamnar_Scale_500000.gpx">Västkustens-Gästhamnar_Scale_500000.gpx</a></p>



<a name="302727275"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/302727275" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#302727275">(Oct 06 2022 at 19:40)</a>:</h4>
<p>Hakan...<br>
I suspect radar_pi, something about the "trail buffer".  Is the failure ever seen without radar_pi?</p>



<a name="302729316"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/302729316" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#302729316">(Oct 06 2022 at 19:53)</a>:</h4>
<p>No, not be me or heard of. <br>
And why now when I started to test with layers? <br>
And why only when layer using these extended icons are loaded? I've not seen the issue after layers where deleted.<br>
Also notice the radar_pi error in the task list comes after O has started to deactivate plugins. Would the first exception  start to close O due to some thread failure?<br>
The size or scaling of the extended icons may be the first thing to look at? If that is corrected we may see what happens to the radar_pi?<br>
Just my fast thoughts...</p>



<a name="302729608"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/302729608" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#302729608">(Oct 06 2022 at 19:55)</a>:</h4>
<p>I will look at the scaling question.  But I cannot see how this relates to radar_pi memory model, unless layers are somehow corrupting global memory.  Are you using temp layer, or persistent?</p>



<a name="302729773"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/302729773" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#302729773">(Oct 06 2022 at 19:56)</a>:</h4>
<p>This time it was persistent.</p>



<a name="302730149"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/302730149" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#302730149">(Oct 06 2022 at 19:58)</a>:</h4>
<p>The third picture is maybe what you call "Global"</p>



<a name="302731455"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/302731455" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#302731455">(Oct 06 2022 at 20:05)</a>:</h4>
<p>Second picture has the look of heap memory corruption.  I'll investigate scaling.</p>



<a name="302795715"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/302795715" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#302795715">(Oct 07 2022 at 07:40)</a>:</h4>
<p>Dave..<br>
<strong>*Icon scaling</strong><br>
With commit: "Correct Extended Icon...." the icon size is now as it should. Better than "ever"; Some history:<br>
In O 5.6.2 The size is already not correct but not as bad as it was before this commit.<br>
In a O version I have from master in June this year the icons are bad sized as before this commit.</p>



<a name="302800035"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/302800035" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#302800035">(Oct 07 2022 at 08:14)</a>:</h4>
<p><strong><em>Windows hang and "unhandled exceptions"</em></strong><br>
This is still present while handling icons.<br>
With radar_pi enabled I can still get the hang and the unexpected close event and DeactivateAllPlugIns(). When this happens radar_pi try to free a track memory but it's not available anymore. (Deleted by O??)<br>
Without understanding all this I've a observation that may be a track to follow:<br>
When in icon's properties and change the icon symbol the general OCPN "focus" is changed. If I click OK after having changed the icon OCPN is not shown but instead a program window, like e.g. Firefox, from behind. <br>
Method to reproduce.</p>
<ul>
<li>Create a new mark.</li>
<li>Right click the new mark and enter properties.</li>
<li>Click OK without any changes.</li>
<li>Now OCPN main window is shown.</li>
<li>Right click again the new mark and enter properties.</li>
<li>Open the icon symbols drop down list</li>
<li>Select another icon - OK</li>
<li>Now last Windows program is shown instead of OCPN.</li>
</ul>
<p>Far fetched? thoughts. Could a background thread be disturbed if  the "OK" is no longer refererad to OCPN memory heap but something else....<br>
Apart from my possible confused thoughts, the icon change - OK should take me back to OCPN and not anything else. Could we start there as the first step?</p>



<a name="302810120"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/302810120" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#302810120">(Oct 07 2022 at 09:21)</a>:</h4>
<p>radar_pi <br>
BTW: the "free(m_relative_trails);" runs every two seconds (wonder why) so maybe not strange we run into this??</p>



<a name="302859748"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/302859748" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#302859748">(Oct 07 2022 at 14:07)</a>:</h4>
<p>Win10.<br>
Win hangs after about 10 to 30 minutes.<br>
Tested on two PC here. (The same reported a week ago from another user)<br>
All with persistent layer(s) loaded. (Without or with radar_pi, no difference)<br>
It hangs in a not completely way. <br>
Pointer position in status bar is still updated. DB instruments, where source is not from O core, are working. <br>
Ship updating, chart move or zoom are not working.<br>
Even if in debug mode on one PC nothing is shown there.</p>



<a name="302872294"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/302872294" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#302872294">(Oct 07 2022 at 15:01)</a>:</h4>
<p>Win hang.<br>
On one PC also Windows crashed when O GUI was hanged and I tried to close O. When O was closing and after a minute or so also Widows crashed. Some quick note about: "unexpected store hand..... "(disappeared!)  Now Windows is trying to "repair.."</p>
<p>Without layer(s) O seems to live for ever.</p>



<a name="302960386"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/302960386" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#302960386">(Oct 08 2022 at 02:46)</a>:</h4>
<p>I corrected the problem with loss of window focus on routepoint dialog close.<br>
Unfortunately, it seems to have no association with icons at all.  So likely not related to the hang/crash observed.<br>
If you can come up with a reproducible scenario for hang/crash, I think we must resort to some git bisect work to isolate the problem.<br>
Is there such a reproducible action?<br>
One question is this:  Is the problem related to Extended (svg) icons, or is it related to layers?  That is, will it fail by dropping waypoints and assigning an extended icon only?  Or does it require layer activation to fail?</p>



<a name="302968976"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/302968976" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#302968976">(Oct 08 2022 at 05:38)</a>:</h4>
<p>Window focus confirmed.  Thanks.<br>
I'll be busy from now until evening today but some points:</p>
<p>I've a O version built in July wo this hang issue. (99% reliance. Will secure)<br>
I've used isolated, not in a layer, extended WPs without any hangs yesterday.<br>
I have not yet tested a layer without extended WPs. <br>
I have one PC using English and one Swedish so language probably not related. Do you have a pure Win10 machine  to check on?</p>



<a name="303019994"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/303019994" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#303019994">(Oct 08 2022 at 13:40)</a>:</h4>
<p>Yes, I have a real Win10 laptop, which I try to keep clean for testing.</p>



<a name="303065470"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/303065470" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#303065470">(Oct 08 2022 at 21:34)</a>:</h4>
<p>Win hangs with persistent layer loaded:<br>
I did some bisects but not ready. Time for bed. <br>
I'll go on narrowing tomorrow unless you don't find a cause between commit "dedeef7bf9" and "9f8149afed"<br>
So far:</p>
<blockquote>
<p>Commit:<br>
master                      hanged  <br>
4dd2dde5d       21-sep   -  No layers shown. Neither temp nor persistent.<br>
dedeef7bf9      20-sep  hanged  <br>
9f8149afed      16-sep  works<br>
e38b2725a               10-sep  works</p>
</blockquote>



<a name="303089586"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/303089586" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#303089586">(Oct 09 2022 at 04:08)</a>:</h4>
<p>I do not see anything obviously strange in the github history between those "works" and "hangs" commits.  So please carry on with bisect.<br>
Thanks</p>



<a name="303132871"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/303132871" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#303132871">(Oct 09 2022 at 13:17)</a>:</h4>
<p>I've done my best to bisect but a great number of suspect(?) commits won't build on VS2017.<br>
Commit "145bd9823bd   navutils: Move GpxDocument to navutils_base."  is the last where layers are working.<br>
A lot changes possible touching layers starts at "42332d29  Untangle Routeman, Track, Route and Routepoint"  But I can't build to verify if the bug cause is here or any of the following 20 commits.<br>
The first that can build is "232cb5c3894  Move GarminProtocolHandler -&gt; MODEL_SRC (windows needs it)." and there are no layers shown.<br>
My bisect history attached.<br>
Since the hang in master does not create a debug break I don't know how to proceed apart from you looking into the code starting at 42332d29..<br>
Or is there a debug tool to show if there's a thread hanging or anything similar? I may lack knowledge here.</p>
<p>Possible lessons learned for future bug findings(?):  Test every commit an all system before next step.</p>
<p><a href="/user_uploads/33951/3HM32qAidhvp4cKj4SNupLLz/Bisect_layers.ods">Bisect_layers.ods</a></p>



<a name="303135347"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/303135347" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#303135347">(Oct 09 2022 at 13:45)</a>:</h4>
<p>Please describe your test environment:  Plugins, steps to reproduce, etc.  I'll play around some...</p>



<a name="303143742"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/303143742" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#303143742">(Oct 09 2022 at 15:15)</a>:</h4>
<p>I have a persistent layer loaded: "Västkustens-Gästhamnar_Scale_500000.gpx" linked  in this topic.<br>
No plugins except inbound.<br>
Some kind of active navigation e.g. my TCP server or the N2k GNSS. (Don't know if necessary but haven't' tried without.)<br>
Start O and let it run until screen updating hangs. It can to take 10 to 30 minutes. My is on hang just now but I don't know for how long. Been outside for a while.<br>
Will restart again from VS in debug this time.</p>



<a name="303145344"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/303145344" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#303145344">(Oct 09 2022 at 15:32)</a>:</h4>
<p>Just now on hang in debug mode if you want to see. Welcome</p>



<a name="303146369"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/303146369" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#303146369">(Oct 09 2022 at 15:43)</a>:</h4>
<p>BTW: I used to have o-charts running but I don't think it's crucial.</p>



<a name="303188602"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/303188602" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#303188602">(Oct 10 2022 at 02:33)</a>:</h4>
<p>Worked on this one.  Definitely the commit "Untangle Routeman, Track, Route and Routepoint." is the problem.  I found that memory used by OCPN is continually increasing when a persistent layer is shown.  Hide the layer, and memory stabilizes.  When/if the memory use gets too high, OCPN becomes unresponsive.<br>
The problem must be with icon loading.  I am tracking this down now, I hope.</p>



<a name="303191845"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/303191845" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#303191845">(Oct 10 2022 at 03:35)</a>:</h4>
<p>Found it.  There was a serious memory leak on display of any RoutePoint, but especially when the point contains a name which is displayed. This is common on layers.  I think that OCPN It would eventually fail without any layer loaded, or name display disabled, just probably take much longer.<br>
Fixed in github master now.<br>
Thanks so much for narrowing down the problem.  I know that bisect process looking for a "soft" failure is quite tedious.</p>



<a name="303191948"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/303191948" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#303191948">(Oct 10 2022 at 03:37)</a>:</h4>
<p>We need to exercise changing RoutePoint icons, icon scaling by options-&gt;User interface, etc.<br>
Also text color/size changes for RoutePoints in layers.</p>



<a name="303234522"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/303234522" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#303234522">(Oct 10 2022 at 10:33)</a>:</h4>
<p>Yes, now I see the increasing memory use. I should probably have checked this before.<br>
With your correction it's gone.  Very good.<br>
Just out of curiosity: Why is this, as it seems, general change  affecting Windows only and not Linux. On a RPi I don't see the leak although using the same layers? The RoutePointGui(RoutePoint&amp; point) : m_point(point) is used there as well I suppose, even if OpenGL is not used.</p>



<a name="303240475"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/303240475" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#303240475">(Oct 10 2022 at 11:20)</a>:</h4>
<p>This is a very good question. </p>
<p>I don't know the exact answer. However, I'm very suspicious about code snippets like this in <em>routeman.cpp</em> around line 1120, indirectly called from <code>ReLoadIcon()</code>:</p>
<div class="codehilite"><pre><span></span><code>    else {
      if (pmi-&gt;iconImage.IsOk()) {
        pmi-&gt;piconBitmap = new wxBitmap(pmi-&gt;iconImage);
        pret = pmi-&gt;piconBitmap;
      }
</code></pre></div>
<p>wxBitmap is ref counted, so making <code>new wxBitmap()</code> is  basically a bug, as is storing wxBitmap* pointers -- the type is designed to use value semantics.</p>
<p>This would not be the first  time we have a memory bug related to raw pointers which IMHO basically always should be considered a bug  except when creating widgets and such which are handled by wxWidgets.</p>



<a name="303241264"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/303241264" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#303241264">(Oct 10 2022 at 11:26)</a>:</h4>
<p>Yes, opencpn is littered with <code>new wxBitmap(...)</code>. It doesn't matter, it's still a bug IMHO</p>



<a name="303242875"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/303242875" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#303242875">(Oct 10 2022 at 11:38)</a>:</h4>
<p>Dave..<br>
Marks exercise..<br>
Changing marks font style and color does also affect marks in layers. So far no obstacle seen when I change these.<br>
How to change icons scaling? Neither User interface- nor Chart object -scale factor has any impact to layer icons.</p>



<a name="303260575"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/303260575" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#303260575">(Oct 10 2022 at 13:30)</a>:</h4>
<p>"How to change icons scaling? Neither User interface- nor Chart object -scale factor has any impact to layer icons."<br>
That must be a bug.  I will investigate.</p>



<a name="303261468"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/303261468" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#303261468">(Oct 10 2022 at 13:36)</a>:</h4>
<p>"raw pointers which IMHO basically always should be considered a bug"<br>
Beg to differ, softly.  "new" is a language feature, so it is not a bug to use it as intended.  In c/c++, it is the responsibility of the designer  to manage object lifetimes, which is of course one of c/c++ least attractive features.  Failure to manage those lifetimes is truly a bug.<br>
I agree that wxBitmap use should generally be by value semantics.</p>



<a name="303262170"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/303262170" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#303262170">(Oct 10 2022 at 13:40)</a>:</h4>
<p>"Why is this, as it seems, general change affecting Windows only and not Linux"<br>
I can see a memory leak on linux, using simple "htop" monitor..  The leak seems slower, maybe since the leakage involves OpenGL, so system implementation dependancy.</p>



<a name="303262792"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/303262792" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#303262792">(Oct 10 2022 at 13:44)</a>:</h4>
<p><span class="user-mention" data-user-id="517002">@Dave Register</span> valgrind is the tool to use in cases like this. But I  don't have the test setup.</p>



<a name="303264680"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/303264680" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#303264680">(Oct 10 2022 at 13:55)</a>:</h4>
<p>I was just about to fire up valgrind, but reading the code and some simple printfs led me to the problem much quicker.<br>
I usually run valgrind on OCPN late in the Beta cycle, just as a check on all that object lifetime exposure.</p>



<a name="303266257"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/303266257" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#303266257">(Oct 10 2022 at 14:03)</a>:</h4>
<p>Alec...<br>
Have you noticed that full rebuild of OCPN on gcc is much, much slower than Windows (VS2022)?<br>
I find that a big bisect session is very much faster on Windows than on linux.  One of the rare times I use Windows for real work...</p>



<a name="303270041"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/303270041" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#303270041">(Oct 10 2022 at 14:25)</a>:</h4>
<p><span class="user-mention" data-user-id="517002">@Dave Register</span>  My speed comparisons are not fair, my Windows host is a VM with limited resources (CPUs, memory). And I'm just on VS2019. So I don't see this.</p>



<a name="304299219"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/304299219" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#304299219">(Oct 16 2022 at 11:50)</a>:</h4>
<p><strong><em>Removed connection is not deactivated</em></strong><br>
Method to reproduce:</p>
<ul>
<li>Establish some incoming N0183 stream</li>
<li>Create a Network connection UDP any port</li>
<li>Set the connection no input and to output. Apply</li>
<li>Check NMEA Debug window and see the data flowing out</li>
<li>Remove the newly created UDP connection.  - Apply</li>
<li>The data output is still flowing. </li>
<li>Expected behavior would be the output is disabled before deletion.</li>
<li>Create again the same UDP connection - Apply </li>
<li>Disable the new connection. Now the stream is no longer in Debug window.</li>
<li>Remove the new connection.</li>
</ul>



<a name="304299953"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/304299953" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#304299953">(Oct 16 2022 at 11:58)</a>:</h4>
<p><strong><em>N0183 output via a serial port is not show in NMEA debug window.</em></strong><br>
If I activate a route, so the route consol window is shown, the outgoing data stream is not shown in NMEA Debug window.<br>
Now I can detect in another program the data is actually transmitted according to the filter on a COM port set to output AP-data (ECxxx)<br>
So, outgoing data to a serial COM port is flowing although not visible in the NMEA Debug window.<br>
The same is valid for a network UDP/TCP connection</p>



<a name="304366601"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/304366601" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#304366601">(Oct 17 2022 at 01:30)</a>:</h4>
<p>"Removed connection is not deactivated"<br>
Corrected in github master now.</p>



<a name="304389417"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/304389417" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#304389417">(Oct 17 2022 at 06:31)</a>:</h4>
<p>Works, thanks. (Sorry to force a fixme item :) )</p>



<a name="304626407"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/304626407" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#304626407">(Oct 18 2022 at 07:45)</a>:</h4>
<p>I'm really impressed of all work you do now. If I understand it correct the new way to "announce" received desired data instead of all are constantly searching for "is there anything for me" would increase OCPN performance.<br>
I'll try  also the latest commits as soon it builds for Win. I of course receive the same errors as Appveyor.</p>
<p>In Debian RPi no position/voyage/GNSS is received neither by TCP/SignalK nor can0.<br>
AIS decoder works fine though.</p>



<a name="304888106"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/304888106" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#304888106">(Oct 19 2022 at 06:34)</a>:</h4>
<p>Win10: <br>
Tested TCP and SignalK connections only. I'm not at home so no N2k available.<br>
Dashboard seems OK.<br>
AIS decoder works.<br>
No Nav-data like Pos/Voyage/GNSS to OCPN core are working.</p>



<a name="304896214"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/304896214" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#304896214">(Oct 19 2022 at 07:42)</a>:</h4>
<p>The above is valid for Linux/Rpi as well.<br>
No visible POS/COG/SOG/GNSS in core O. <br>
The (grey) ship symbol is though correct positioned and moving on all system.</p>



<a name="304934912"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/304934912" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Dickey <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#304934912">(Oct 19 2022 at 11:48)</a>:</h4>
<p><span class="user-mention silent" data-user-id="522486">Håkan Svensson</span> <a href="#narrow/stream/332168-comms/topic/Test.20issues/near/304896214">said</a>:</p>
<blockquote>
<p>The above is valid for Linux/Rpi as well.<br>
No visible POS/COG/SOG/GNSS in core O. <br>
The (grey) ship symbol is though correct positioned and moving on all system.</p>
</blockquote>
<p>I can confirm.  Something even worse happens in Windows for me (using wxWidgets 3.3 latest master).  The chart canvas does not repaint at all.  Also, the dashboard gadgets flash continuously as if being constantly erased and redrawn.<br>
On Linux RPi the chart appears and the ship moves but stays black with no nav info in status bar at all and dashboard works normally.</p>



<a name="304935700"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/304935700" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#304935700">(Oct 19 2022 at 11:53)</a>:</h4>
<p>FWIW, it's actually the same as Rpi for me on an unsupported native Fedora build</p>



<a name="304938908"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/304938908" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#304938908">(Oct 19 2022 at 12:13)</a>:</h4>
<p>Later I will try to spin up a F37 host (late beta) which has moved to wxW 3.2</p>



<a name="305062180"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/305062180" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Dickey <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#305062180">(Oct 20 2022 at 00:21)</a>:</h4>
<p><span class="user-mention silent" data-user-id="399510">Alec Leamas</span> <a href="#narrow/stream/332168-comms/topic/Test.20issues/near/304935700">said</a>:</p>
<blockquote>
<p>FWIW, it's actually the same as Rpi for me on an unsupported native Fedora build</p>
</blockquote>
<p>I rolled wxWidgets back to V3.2.0-rc2 and now the chart surface looks normal except for the aforementioned nav data making it to the core.  So I conclude the lastest wx master has some bugs.</p>



<a name="305063605"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/305063605" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#305063605">(Oct 20 2022 at 00:43)</a>:</h4>
<p><span class="user-mention" data-user-id="399510">@Alec Leamas</span> <br>
"FWIW, it's actually the same as Rpi for me"<br>
The problem here is that AppMsgBus seems dead.  Using n0183 serial data,</p>
<p>the listener is configured thusly in ocpn_frame.cpp</p>
<div class="codehilite"><pre><span></span><code>  auto &amp;msgbus = AppMsgBus::GetInstance();

  //  BasicNavData
  AppMsg msg_basic(AppMsg::Type::BasicNavData);
  listener_basic_navdata.Listen(msg_basic.name, this, EVT_BASIC_NAV_DATA);

  Bind(EVT_BASIC_NAV_DATA, [&amp;](ObservedEvt ev) {
    auto ptr = ev.GetSharedPtr();
    auto basicnav_msg = std::static_pointer_cast&lt;const BasicNavDataMsg&gt;(ptr);
    HandleBasicNavMsg( basicnav_msg );
  });
</code></pre></div>

<p>And messages are being sent in comm_bridge.cpp</p>
<div class="codehilite"><pre><span></span><code>  // Populate a comm_appmsg with current global values
  auto msg = std::make_shared&lt;BasicNavDataMsg&gt;(
      gLat, gLon, gSog, gCog, gVar, gHdt, wxDateTime::Now().GetTicks());

  // Notify the AppMsgBus of new data available
  auto&amp; msgbus = AppMsgBus::GetInstance();
  msgbus.Notify(std::move(msg));
</code></pre></div>

<p>But the lambda in ocpn_frame.cpp never gets hit.</p>
<p>???</p>



<a name="305099841"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/305099841" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#305099841">(Oct 20 2022 at 08:13)</a>:</h4>
<p>I'll have a look, later. Travellng now.</p>



<a name="305212959"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/305212959" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#305212959">(Oct 20 2022 at 18:31)</a>:</h4>
<p><span class="user-mention" data-user-id="517002">@Dave Register</span>  Mystified. First of all, when I build current master the ship is green, using Håkan's server.</p>
<p>But still, as you say say, the lambda on ocpn_frame.cpp:5401 is not reached. But this is not strange, since the code posting the event in comm_bridge.cpp:410 isnt reached either.</p>
<p>So: nothing is sent (strange), nothing is received(not strange), everything seems to work (really strange). Digging further.</p>



<a name="305218185"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/305218185" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#305218185">(Oct 20 2022 at 19:01)</a>:</h4>
<p>OK, I have it: I can see the message being sent but not received.</p>



<a name="305220216"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/305220216" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#305220216">(Oct 20 2022 at 19:12)</a>:</h4>
<p><span class="user-mention" data-user-id="517002">@Dave Register</span>  One problem is that the listener uses the wrong key. For now, this is fixed by this patch:</p>
<div class="codehilite"><pre><span></span><code>--- a/src/ocpn_frame.cpp
+++ b/src/ocpn_frame.cpp
@@ -5395,7 +5395,7 @@ void MyFrame::InitAppMsgBusListener() {

   //  BasicNavData
   AppMsg msg_basic(AppMsg::Type::BasicNavData);
-  listener_basic_navdata.Listen(msg_basic.name, this, EVT_BASIC_NAV_DATA);
+  listener_basic_navdata.Listen(msg_basic.key(), this, EVT_BASIC_NAV_DATA);
</code></pre></div>
<p>However, this is not the first time the keys has caused problems and probably not the  last. I have a change in observable in my head which should resolve this. For now, just apply this patch.</p>



<a name="305237246"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/305237246" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#305237246">(Oct 20 2022 at 21:01)</a>:</h4>
<blockquote>
<p>The problem here is that AppMsgBus seems dead</p>
</blockquote>
<p>The truth is that there is no AppMsgBus, everything is messages sent through the same observable framework. Which has no idea what so ever if a message belongs to any "bus".</p>
<p>That said, I think the navmsg_bus and appmsg_bus are useful abstractions which makes things somewhat more clear when we want to describe it. My  point is just that when a message fails, there is no bus involved, it's just the message and observable.</p>



<a name="305251060"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/305251060" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#305251060">(Oct 20 2022 at 22:50)</a>:</h4>
<p>Filed <a href="https://github.com/OpenCPN/OpenCPN/pull/2794">https://github.com/OpenCPN/OpenCPN/pull/2794</a> which removes the need to specify a key when doing Listen() and friends. Should  avoid these kind of errors in the future.</p>



<a name="305266124"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/305266124" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#305266124">(Oct 21 2022 at 01:10)</a>:</h4>
<p>Latest PR (2794) merged, looks good.<br>
Thanks</p>



<a name="305267592"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/305267592" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#305267592">(Oct 21 2022 at 01:17)</a>:</h4>
<p>Now  data are again flowing into OCPN. But when connection is disabled no watchdog s cleaning it out. So last received data including a red ship symbol is still present after disconnect.</p>



<a name="305304242"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/305304242" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#305304242">(Oct 21 2022 at 08:37)</a>:</h4>
<p>Master code as of today. Win10:<br>
It has happened a couple of times when starting O it crashes at once.<br>
While debug I get the exception: see picture.<br>
Call stack beolw.<br>
<a href="/user_uploads/33951/UUjmEeFIDWrONkA2P_5jvcaO/bild.png">bild.png</a> </p>
<div class="message_inline_image"><a href="/user_uploads/33951/UUjmEeFIDWrONkA2P_5jvcaO/bild.png" title="bild.png"><img src="/user_uploads/33951/UUjmEeFIDWrONkA2P_5jvcaO/bild.png"></a></div><blockquote>
<p>opencpn.exe!pugi::xml_writer_file::write(const void * data, unsigned int size) Line 4910    C++<br>
    [Inline Frame] opencpn.exe!pugi::impl::<code>anonymous-namespace'::xml_buffered_writer::flush(const char * size, unsigned int) Line 3641 C++
    opencpn.exe!pugi::impl::</code>anonymous namespace'::xml_buffered_writer::flush() Line 3634   C++<br>
    opencpn.exe!pugi::impl::<code>anonymous namespace'::xml_buffered_writer::write_direct(const char * data, unsigned int length) Line 3659  C++
    [Inline Frame] opencpn.exe!pugi::impl::</code>anonymous-namespace'::xml_buffered_writer::write_buffer(const char * length, unsigned int) Line 3697    C++<br>
    opencpn.exe!pugi::impl::<code>anonymous namespace'::text_output_escaped(pugi::impl::</code>anonymous-namespace'::xml_buffered_writer &amp; writer, const char * s, pugi::impl::<code>anonymous-namespace'::chartypex_t type) Line 3822  C++
    opencpn.exe!pugi::impl::</code>anonymous namespace'::text_output(pugi::impl::<code>anonymous-namespace'::xml_buffered_writer &amp; writer, const char * s, pugi::impl::</code>anonymous-namespace'::chartypex_t type, unsigned int flags) Line 3858  C++<br>
    opencpn.exe!pugi::impl::<code>anonymous namespace'::node_output_simple(pugi::impl::</code>anonymous-namespace'::xml_buffered_writer &amp; writer, pugi::xml_node_struct * node, unsigned int flags) Line 4051  C++<br>
    opencpn.exe!pugi::impl::<code>anonymous namespace'::node_output(pugi::impl::</code>anonymous-namespace'::xml_buffered_writer &amp; writer, pugi::xml_node_struct * root, const char * indent, unsigned int flags, unsigned int depth) Line 4122    C++<br>
    opencpn.exe!pugi::xml_node::print(pugi::xml_writer &amp; writer, const char * indent, unsigned int flags, pugi::xml_encoding encoding, unsigned int depth) Line 6055    C++<br>
    opencpn.exe!NavObjectChanges::AddRoute(Route * pr, const char * action) Line 1527   C++<br>
    opencpn.exe!NavObjectChanges::DeleteConfigRoute(Route * pr) Line 1728   C++<br>
    opencpn.exe!Routeman::DeleteRoute(Route * pRoute) Line 776  C++<br>
    opencpn.exe!UpdateRouteA(Route * pTentRoute, NavObjectCollection1 * navobj) Line 1200   C++<br>
    opencpn.exe!NavObjectChanges::ApplyChanges() Line 1654  C++<br>
    opencpn.exe!MyConfig::LoadNavObjects() Line 1700    C++<br>
    opencpn.exe!MyFrame::OnInitTimer(wxTimerEvent &amp; event) Line 5144    C++<br>
    [External Code] <br>
    [Frames below may be incorrect and/or missing, no symbols loaded for wxbase312u_vc_custom.dll]  Unknown<br>
    opencpn.exe!WinMain(HINSTANCE__ * hInstance, HINSTANCE__ * hPrevInstance, char * __formal, int nCmdShow) Line 950   C++<br>
    [External Code]</p>
</blockquote>



<a name="305465423"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/305465423" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#305465423">(Oct 22 2022 at 00:11)</a>:</h4>
<p>"no watchdog s cleaning it out"<br>
Corrected in github now.</p>



<a name="305468546"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/305468546" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#305468546">(Oct 22 2022 at 00:53)</a>:</h4>
<p>Corrected occasional crash on startup, <a href="https://github.com/OpenCPN/OpenCPN/commit/76c6b8b95485fd0ad34993388dae04aa22a3aad5">https://github.com/OpenCPN/OpenCPN/commit/76c6b8b95485fd0ad34993388dae04aa22a3aad5</a><br>
Problem duplicated (before fix) as:</p>
<ol>
<li>Start O, create a route.</li>
<li>Restart O</li>
<li>Change the route in (1), e.g. move a waypoint.</li>
<li>Cause O to crash (alt-f12 will do it)</li>
<li>O will crash on next start, while applying uncommitted object changes from the "changes" file.<br>
I am not too happy with my fix.  The refactor of navobj database methods left an exposure in application of "changes" file after a crash.  I could not follow the logic cleanly (mixed singleton and temp object instantiation of class "NavObjectChanges"), so I fixed the problem symptom another way.  It works, but...<br>
Alec?</li>
</ol>



<a name="305486844"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/305486844" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#305486844">(Oct 22 2022 at 06:02)</a>:</h4>
<p>Dave..</p>
<ul>
<li>Watchdog fix confirmed. </li>
<li>Thanks for the RPi OpenGl fix also reported here. So it was a bug and not intentional! </li>
<li>The occasional crash I can't reproduce now. Not bad you manage to find the cause and effect. Now when described I can agree that's what may have happened.</li>
</ul>



<a name="305527862"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/305527862" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#305527862">(Oct 22 2022 at 12:20)</a>:</h4>
<p><span class="user-mention" data-user-id="517002">@Dave Register</span> </p>
<blockquote>
<p>Corrected occasional crash on startup</p>
</blockquote>
<p>Will have a look later this weekend</p>
<blockquote>
<p>mixed singleton and temp object instantiation of class "NavObjectChanges"</p>
</blockquote>
<p>hmpf... smells bad.</p>



<a name="305685532"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/305685532" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#305685532">(Oct 23 2022 at 17:15)</a>:</h4>
<p>Ale,,<br>
The "bad smell" may be  real. I still sometimes receive the exception.</p>



<a name="305697670"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/305697670" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#305697670">(Oct 23 2022 at 19:16)</a>:</h4>
<p>Running out of time now. Tomorrow... Assuming the same test case.</p>



<a name="306328334"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/306328334" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#306328334">(Oct 26 2022 at 20:51)</a>:</h4>
<p><span class="user-mention" data-user-id="522486">@Håkan Svensson</span>  I have pushed a new branch <em>navobj</em> . This contains a what I think better patch for the "crash after modifying route" problem (the existing patch is reverted). Could you possibly test it a little more?</p>



<a name="306333428"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/306333428" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#306333428">(Oct 26 2022 at 21:10)</a>:</h4>
<p><span class="user-mention" data-user-id="518981">@Github Bot</span>  #10e788f5c</p>



<a name="306333435"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/306333435" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Github Bot <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#306333435">(Oct 26 2022 at 21:10)</a>:</h4>
<p>** author: Alec Leamas at 2022-10-26T20:46:02Z<br>
routeman: Use actual NavObjectChanges instance.</p>
<p>The assumption that there is only one NavObjectChanges instance, as<br>
returned by NavObjectChanges::getInstance() is not completely true,<br>
during initial setup there is a temporary instance.</p>
<p>Add a NavObjectChanges parameter to methods updating the database<br>
so the correct instance can be used.</p>
<p>The basic problem here is that NavObjectChanges calls methods on<br>
Routeman. The latter is an object above the database, so this call<br>
should really be replaced by a signal or so to untangle the<br>
spaghetti.<br>
<a href="https://github.com/OpenCPN/OpenCPN/commit/10e788f5c">https://github.com/OpenCPN/OpenCPN/commit/10e788f5c</a></p>



<a name="306364175"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/306364175" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#306364175">(Oct 27 2022 at 02:39)</a>:</h4>
<p>I guess your patch is not so much prettier than my earlier fix.  But all that can be done, wading in the spaghetti.  I understand the layer problem.</p>



<a name="306398177"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/306398177" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#306398177">(Oct 27 2022 at 08:23)</a>:</h4>
<blockquote>
<p>I guess your patch is not so much prettier than my earlier fix.</p>
</blockquote>
<p>There are some differences. For a starter, let's see if Håkan is happy with the new patch, he seemed to have some problems (crashes) with the old .</p>
<blockquote>
<p>I understand the layer problem.</p>
</blockquote>
<p>There are actually two problems: That NavObjectChanges calls (i. e, depends on) Routeman, and that Routeman  in this case contains code which belongs to RoutemanGui. The latter  could probably be fixed using a callback.</p>
<p><span class="user-mention" data-user-id="522486">@Håkan Svensson</span> : I  have rebased the <em>navobj</em> branch on top of current master.</p>



<a name="306403496"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/306403496" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#306403496">(Oct 27 2022 at 08:57)</a>:</h4>
<p><span class="user-mention" data-user-id="399510">@Alec Leamas</span> I'm on a boat working during the day- Let's see later on...</p>



<a name="306403643"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/306403643" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#306403643">(Oct 27 2022 at 08:58)</a>:</h4>
<p>OK. I'll keep the branch rebased.</p>



<a name="306489281"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/306489281" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#306489281">(Oct 27 2022 at 16:34)</a>:</h4>
<p><span class="user-mention" data-user-id="399510">@Alec Leamas</span> Now home. Long day so today only some quick Data sharing comments. Tomorrow work at the same boat. It's hard being retired :)</p>



<a name="307818530"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/307818530" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#307818530">(Nov 03 2022 at 19:09)</a>:</h4>
<p>AIS targets not deleted when timed out.<br>
A strange effect introduced, I think, last week.<br>
Targets timed out are still visible on screen maybe due to some effect in AIS targets list. Such a timed out target is not sensible for "mouse over" or right menu click to show target query.<br>
It's though still listed in AIS Targets list and from there can the target query be opened. As I did for the attached picture where the target was last updated 18 minutes ago while the time out is 8 minutes. <br>
<a href="/user_uploads/33951/MSyaRt22r3s2FLaFJVlKFaFD/bild.png">bild.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/33951/MSyaRt22r3s2FLaFJVlKFaFD/bild.png" title="bild.png"><img src="/user_uploads/33951/MSyaRt22r3s2FLaFJVlKFaFD/bild.png"></a></div>



<a name="307821496"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/307821496" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Dickey <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#307821496">(Nov 03 2022 at 19:25)</a>:</h4>
<p><span class="user-mention silent" data-user-id="522486">Håkan Svensson</span> <a href="#narrow/stream/332168-comms/topic/Test.20issues/near/307818530">said</a>:</p>
<blockquote>
<p>AIS targets not deleted when timed out.</p>
</blockquote>
<p>I'm looking at this code now.  It has a couple other minor problems.  I'll take the action to debug this and report back what I find.</p>



<a name="308141548"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/308141548" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Dickey <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#308141548">(Nov 05 2022 at 13:33)</a>:</h4>
<p><span class="user-mention silent" data-user-id="522486">Håkan Svensson</span> <a href="#narrow/stream/332168-comms/topic/Test.20issues/near/307818530">said</a>:</p>
<blockquote>
<p>AIS targets not deleted when timed out.</p>
</blockquote>
<p>Targets are not deleted when they first time out.  They are only deleted when 3X the timeout length has passed.  I think if you wait a bit longer, they should go away.  I tested it, with the patch I submitted yesterday, and it works as designed.</p>



<a name="308159043"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/308159043" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#308159043">(Nov 05 2022 at 15:47)</a>:</h4>
<p>From another point of view: this is about combining two well established practices : bluetooth type pairing and the API key commonly used to control access to REST API:s.</p>
<p>In the latter case, the keys I have encountered has always been 20 - 40 hexadecimal characters. I f we should go for something else, I guess we should have good reasons. Have we?</p>



<a name="308181580"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/308181580" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#308181580">(Nov 05 2022 at 19:55)</a>:</h4>
<p>Not really.  If we are going to obfuscate, might as well use a long string.</p>



<a name="308963005"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/308963005" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#308963005">(Nov 10 2022 at 10:54)</a>:</h4>
<p><strong>WP Icons are (again) over sized.</strong><br>
Today's master branch. <br>
WP properties Icon list has icons of different size.<br>
In my example below is "Diamond" selected.  <br>
From "C:\Builds\OCPN\OpenCPN\data\svg\markicons" is another icon "1st-Diamond.svg" That one is scaled normally.<br>
So from where is the icon: "Diamond" and why are these not properly scaled?<br>
<a href="/user_uploads/33951/ToNJx0j-wb0hUfXCcKUApe6E/bild.png">bild.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/33951/ToNJx0j-wb0hUfXCcKUApe6E/bild.png" title="bild.png"><img src="/user_uploads/33951/ToNJx0j-wb0hUfXCcKUApe6E/bild.png"></a></div>



<a name="308964450"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/308964450" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#308964450">(Nov 10 2022 at 11:04)</a>:</h4>
<p><strong>Rollover text scaling from today's master</strong><br>
The most "rollover" has got very small font scaled size. <br>
My settings are not changed but text fonts are only half or 1/3 the size from before.  The yellow background is sized as before though.<br>
<a href="/user_uploads/33951/YU0yNSnEd658XWiyUJ-YSkX2/bild.png">bild.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/33951/YU0yNSnEd658XWiyUJ-YSkX2/bild.png" title="bild.png"><img src="/user_uploads/33951/YU0yNSnEd658XWiyUJ-YSkX2/bild.png"></a></div>



<a name="309061742"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/309061742" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#309061742">(Nov 10 2022 at 19:25)</a>:</h4>
<p>More scaling issues.<br>
Plugin icons in Options-&gt;Plugins has grown. Strange things happens last days??</p>



<a name="309355505"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/309355505" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#309355505">(Nov 12 2022 at 15:32)</a>:</h4>
<p><span class="user-mention" data-user-id="522729">@Dan Dickey</span> </p>
<blockquote>
<p>Targets are not deleted when they first time out. They are only deleted when 3X the timeout length has passed. I think if you wait a bit longer, they should go away. I tested it, with the patch I submitted yesterday, and it works as designed.</p>
</blockquote>
<p>Dan,I could not find this PR. To not be forgotten I added the issue to the task list.</p>



<a name="309370409"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/309370409" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Dickey <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#309370409">(Nov 12 2022 at 17:55)</a>:</h4>
<p><span class="user-mention" data-user-id="522486">@Håkan Svensson</span> the patch was for something else. In my testing, the stale AIS targets disappear per the 3x timeout mentioned above. So, I believe there is no problem. If you check again and find a case of a target never leaving please let me know as much about the target as you can.</p>



<a name="310121902"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/310121902" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#310121902">(Nov 15 2022 at 03:25)</a>:</h4>
<p>AIS target timeout fixed by 50424282d52ee93f9fc0d7678f25c49538ef3daf<br>
Targets get strike-out, and disappear from screen correctly.  They then disappear from AIS Target List in 3x the target removal time,  as designed.</p>



<a name="310188210"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/310188210" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#310188210">(Nov 15 2022 at 12:16)</a>:</h4>
<p>AIS target strike-out and disappearance in due time confirmed. Thanks.</p>



<a name="312195532"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/312195532" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#312195532">(Nov 25 2022 at 14:09)</a>:</h4>
<p><strong>Spontaneous false language</strong><br>
Windows. <br>
I've got reports from two users the normal Swedish language is suddenly changed to Spanish!<br>
If I show the language list in User interface there's a strange "gap", see picture. Some kind of explanation is that the gap is sometimes a seen as real post in the list and sometimes not. Since Spanish is the position just before Swedish a numbered list may sometimes point to Spanish instead of Swedish?<br>
Also are all languages in the list spelled in English and not local languages as normal.</p>
<p>Linux (RPi)<br>
There's the list even worst. <br>
List posts with only question marks and plenty of empty rows.<br>
Though is the spelling in locals here.</p>
<p><a href="/user_uploads/33951/MM8pynmzOZinYxk0J7OyJsXm/bild.png">bild.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/33951/MM8pynmzOZinYxk0J7OyJsXm/bild.png" title="bild.png"><img src="/user_uploads/33951/MM8pynmzOZinYxk0J7OyJsXm/bild.png"></a></div>



<a name="312438036"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/312438036" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#312438036">(Nov 27 2022 at 08:29)</a>:</h4>
<p>Language list corrected. No empty rows and individual local languages used for each post in the list. <br>
And.. All languages can now be used. Some O version back (5.0?) the choice was restricted to Eng(US) and machine language. Now restored. (If that was due to this commit or earlier I don't know. Haven't checked it for years.)<br>
Thanks.</p>



<a name="312438954"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/312438954" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#312438954">(Nov 27 2022 at 08:39)</a>:</h4>
<p>Look ahead mode is now corrected. After commit "Correct Course-UP mode timer logic." also look ahead mode in "north up" do position the ship symbol as it should.</p>



<a name="313092301"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/313092301" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#313092301">(Nov 30 2022 at 16:00)</a>:</h4>
<p><strong>Windows Console data font scaling</strong><br>
Console route data font scaling also fails for Win scaled display. <br>
The console window itself is correct sized as is the label e.g. "This leg"<br>
<a href="/user_uploads/33951/_ynLEH8aRmnuO7UEXprVWOQZ/bild.png">bild.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/33951/_ynLEH8aRmnuO7UEXprVWOQZ/bild.png" title="bild.png"><img src="/user_uploads/33951/_ynLEH8aRmnuO7UEXprVWOQZ/bild.png"></a></div>



<a name="313105247"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/313105247" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#313105247">(Nov 30 2022 at 16:55)</a>:</h4>
<p>Hakan...<br>
Take a look at concanv.cpp:469</p>



<a name="313253652"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/313253652" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#313253652">(Dec 01 2022 at 11:11)</a>:</h4>
<p>Dave..<br>
I scaled "m_pvalueFont" there but it seems later updated and destroyed by "RefreshFonts()" where I couldn't find a method to scale it wo obstacles.  Obviously over my head.</p>



<a name="313734020"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/313734020" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#313734020">(Dec 03 2022 at 21:06)</a>:</h4>
<p><strong>Rollover background is too big on scaled Win</strong><br>
The rollover text is still correct after last fix but now the background has grown big.<br>
This is valid for all rollover: Canvas meny tooltips, routes, tracks and AIS rollover.<br>
<a href="/user_uploads/33951/fdRjP5NI64RpBAQRuSRHnLdD/bild.png">bild.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/33951/fdRjP5NI64RpBAQRuSRHnLdD/bild.png" title="bild.png"><img src="/user_uploads/33951/fdRjP5NI64RpBAQRuSRHnLdD/bild.png"></a></div>



<a name="313950453"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/313950453" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#313950453">(Dec 05 2022 at 12:18)</a>:</h4>
<p>AIS/DCS-Alerts now working. "TODO list, Alpha test" task point completed..</p>



<a name="314217970"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/314217970" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#314217970">(Dec 06 2022 at 11:36)</a>:</h4>
<p>On Win (Scaled)<br>
The OCPNMessageBox() may also need some general scale tweaking.<br>
I suppose it's about the icon in the massage box.<br>
If I change to "wxOK_DEFAULT" instead of present "wxICON_INFORMATION" the message box size is normal, see pictures.<br>
<a href="/user_uploads/33951/T11iLRnLpvDZWulW2fgM0L8A/bild.png">bild.png</a> <br>
<a href="/user_uploads/33951/QylNbdTc_T5yBloo5RxEcK67/bild.png">bild.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/33951/T11iLRnLpvDZWulW2fgM0L8A/bild.png" title="bild.png"><img src="/user_uploads/33951/T11iLRnLpvDZWulW2fgM0L8A/bild.png"></a></div><div class="message_inline_image"><a href="/user_uploads/33951/QylNbdTc_T5yBloo5RxEcK67/bild.png" title="bild.png"><img src="/user_uploads/33951/QylNbdTc_T5yBloo5RxEcK67/bild.png"></a></div>



<a name="314394488"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/314394488" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#314394488">(Dec 07 2022 at 07:47)</a>:</h4>
<p>All rollover scaling issues, AIS, tooltip, route, are now corrected.</p>



<a name="315173507"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/315173507" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#315173507">(Dec 11 2022 at 08:03)</a>:</h4>
<p>Console scaled font issue is now corrected by c007b845</p>



<a name="315462603"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/315462603" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Rossiter <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#315462603">(Dec 12 2022 at 21:01)</a>:</h4>
<p>Made a MacOS build from the latest master. Neither ShipDriver or o-charts will import. Naming of o-charts tarball is suspect - wx315. Cannot find wx32 version.<br>
<a href="https://github.com/Rasbats/shipdriver_pi/issues/475">https://github.com/Rasbats/shipdriver_pi/issues/475</a><br>
Nothing in the catalog.</p>



<a name="315684157"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/315684157" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Rossiter <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#315684157">(Dec 13 2022 at 20:55)</a>:</h4>
<p>Lots of tests:<br>
<a href="https://github.com/Rasbats/shipdriver_pi/issues/475">https://github.com/Rasbats/shipdriver_pi/issues/475</a><br>
<span class="user-mention" data-user-id="517002">@Dave Register</span> Should we move to homebrew wxWidgets for the MacOS? My own build of MacOS OpenCPN using these allowed me to import a ShipDriver tarball, also built with homebrew wxWidgets. <br>
Alternative that worked was to keep using the <a href="http://opencpn.org">opencpn.org</a> wxWidgets, as in the master code and compile ShipDriver using <a href="http://opencpn.org">opencpn.org</a> version of wxWidgets as well. This also worked.</p>



<a name="315686961"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/315686961" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#315686961">(Dec 13 2022 at 21:11)</a>:</h4>
<p>We should first sort out what the actual problem is/was when using plugin+homebrew before jumping to conclusions.</p>



<a name="315687904"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/315687904" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#315687904">(Dec 13 2022 at 21:17)</a>:</h4>
<p>The actual problem is this</p>
<div class="codehilite"><pre><span></span><code>17:29:53.180 ERROR dlunix.cpp:120 Failed to load shared library &#39;/Users/mikerossiter/Library/ApplicationSupport/OpenCPN/Contents/PlugIns/libShipDriver_pi.dylib&#39;:dlopen(/Users/mikerossiter/Library/ApplicationSupport/OpenCPN/Contents/PlugIns/libShipDriver_pi.dylib, 2): Symbol not found:_wxTheAssertHandler
Referenced from: /Users/mikerossiter/Library/ApplicationSupport/OpenCPN/Contents/PlugIns/libShipDriver_pi.dylib
</code></pre></div>
<p>Needs  investigation. At a glance, looks like a symbol which should be provided by any wxWidgets library.</p>



<a name="315689490"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/315689490" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#315689490">(Dec 13 2022 at 21:28)</a>:</h4>
<p>At least we need to sort out things described in <a href="https://stackoverflow.com/questions/42036606">https://stackoverflow.com/questions/42036606</a>. This is basically about the compiler flags used when compiling, both for homebrew and our custom build.</p>
<p><span class="user-mention" data-user-id="517002">@Dave Register</span>  should know about the flags used when compiling the custom build. I will look into homebrew  tomorrow, late here now.</p>



<a name="315692703"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/315692703" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#315692703">(Dec 13 2022 at 21:47)</a>:</h4>
<p>It was actually simple. Below  is the homebrew wxwidgets formula with all configure options.</p>
<p><span class="user-mention" data-user-id="517002">@Dave Register</span>  Which are the corresponding options used for the custom build?</p>
<div class="codehilite"><pre><span></span><code>class Wxwidgets &lt; Formula
  desc &quot;Cross-platform C++ GUI toolkit&quot;
  homepage &quot;https://www.wxwidgets.org&quot;
  url &quot;https://github.com/wxWidgets/wxWidgets/releases/download/v3.1.5/wxWidgets-3.1.5.tar.bz2&quot;
  sha256 &quot;d7b3666de33aa5c10ea41bb9405c40326e1aeb74ee725bb88f90f1d50270a224&quot;
  license &quot;wxWindows&quot;
  head &quot;https://github.com/wxWidgets/wxWidgets.git&quot;, branch: &quot;master&quot;

  livecheck do
    url :stable
    regex(/^v?(\d+(?:\.\d+)+)$/i)
  end

  bottle do
    sha256 cellar: :any,                 arm64_monterey: &quot;64286e7122dfb5fb4a2ff013f2a9ef10595f404d036908ca6279c2821f02cf43&quot;
    sha256 cellar: :any,                 arm64_big_sur:  &quot;00b2086f68be587c6ee848954845a81e1e4bda964dc4a8b8ec117d6acb54c833&quot;
    sha256 cellar: :any,                 monterey:       &quot;ee0ae69ee883fe648eec49b00c39780e1ccecf11dd8b1e1fd58ef01c92b08f03&quot;
    sha256 cellar: :any,                 big_sur:        &quot;b75599c4bb938ce01b3ddcce13c8cea3d7f329db85a1a63672eca1266621e857&quot;
    sha256 cellar: :any,                 catalina:       &quot;a9de66ca781fe633b958a0a7745b47fecd4ffb3fc9d7302757b057ded6c88e22&quot;
    sha256 cellar: :any,                 mojave:         &quot;974046c7307cca6cb5eec6ef6b06c57817f42782ef1cfa03ff1f4bb4a97190bd&quot;
    sha256 cellar: :any_skip_relocation, x86_64_linux:   &quot;f20b0033ce08592ade30d821da88010582c6107e7269e112ab3bbd48ec887f66&quot;
  end

  depends_on &quot;jpeg&quot;
  depends_on &quot;libpng&quot;
  depends_on &quot;libtiff&quot;

  on_linux do
    depends_on &quot;pkg-config&quot; =&gt; :build
    depends_on &quot;gtk+3&quot;
    depends_on &quot;libsm&quot;
    depends_on &quot;mesa-glu&quot;
  end

  def install
    args = [
      &quot;--prefix=#{prefix}&quot;,
      &quot;--enable-clipboard&quot;,
      &quot;--enable-controls&quot;,
      &quot;--enable-dataviewctrl&quot;,
      &quot;--enable-display&quot;,
      &quot;--enable-dnd&quot;,
      &quot;--enable-graphics_ctx&quot;,
      &quot;--enable-std_string&quot;,
      &quot;--enable-svg&quot;,
      &quot;--enable-unicode&quot;,
      &quot;--enable-webviewwebkit&quot;,
      &quot;--with-expat&quot;,
      &quot;--with-libjpeg&quot;,
      &quot;--with-libpng&quot;,
      &quot;--with-libtiff&quot;,
      &quot;--with-opengl&quot;,
      &quot;--with-zlib&quot;,
      &quot;--disable-precomp-headers&quot;,
      # This is the default option, but be explicit
      &quot;--disable-monolithic&quot;,
    ]

    if OS.mac?
      # Set with-macosx-version-min to avoid configure defaulting to 10.5
      args &lt;&lt; &quot;--with-macosx-version-min=#{MacOS.version}&quot;
      args &lt;&lt; &quot;--with-osx_cocoa&quot;
      args &lt;&lt; &quot;--with-libiconv&quot;
    end

    system &quot;./configure&quot;, *args
    system &quot;make&quot;, &quot;install&quot;

    # wx-config should reference the public prefix, not wxwidgets&#39;s keg
    # this ensures that Python software trying to locate wxpython headers
    # using wx-config can find both wxwidgets and wxpython headers,
    # which are linked to the same place
    inreplace &quot;#{bin}/wx-config&quot;, prefix, HOMEBREW_PREFIX

    # For consistency with the versioned wxwidgets formulae
    bin.install_symlink &quot;#{bin}/wx-config&quot; =&gt; &quot;wx-config-#{version.major_minor}&quot;
    (share/&quot;wx&quot;/version.major_minor).install share/&quot;aclocal&quot;, share/&quot;bakefile&quot;
  end

  test do
    system bin/&quot;wx-config&quot;, &quot;--libs&quot;
  end
end
</code></pre></div>



<a name="315716619"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/315716619" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#315716619">(Dec 14 2022 at 00:49)</a>:</h4>
<p>"my" bundled version was built with the following autotools config options:</p>
<div class="codehilite"><pre><span></span><code> $ ../configure --with-cxx=11 --with-macosx-version-min=10.10 --enable-unicode --with-osx-cocoa --enable-aui --disable-debug --with-opengl --without-subdirs --prefix=/tmp/wx321_opencpn50_macos1010
</code></pre></div>



<a name="315722194"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/315722194" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#315722194">(Dec 14 2022 at 01:51)</a>:</h4>
<p>This config setup has been known to work for many OCPN and wx versions, for years.  I'll be resistant to change, at least in OCPN core.</p>



<a name="315766663"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/315766663" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#315766663">(Dec 14 2022 at 09:07)</a>:</h4>
<p>It would take some time finding out which of the options causing the linkage error. Not much to discuss until we either do this or just use use the private build. </p>
<p>Obviously, I hesitate to use the private build for reasons already explained  and IMHO easily fixed.</p>



<a name="315831442"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/315831442" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#315831442">(Dec 14 2022 at 14:27)</a>:</h4>
<p>What can I say?  Our plates are full, and the existing method has worked for 8 years....</p>



<a name="315852250"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/315852250" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#315852250">(Dec 14 2022 at 15:55)</a>:</h4>
<p>I'll see  if I can do anything about this. Not suggesting anyone else should.</p>



<a name="316125806"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/316125806" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#316125806">(Dec 15 2022 at 19:47)</a>:</h4>
<p>We have just merged shipdriver  code which rebuilds wxWidgets from source. This makes for a clear trace to the actually used sources, avoiding the questions whcih always could arise around a binary download without docs.</p>
<p>The build is cached, so the current macos build is actually much faster than it was besides the initial run (macos now completes more or less in the same time as other platforms).</p>



<a name="316126320"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/316126320" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#316126320">(Dec 15 2022 at 19:50)</a>:</h4>
<p><a href="https://github.com/Rasbats/shipdriver_pi/pull/479">https://github.com/Rasbats/shipdriver_pi/pull/479</a></p>



<a name="319791340"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/319791340" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#319791340">(Jan 06 2023 at 14:25)</a>:</h4>
<p>Please help.   <span class="user-mention" data-user-id="399510">@Alec Leamas</span>  (?)<br>
This code in nav_object_database.cpp : 1421 has probably lost it's link(?).  See <a href="https://www.cruisersforum.com/forums/f134/opencpn-version-5-7-1-beta-test-1-a-271518-5.html#post3726720">CF Post</a><br>
I think the idea is the (root().name()) is supposed to have some length after first data print to the NavObject.<br>
That's we only want to print the header once. Now name() is empty all time we run the function.<br>
Is there a easy fix (I or.. could push) or should i make an issue?</p>
<blockquote>
<p>void NavObjectCollection1::SetRootGPXNode(void) {<br>
  if (!strlen(root().name())) {<br>
    pugi::xml_node gpx_root = append_child("gpx");<br>
    gpx_root.append_attribute("version") = "1.1";<br>
    gpx_root.append_attribute("creator") = "OpenCPN";</p>
</blockquote>



<a name="319813391"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/319813391" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#319813391">(Jan 06 2023 at 16:20)</a>:</h4>
<p>At a glance, this looks broken by design. This code  sets data in  a child named "gpx", but uses  <code>name()</code> to find out whether the "gpx" child is set. Why not check if there is a "gpx" child instead? Making assumptions like "if name() is defined there is no need to create the "gpx" child" seems really  odd, especially since SetRootGPXNode() does not set that name...</p>
<p>Thoughts?</p>



<a name="319814018"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/319814018" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#319814018">(Jan 06 2023 at 16:24)</a>:</h4>
<p>Furthermore, that function creates a node, but does not insert it anywhere. Nor does it return anything.  The bad commit seems to be 6ff5bf4abef80fce3 " Refactor navobj XML file handling." which was quite late (Dec 17...)</p>



<a name="319814467"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/319814467" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#319814467">(Jan 06 2023 at 16:26)</a>:</h4>
<p>I could probably do something about this. However, it might make more sense that Dave takes a look at it,  he has been working recently with this code and has the complete picture to the refactoring taking place here.</p>



<a name="319814523"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/319814523" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#319814523">(Jan 06 2023 at 16:26)</a>:</h4>
<p><span class="user-mention" data-user-id="517002">@Dave Register</span>  ^</p>



<a name="319814781"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/319814781" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#319814781">(Jan 06 2023 at 16:27)</a>:</h4>
<p>The "refactor..." commit was a work on bugs in routes last month.  <br>
Thanks for your "glance"</p>



<a name="319862864"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/319862864" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#319862864">(Jan 06 2023 at 21:00)</a>:</h4>
<p>After good guidance from Alec and some trial and error this works as expected:</p>
<blockquote>
<p>void NavObjectCollection1::SetRootGPXNode(void) {<br>
  if (!strlen(first_child().name())) {</p>
</blockquote>
<p>If no further objections a PR to come.<br>
Thanks.</p>



<a name="319867191"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/319867191" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#319867191">(Jan 06 2023 at 21:34)</a>:</h4>
<p>hm... You should probably not go for first child, it could basically be anything. The trick would be to look for a child named "GPX".</p>
<p>And the other issue is still there. The node created is not inserted anywhere if I understand this code right.</p>



<a name="319867714"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/319867714" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#319867714">(Jan 06 2023 at 21:38)</a>:</h4>
<p>Using  <code>child(const char* name)</code> is probably the way to go for the first thing, see <a href="https://pugixml.org/docs/manual.html#access.contents">https://pugixml.org/docs/manual.html#access.contents</a></p>



<a name="319868174"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/319868174" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#319868174">(Jan 06 2023 at 21:42)</a>:</h4>
<p>Ah... OK. NavObjectCollection1 is a pugi::xml_document, so <code>append_child()</code> appends to <code>this</code>.  Case closed, the new node is actually appended implicitly. Sorry  for that noise.</p>



<a name="339020574"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/339020574" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#339020574">(Mar 02 2023 at 07:23)</a>:</h4>
<p>PM. Plugin version presentation.<br>
Would we correct the inconsistency for shown version number for a imported plugin before 5.8?<br>
This was discussed earlier but I don't remember what was said.<br>
PM and plugin preferences shows different version when the plugin is imported. PM shows only last catalog update and not what's actually installed.<br>
<a href="/user_uploads/33951/jnbh1AAMgc8z4oOZTk2inRef/bild.png">bild.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/33951/jnbh1AAMgc8z4oOZTk2inRef/bild.png" title="bild.png"><img src="/user_uploads/33951/jnbh1AAMgc8z4oOZTk2inRef/bild.png"></a></div>



<a name="339022201"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/339022201" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#339022201">(Mar 02 2023 at 07:34)</a>:</h4>
<p>I. e., this is a general problem, not just about o-charts, right?</p>



<a name="339029325"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/339029325" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#339029325">(Mar 02 2023 at 08:16)</a>:</h4>
<p>I suppose it's general. o-charts is an example. Since neither "Debian-arm64:11" nor "Debian-armhf:11" is available in master catalog I use to build them locally and import the Tarball. That's why I noticed.</p>



<a name="339031672"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/339031672" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#339031672">(Mar 02 2023 at 08:28)</a>:</h4>
<p>To complete the picture for possible bug trace:<br>
If I import a tarball e.g. v2.0.0.38 PM shows that version correct.<br>
Also if I close PM and reopen the correct v.38 is shown.<br>
But as soon I update catalog master the o-charts version switches to last catalog install 1.0.0.29</p>



<a name="339034923"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/339034923" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#339034923">(Mar 02 2023 at 08:47)</a>:</h4>
<p>No time right now, perhaps later. </p>
<p>This should IMHO be filed as a bug. Having the discussion here is still a good practise, this way we can avoid clobbering down the bugs with all the details and chit-chat which is necessary.</p>
<p>If you file a bug you can link to zulip discussions using <a href="https://leamas.github.io/zulip-archive/">https://leamas.github.io/zulip-archive/</a></p>



<a name="340339985"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Test%20issues/near/340339985" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Test.20issues.html#340339985">(Mar 08 2023 at 11:58)</a>:</h4>
<p>While debug another task I saw a lot of  the exceptions below. I fact one every second.<br>
Is this a Debug issue, although not seen before, or something we need to address?<br>
The whole story in attached file.<br>
SE: "servern är inte tillgänglig."  &gt;&gt; "RPC- server is not available/accessible"</p>
<blockquote>
<p>Exception thrown at 0x774CE4B2 (KernelBase.dll) in opencpn.exe: 0x000006BA: RPC-servern är inte tillgänglig.<br>
Exception thrown at 0x774CE4B2 (KernelBase.dll) in opencpn.exe: 0x000006BA: RPC-servern är inte tillgänglig.<br>
Exception thrown at 0x774CE4B2 in opencpn.exe: Microsoft C++ exception: serial::IOException at memory location 0x0D54F1A0.<br>
Exception thrown at 0x774CE4B2 in opencpn.exe: Microsoft C++ exception: serial::IOException at memory location 0x0D54F1A0.</p>
</blockquote>
<p><a href="/user_uploads/33951/__cg_0nE2pq_ncGEpB7ige2S/Debug-thread-exceptions.txt">Debug-thread-exceptions.txt</a></p>



<hr><p>Last updated: Jan 28 2025 at 19:23 UTC</p>
</html>