<html>
<head><meta charset="utf-8"><title>Beta preparations · Master - 5.8.0  (was: comms) · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/index.html">Master - 5.8.0  (was: comms)</a></h2>
<h3>Topic: <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Beta.20preparations.html">Beta preparations</a></h3>

<hr>

<base href="https://opencpn.zulipchat.com">

<head><link href="https://leamas.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="306201932"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Beta%20preparations/near/306201932" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Beta.20preparations.html#306201932">(Oct 26 2022 at 09:47)</a>:</h4>
<p>We need to start thinking about the beta: <a href="https://github.com/OpenCPN/OpenCPN/discussions/2797">https://github.com/OpenCPN/OpenCPN/discussions/2797</a></p>



<a name="306259306"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Beta%20preparations/near/306259306" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Beta.20preparations.html#306259306">(Oct 26 2022 at 14:56)</a>:</h4>
<p>Preparations for  Beta..<br>
There are in my mind some more things to consider before Beta.<br>
Apart from the "TODO list for Alpha" some issues so far:</p>
<ul>
<li>Prioritization by user of incoming sources for position/voyage/GNSS/(HDT). Now we give prio to first received. We may  need a GUI to select by what's received. Preferable within both types: serial and N2k. (Signalk may live it's own life here?) As a start I can setup a N2k AIS including GNSS and a N2k GNSS/HDG sensor to test on.</li>
<li>Outgoing messages from a activated route is not listed in NMEA Debug window.</li>
<li>"PushNMEABuffer()" is not working. Nothing is sent when used. Just noted in Debug window as: "(virtual) $ECAIQ,VSD*32&lt;0x0D&gt;&lt;0x0A&gt;"</li>
</ul>



<a name="306305619"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Beta%20preparations/near/306305619" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Beta.20preparations.html#306305619">(Oct 26 2022 at 18:37)</a>:</h4>
<p>A message was moved here from <a class="stream-topic" data-stream-id="332168" href="/#narrow/stream/332168-comms/topic/misc">#comms &gt; misc</a> by <span class="user-mention silent" data-user-id="399510">Alec Leamas</span>.</p>



<a name="306305711"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Beta%20preparations/near/306305711" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Beta.20preparations.html#306305711">(Oct 26 2022 at 18:37)</a>:</h4>
<p>A message was moved here from <a class="stream-topic" data-stream-id="332168" href="/#narrow/stream/332168-comms/topic/misc">#comms &gt; misc</a> by <span class="user-mention silent" data-user-id="399510">Alec Leamas</span>.</p>



<a name="306576656"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Beta%20preparations/near/306576656" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Beta.20preparations.html#306576656">(Oct 28 2022 at 03:12)</a>:</h4>
<p>Hakan..<br>
Fixed these:<br>
Outgoing messages from a activated route is not listed in NMEA Debug window.<br>
"PushNMEABuffer()" is not working. Nothing is sent when used. Just noted in Debug window as: "(virtual) $ECAIQ,VSD*32&lt;0x0D&gt;&lt;0x0A&gt;"</p>



<a name="306838113"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Beta%20preparations/near/306838113" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Beta.20preparations.html#306838113">(Oct 29 2022 at 13:20)</a>:</h4>
<p>Both fix confirmed. Thanks! So now is AIS_VD plugin working as before.</p>



<a name="308608580"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Beta%20preparations/near/308608580" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Beta.20preparations.html#308608580">(Nov 08 2022 at 15:14)</a>:</h4>
<p>The beta  will break also the windows ABI. Unlike Flatpak and Debian/Ubuntu, we can probably not use the version number in a meaningful way here (?)  This then means that we need a new ABI designator like <em>msvc-wx32</em> instead of the current <em>msvc</em>.</p>
<p><span class="user-mention" data-user-id="522486">@Håkan Svensson</span>  <span class="user-mention" data-user-id="517002">@Dave Register</span>  Thoughts?</p>



<a name="308614307"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Beta%20preparations/near/308614307" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Beta.20preparations.html#308614307">(Nov 08 2022 at 15:40)</a>:</h4>
<p><span class="user-mention" data-user-id="399510">@Alec Leamas</span> <br>
 Yes.  I am heads down on getting the wx321 Appveyor build working.<br>
I think that "msvc-wx32" will work, without major refactor of plugin metadata structure.<br>
When I get wx321 branch merged, we can formalize the plugin metadata requirements.  Soon now.<br>
Rant:  I truly dislike debugging Appveyor CI builds.  If we could only get a ssh console to the build machine, like CCI gives us, it would save a lot of time.  Might make sense to investigate CCI for Windows builds....</p>



<a name="308620604"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Beta%20preparations/near/308620604" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Beta.20preparations.html#308620604">(Nov 08 2022 at 16:10)</a>:</h4>
<p><span class="user-mention" data-user-id="517002">@Dave Register</span> :   <a href="https://github.com/OpenCPN/plugins/pull/746">https://github.com/OpenCPN/plugins/pull/746</a></p>
<p>Might need a review of <em>IsCompatible()</em>, there is hardcoded windows stuff. Will try to late today or tomorrow.</p>



<a name="308620871"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Beta%20preparations/near/308620871" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Beta.20preparations.html#308620871">(Nov 08 2022 at 16:11)</a>:</h4>
<p>Agreed: It would simplify in many ways if we could build WIndows on CCI. Also hate it.</p>



<a name="308672076"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Beta%20preparations/near/308672076" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Beta.20preparations.html#308672076">(Nov 08 2022 at 20:54)</a>:</h4>
<p><a href="https://github.com/OpenCPN/OpenCPN/pull/2811">https://github.com/OpenCPN/OpenCPN/pull/2811</a></p>



<a name="308672878"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Beta%20preparations/near/308672878" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Beta.20preparations.html#308672878">(Nov 08 2022 at 20:59)</a>:</h4>
<p><span class="user-mention" data-user-id="517002">@Dave Register</span>  You might want use install a more recent cmake, which is available as a python wheel.  As I understand it, only a recent cmake version can really handle wxW 3.2.</p>
<p>Basically, something like <code>python3 -m pip install --user -q cmake</code> should give you  the latest cmake. See for example  <a href="https://github.com/Rasbats/shipdriver_pi/blob/master/ci/circleci-build-debian-wx31.sh">https://github.com/Rasbats/shipdriver_pi/blob/master/ci/circleci-build-debian-wx31.sh</a> around line 43</p>



<a name="308674386"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Beta%20preparations/near/308674386" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Beta.20preparations.html#308674386">(Nov 08 2022 at 21:10)</a>:</h4>
<p><span class="user-mention" data-user-id="399510">@Alec Leamas</span> <br>
It turns out that my ugly hacks on FindwxWidgets.cmake were not required, after all.  VS2022 image at Appveyor has a sufficiently recent cmake to work, once the script is all correct.  My core problem is the same that everyone runs into:  VS2022 defaults to build an x64 app, and we need a WIN32 app.  So we need to add to cmake invocation:<br>
    -DCMAKE_GENERATOR_PLATFORM=Win32     <br>
All good now, I think.  Final CI build before merge is underway.</p>



<a name="308674700"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Beta%20preparations/near/308674700" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Beta.20preparations.html#308674700">(Nov 08 2022 at 21:12)</a>:</h4>
<p>OK. Still, sooner or alter we will need to build 64 bits on Windows , I guess.</p>



<a name="308674997"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Beta%20preparations/near/308674997" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Beta.20preparations.html#308674997">(Nov 08 2022 at 21:14)</a>:</h4>
<p>I'm not at all sure why we would need that, but we can cross that bridge when we have leisure time (HaHa !)<br>
p.s.  Sorry for the commit noise on this branch.  I see no other way to debug Appveyor except by trial and error....</p>



<a name="308676582"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Beta%20preparations/near/308676582" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Beta.20preparations.html#308676582">(Nov 08 2022 at 21:26)</a>:</h4>
<p>No problems with commit noise on a feature branch. I feel your pain.</p>



<a name="308697762"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Beta%20preparations/near/308697762" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Beta.20preparations.html#308697762">(Nov 09 2022 at 00:30)</a>:</h4>
<p>I have merged, built, and tested wxwin321 branch.  Looks good so far.<br>
For reference, this is built with vs2020, v143.  As modern as it gets.<br>
Next step is to build some plugins against wx321, for Windows  I'm on it.</p>



<a name="308767202"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Beta%20preparations/near/308767202" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Dickey <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Beta.20preparations.html#308767202">(Nov 09 2022 at 11:31)</a>:</h4>
<p><span class="user-mention" data-user-id="517002">@Dave Register</span> I think the “preferred” method is on the cmake configure command line use -AWin32 as the architecture.  </p>
<p>Going to 64 bit on windows will be a significant project I think. Anyway, something for next year maybe.</p>
<p><span class="user-mention" data-user-id="399510">@Alec Leamas</span> The issue where I could not build the command line opencpn in wx3.1.x was caused by forcing the linker to build for Windows on the cmake configure command line. Cmake has an issue where there are too many ways to specify the type of Windows executable (command line -subsystem , add_executable, etc.). The command line option overrides the CONSOLE type of add_executable.</p>



<a name="308773326"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Beta%20preparations/near/308773326" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Beta.20preparations.html#308773326">(Nov 09 2022 at 12:10)</a>:</h4>
<p>There would be no urgent use for 64 b Win as I understand it. If so we'd need two program versions or a installer detecting target system. Still two versions to build I suppose. <br>
We will for long time have a lot users with an old PC in the boat. Not usable for games but perfectly suitable for OCPN.</p>



<a name="308792405"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Beta%20preparations/near/308792405" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Beta.20preparations.html#308792405">(Nov 09 2022 at 13:59)</a>:</h4>
<p>Yea, I know. But this is an ABI break, in a better world we would have done also this change now.  But the world is what it is, agreed.</p>



<a name="308797918"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Beta%20preparations/near/308797918" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Beta.20preparations.html#308797918">(Nov 09 2022 at 14:26)</a>:</h4>
<p>" I think the “preferred” method is on the cmake configure command line use -AWin32"<br>
Do you have a reference for this?</p>



<hr><p>Last updated: Feb 03 2025 at 08:33 UTC</p>
</html>