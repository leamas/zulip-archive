<html>
<head><meta charset="utf-8"><title>Testing 0183 messages on new API · Master - 5.8.0  (was: comms) · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/index.html">Master - 5.8.0  (was: comms)</a></h2>
<h3>Topic: <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Testing.200183.20messages.20on.20new.20API.html">Testing 0183 messages on new API</a></h3>

<hr>

<base href="https://opencpn.zulipchat.com">

<head><link href="https://leamas.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="352925523"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Testing%200183%20messages%20on%20new%20API/near/352925523" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Testing.200183.20messages.20on.20new.20API.html#352925523">(Apr 26 2023 at 19:00)</a>:</h4>
<p>Continued from <a href="https://github.com/leamas/opencpn-libs/issues/15">https://github.com/leamas/opencpn-libs/issues/15</a></p>



<a name="352926505"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Testing%200183%20messages%20on%20new%20API/near/352926505" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Testing.200183.20messages.20on.20new.20API.html#352926505">(Apr 26 2023 at 19:05)</a>:</h4>
<p>Forget what I said about that the message must be supported in comm_bridge. I wrote before I thought this through. </p>
<p>All messages arre posted by the driver, and they should be available on the message bus. comm_bridge is just about handling messages which needs to be dealt with, it has nothing to do with what's available for plugins or not.</p>



<a name="352926578"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Testing%200183%20messages%20on%20new%20API/near/352926578" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Testing.200183.20messages.20on.20new.20API.html#352926578">(Apr 26 2023 at 19:06)</a>:</h4>
<p><span class="user-mention" data-user-id="522486">@Håkan Svensson</span>  ^</p>



<a name="352926896"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Testing%200183%20messages%20on%20new%20API/near/352926896" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Testing.200183.20messages.20on.20new.20API.html#352926896">(Apr 26 2023 at 19:07)</a>:</h4>
<p>2 messages were moved here from <a class="stream-topic" data-stream-id="332168" href="/#narrow/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/canbus.20testing">#Master - 5.8.0  (was: comms) &gt; canbus testing</a> by <span class="user-mention silent" data-user-id="399510">Alec Leamas</span>.</p>



<a name="352927835"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Testing%200183%20messages%20on%20new%20API/near/352927835" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Testing.200183.20messages.20on.20new.20API.html#352927835">(Apr 26 2023 at 19:12)</a>:</h4>
<p>Ok, good. <br>
So to receive "VSD" and more particular the AIVSD would be possible for a plugin? comm_bridge is only for OCPN own needs?</p>
<p>And I suppose transmit of a message out from the plugin will still be handled by "PushNMEABuffer()"?</p>



<a name="352947397"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Testing%200183%20messages%20on%20new%20API/near/352947397" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Testing.200183.20messages.20on.20new.20API.html#352947397">(Apr 26 2023 at 21:08)</a>:</h4>
<blockquote>
<p>So to receive "VSD" and more particular the AIVSD would be possible for a plugin? comm_bridge is only for OCPN own needs?</p>
</blockquote>
<p>Yes</p>
<blockquote>
<p>And I suppose transmit of a message out from the plugin will still be handled by "PushNMEABuffer()"?</p>
</blockquote>
<p>No. See <a href="https://opencpn-manuals.github.io/main/opencpn-dev/plugin-messaging.html#_sending_messages">https://opencpn-manuals.github.io/main/opencpn-dev/plugin-messaging.html#_sending_messages</a></p>



<a name="353103395"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Testing%200183%20messages%20on%20new%20API/near/353103395" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Testing.200183.20messages.20on.20new.20API.html#353103395">(Apr 27 2023 at 06:11)</a>:</h4>
<p>Output:<br>
Without having seen a used examples some quick conclusions:</p>
<p>With PushNMEABuffer() the plugin don't have to care for available output ports. The multiplexer will take care of that and send out on any serial or network port set as output. </p>
<p>With WriteCommDriver() the plugin has to do the job to search for output port(s) and send to every each found.  The plugin, in this case ais-vd_pi,  can not know on witch port a AIS transponder is connected and has to broadcast all serial/network outputs found.</p>
<p>So, what's advantage with this method compared to present PushNMEABuffer()?</p>



<a name="353150559"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Testing%200183%20messages%20on%20new%20API/near/353150559" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Testing.200183.20messages.20on.20new.20API.html#353150559">(Apr 27 2023 at 08:02)</a>:</h4>
<p>As I understand it, the meaning of "output" is a bit confused here. I refer to sending messages via the physical interfaces  to another host, for example an NMEA slave instrument or an autopilot. But <code>PushNMEABuffer()</code>is really about sending messages to other plugins on the same host.</p>
<p>That is, the comparison is not really meaningful. But to be honest I cannot fully follow the flow in <code>PushNMEABuffer()</code>. It also notifies to an address called <code>"virtual"</code> which don't see anything listening to, but I might miss it.</p>



<a name="353150962"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Testing%200183%20messages%20on%20new%20API/near/353150962" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Testing.200183.20messages.20on.20new.20API.html#353150962">(Apr 27 2023 at 08:03)</a>:</h4>
<p><a href="#narrow/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Testing.200183.20messages.20on.20new.20API/near/353150559">A message</a> was moved here from <a class="stream-topic" data-stream-id="361980" href="/#narrow/stream/361980-opencpn-commits/topic/OpenCPN.20.2F.20v5.2E8.2Ex">#opencpn-commits &gt; OpenCPN / v5.8.x</a> by <span class="user-mention silent" data-user-id="399510">Alec Leamas</span>.</p>



<a name="353162301"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Testing%200183%20messages%20on%20new%20API/near/353162301" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Testing.200183.20messages.20on.20new.20API.html#353162301">(Apr 27 2023 at 08:30)</a>:</h4>
<p>ah... found it. The multiplexer does indeed do some dirty job here. The basic difference is that using <code>PushNMEABuffer()</code> the user does not control to which interfaces the message is sent, it will basically go to all available interfaces subject to various filtering conditions.  This might or might not be what you want to do.</p>



<a name="353273250"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Testing%200183%20messages%20on%20new%20API/near/353273250" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Testing.200183.20messages.20on.20new.20API.html#353273250">(Apr 27 2023 at 12:43)</a>:</h4>
<p>Yes, PushNMEABuffer() does use all all available output connections. A possible connection's filter will control what's sent to a specific target.  Since the ais-vd plugin cannot know which connection is used to reach the AIS transponder that's exactly what I want.<br>
The conclusion is I see no advantage to not use PushNMEABuffer() here. Neither for the plugin nor system performance?</p>
<p>The "virtual" is for internal OCPN use. For example radar_pi use PushNMEABuffer() to send out ARPA objects by $RATTM which is used by OCPN, AIS_decoder,  to draw a ARPA target on screen. The same goes for a possible HDT received from a radar scanner. The "source" for both examples is not a physical connection but "virtual".</p>



<a name="353729880"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/Testing%200183%20messages%20on%20new%20API/near/353729880" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/Testing.200183.20messages.20on.20new.20API.html#353729880">(Apr 28 2023 at 08:41)</a>:</h4>
<p>As long as it works it should be OK. It does not work for N2k, the multiplexer isn't involved in those -- that's the core reason for the new API.</p>



<hr><p>Last updated: Feb 02 2025 at 09:25 UTC</p>
</html>