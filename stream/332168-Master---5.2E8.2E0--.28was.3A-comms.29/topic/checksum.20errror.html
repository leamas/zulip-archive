<html>
<head><meta charset="utf-8"><title>checksum errror · Master - 5.8.0  (was: comms) · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/index.html">Master - 5.8.0  (was: comms)</a></h2>
<h3>Topic: <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/checksum.20errror.html">checksum errror</a></h3>

<hr>

<base href="https://opencpn.zulipchat.com">

<head><link href="https://leamas.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="348487491"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/checksum%20errror/near/348487491" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kees Verruijt <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/checksum.20errror.html#348487491">(Apr 11 2023 at 15:02)</a>:</h4>
<p><span class="user-mention" data-user-id="517002">@Dave Register</span>  Argh, checksum errors. I've had that before but forgot why that was. Will investigate.</p>



<a name="348487865"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/checksum%20errror/near/348487865" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kees Verruijt <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/checksum.20errror.html#348487865">(Apr 11 2023 at 15:03)</a>:</h4>
<p><span class="user-mention" data-user-id="399510">@Alec Leamas</span> and <span class="user-mention" data-user-id="399559">@Mike Rossiter</span> I've forked SD and will generate a PR for the wx3.2.2 changes including removal/cleanup of the WX_ABI stuff.</p>



<a name="348488947"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/checksum%20errror/near/348488947" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Register <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/checksum.20errror.html#348488947">(Apr 11 2023 at 15:06)</a>:</h4>
<p><span class="user-mention" data-user-id="493038">@Kees Verruijt</span> <br>
 forgot why that was....<br>
Fresh build will usually correct this.  Might need a version bump.</p>



<a name="348498241"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/checksum%20errror/near/348498241" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kees Verruijt <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/checksum.20errror.html#348498241">(Apr 11 2023 at 15:40)</a>:</h4>
<p><span class="user-mention silent" data-user-id="517002">Dave Register</span> <a href="#narrow/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/wx3.2E2.2E2.20compatibility/near/348488947">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="493038">Kees Verruijt</span> <br>
 forgot why that was....<br>
Fresh build will usually correct this.  Might need a version bump.</p>
</blockquote>
<p>Interestingly, it's only the Darwin build where the checksum is wrong. The others match up fine when I download them manually. Can you download the beta on your pi?</p>



<a name="348504008"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/checksum%20errror/near/348504008" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kees Verruijt <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/checksum.20errror.html#348504008">(Apr 11 2023 at 16:03)</a>:</h4>
<p>Sorry, not only the Darwin, the linux Debian-wx32;11;x86_64 as well. Even stranger ... I will add a check and log to the ship driver template files.</p>



<a name="348512783"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/checksum%20errror/near/348512783" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/checksum.20errror.html#348512783">(Apr 11 2023 at 16:40)</a>:</h4>
<p>5 messages were moved here from <a class="stream-topic" data-stream-id="332168" href="/#narrow/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/wx3.2E2.2E2.20compatibility">#Master - 5.8.0  (was: comms) &gt; wx3.2.2 compatibility</a> by <span class="user-mention silent" data-user-id="399510">Alec Leamas</span>.</p>



<a name="348513040"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/checksum%20errror/near/348513040" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/checksum.20errror.html#348513040">(Apr 11 2023 at 16:41)</a>:</h4>
<p>Something fishy going on here. I cannot reproduce this in a local build of shipdriver. Why would radar_pi be different?</p>



<a name="348514350"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/checksum%20errror/near/348514350" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/checksum.20errror.html#348514350">(Apr 11 2023 at 16:46)</a>:</h4>
<p>Nor is for example the darwin-wx32 broken when checking my cloudsmith repo -- the metadata checksum is OK.</p>



<a name="348515017"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/checksum%20errror/near/348515017" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/checksum.20errror.html#348515017">(Apr 11 2023 at 16:49)</a>:</h4>
<p>... and same for the shipdriver wx32/x86_64 build when looking at what's uploaded to cloudsmith. Something differs, but what?</p>



<a name="348515215"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/checksum%20errror/near/348515215" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/checksum.20errror.html#348515215">(Apr 11 2023 at 16:50)</a>:</h4>
<p>BTW: how do you verify things?</p>



<a name="348515364"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/checksum%20errror/near/348515364" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/checksum.20errror.html#348515364">(Apr 11 2023 at 16:51)</a>:</h4>
<p>I just run <code>sha256sum &lt;tarball&gt;</code> and compares to the XML metadata.</p>



<a name="348521602"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/checksum%20errror/near/348521602" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kees Verruijt <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/checksum.20errror.html#348521602">(Apr 11 2023 at 17:18)</a>:</h4>
<p>Same here. I am now adding the same check to <a href="http://upload.sh.in">upload.sh.in</a> so that it checks everywhere we build a Linux-like OS.</p>



<a name="348549821"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/checksum%20errror/near/348549821" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kees Verruijt <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/checksum.20errror.html#348549821">(Apr 11 2023 at 19:44)</a>:</h4>
<p>There are now pull requests both for SD (with a number of fixes) and O plugins (for radar_pi v5.5.0-beta3).<br>
SD changes:</p>
<ul>
<li>Build debian-wx32 targets using wxWidgets 3.2.2.1 instead of wx 3.2.1.</li>
<li>Check that targets with wx32 or flatpak in the name are built using wx 3.2 (except windows).</li>
<li>Check that the SHA checksum of the tar.gz file matches and log it (except windows). </li>
<li>Build flatpak builds with 1 parallel, as I am seeing spurious make errors at 2.</li>
<li>Switch Debian builds using <a href="http://circleci-build-debian.sh">circleci-build-debian.sh</a> to Release (from RelWithDebInfo).</li>
</ul>



<a name="348550207"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/checksum%20errror/near/348550207" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kees Verruijt <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/checksum.20errror.html#348550207">(Apr 11 2023 at 19:47)</a>:</h4>
<p>OK, interesting, the PR request failed -- on an error I thought I already fixed. Hang on.</p>



<a name="348554831"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/checksum%20errror/near/348554831" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/checksum.20errror.html#348554831">(Apr 11 2023 at 20:17)</a>:</h4>
<p>Thanks for the PR. I have made a quick review, the remarks are in the PR. </p>
<p>I did  one review remark for each commit , but the relation remark-commit is not obvious. Hopefully you can figure it out, let me know otherwise.</p>



<a name="348558517"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/checksum%20errror/near/348558517" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kees Verruijt <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/checksum.20errror.html#348558517">(Apr 11 2023 at 20:41)</a>:</h4>
<p>What is the new cloud smith link?</p>



<a name="348558791"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/checksum%20errror/near/348558791" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/checksum.20errror.html#348558791">(Apr 11 2023 at 20:43)</a>:</h4>
<p>alec-leamas/wxwidgets-32</p>



<a name="348559506"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/checksum%20errror/near/348559506" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kees Verruijt <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/checksum.20errror.html#348559506">(Apr 11 2023 at 20:48)</a>:</h4>
<p>OK. I am checking using radar_pi now. I've split the checks off into <code>verify-result.sh</code> that is then executed from the various circle*.sh scripts, right after <code>make</code>. Is that something that would agreeable in principle? (It can't be done in cmake, as the SHA needs to be done in a different way than CMake, as that is exactly what is not being generated correctly all of the time.)</p>



<a name="348559931"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/checksum%20errror/near/348559931" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/checksum.20errror.html#348559931">(Apr 11 2023 at 20:51)</a>:</h4>
<p>A separate script is of course better. But I still would consider this as a temporary debug setup, nothing we should live with permanently.</p>
<p>Have you a link to a build log which generates a faulty checksum?</p>



<a name="348559940"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/checksum%20errror/near/348559940" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kees Verruijt <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/checksum.20errror.html#348559940">(Apr 11 2023 at 20:51)</a>:</h4>
<p>As to the <code>Release</code> vs <code>RelWithDbgInfo</code> -- well, it wasn't being stripped, so that is a real bug. Also it makes <code>circleci-build-debian.sh</code> different from all others . How about doing something like <code>${CMAKE_LOCAL_TARGET:-Release}</code> everywhere, which would allow you to override _all_ platforms from your <code>.local/config.rc</code> ?</p>



<a name="348560154"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/checksum%20errror/near/348560154" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/checksum.20errror.html#348560154">(Apr 11 2023 at 20:52)</a>:</h4>
<p>I think the basic logic actually is sound. We should file a bug if a library isn't stripped, and fix it.</p>



<a name="348560292"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/checksum%20errror/near/348560292" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/checksum.20errror.html#348560292">(Apr 11 2023 at 20:53)</a>:</h4>
<p>Same thing here: have you got a link to a build log which generates a non-stripped library file?</p>



<a name="348560458"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/checksum%20errror/near/348560458" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kees Verruijt <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/checksum.20errror.html#348560458">(Apr 11 2023 at 20:54)</a>:</h4>
<p><span class="user-mention silent" data-user-id="399510">Alec Leamas</span> <a href="#narrow/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/checksum.20errror/near/348559931">said</a>:</p>
<blockquote>
<p>A separate script is of course better. But I still would consider this as a temporary debug setup, nothing we should live with permanently.</p>
<p>Have you a link to a build log which generates a faulty checksum?</p>
</blockquote>
<p>The existing logs don't log the sha256 that they generated so there is nothing to check.</p>



<a name="348560533"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/checksum%20errror/near/348560533" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/checksum.20errror.html#348560533">(Apr 11 2023 at 20:55)</a>:</h4>
<p>But, I could re-run -the build....</p>



<a name="348560579"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/checksum%20errror/near/348560579" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kees Verruijt <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/checksum.20errror.html#348560579">(Apr 11 2023 at 20:55)</a>:</h4>
<p><a href="https://app.circleci.com/pipelines/github/opencpn-radar-pi/radar_pi/360/workflows/0cd324b0-e546-4d38-9b3e-a738bdc80bf3/jobs/2548">https://app.circleci.com/pipelines/github/opencpn-radar-pi/radar_pi/360/workflows/0cd324b0-e546-4d38-9b3e-a738bdc80bf3/jobs/2548</a></p>



<a name="348560838"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/checksum%20errror/near/348560838" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kees Verruijt <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/checksum.20errror.html#348560838">(Apr 11 2023 at 20:57)</a>:</h4>
<p>has both flaws.</p>



<a name="348560925"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/checksum%20errror/near/348560925" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/checksum.20errror.html#348560925">(Apr 11 2023 at 20:57)</a>:</h4>
<p>Thanks. It's late, and tomorrow is filled with personal stuff. But Thursday...</p>



<a name="348562155"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/checksum%20errror/near/348562155" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kees Verruijt <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/checksum.20errror.html#348562155">(Apr 11 2023 at 21:06)</a>:</h4>
<p>I'm pretty busy starting Thursday afternoon for a while, some time might be available on Monday or Tuesday and then another busy week starting Wednesday, so I will polish this up, send you an updated PR and then I suggest you pick &amp; choose what you want. If you don't want checksum checks then please at least add a log of the checksum. Also, if you don't pick the <code>-j1</code> for flatpak then fix the bloody build, as it is driving me crazy. Here is an example of a failed build: <a href="https://app.circleci.com/pipelines/github/opencpn-radar-pi/radar_pi/368/workflows/2f997098-40cf-401a-b67c-1edd520d21f9/jobs/2677">https://app.circleci.com/pipelines/github/opencpn-radar-pi/radar_pi/368/workflows/2f997098-40cf-401a-b67c-1edd520d21f9/jobs/2677</a> </p>
<p>note the actual error is here this time:</p>
<div class="codehilite"><pre><span></span><code>[ 53%] Linking CXX static library libNMEA0183.a
cd /run/build/radar/_flatpak_build/libs/nmea0183 &amp;&amp; /usr/bin/cmake -P CMakeFiles/NMEA0183.dir/cmake_clean_target.cmake
/usr/bin/ranlib libNMEA0183.a
cd /run/build/radar/_flatpak_build/libs/nmea0183 &amp;&amp; /usr/bin/cmake -E cmake_link_script CMakeFiles/NMEA0183.dir/link.txt --verbose=1
/usr/bin/ranlib: &#39;libNMEA0183.a&#39;: No such file
</code></pre></div>



<a name="348562763"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/checksum%20errror/near/348562763" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kees Verruijt <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/checksum.20errror.html#348562763">(Apr 11 2023 at 21:11)</a>:</h4>
<p>Also, I think the <code>wx32</code> verification is worthwhile: it turned out that for months we may have shipped packages advertising wx32 that didn't contain it or the other way around. Also the Debian-wx32;11;armhf and Debian;11;armhf builds trampled over each others results (that would be a fine way to mess with build checksums, if it would pick the tar from one build and the xml from the other...)</p>



<a name="348563202"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/checksum%20errror/near/348563202" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/checksum.20errror.html#348563202">(Apr 11 2023 at 21:14)</a>:</h4>
<p>Yup, will do. I suppose you run into this since radar_pi is one of the largest plugins which puts more stress on the build system than others.</p>
<p>That said, that particular error looks like a missing dependency error, cmake shouls be able to handle parallel builds. The reason we have limited the job count in other places has been that the builder could not handle the load, they basically ran out of memory.</p>
<blockquote>
<p>Also, I think the wx32 verification is worthwhile: it turned out that for months we may have shipped packages advertising wx32 that didn't contain it or the other way around.</p>
</blockquote>
<p>Perhaps. But in that case in cmake code so local builds also benefits from it. In a longer perspective my idea is that we should make an automated "is-plugin-loadable" test using the new  CLI utility, this should reveal errors like this but also other bad apples in the catalog.</p>



<a name="348564856"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/checksum%20errror/near/348564856" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kees Verruijt <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/checksum.20errror.html#348564856">(Apr 11 2023 at 21:28)</a>:</h4>
<p>That is a neat idea, have OpenCPN test it during the build: download the targeted OpenCPN version and check it using that. Cool!</p>



<a name="348564959"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/checksum%20errror/near/348564959" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/checksum.20errror.html#348564959">(Apr 11 2023 at 21:29)</a>:</h4>
<p>hm... the helicopter view is that we have both the SD and the TP templates around.  Of course we try to fix SD to the best of our ability, but we are not the only one around.</p>
<p>Perhaps a better strategy would be to add these tests (checksum,  wx32) to the checks which runs automatically on each PR  to the catalog i. e., the OPenCPN/plugins project. This would catch all bad plugins before they was included in the catalog however they was created</p>



<a name="348565338"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/checksum%20errror/near/348565338" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/checksum.20errror.html#348565338">(Apr 11 2023 at 21:32)</a>:</h4>
<p>As for SD, local test for the checksum I think a separate script would be the best. The best would if it was not referenced at all by the overall build, it could be run as a separate step in circleci/config. That would make it easy to only invoke it if needed i. e., for Debian Bullseye builds.</p>



<a name="348565819"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/checksum%20errror/near/348565819" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kees Verruijt <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/checksum.20errror.html#348565819">(Apr 11 2023 at 21:36)</a>:</h4>
<p><span class="user-mention silent" data-user-id="399510">Alec Leamas</span> <a href="#narrow/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/checksum.20errror/near/348564959">said</a>:</p>
<blockquote>
<p>hm... the helicopter view is that we have both the SD and the TP templates around.  Of course we try to fix SD to the best of our ability, but we are not the only one around.</p>
<p>Perhaps a better strategy would be to add these tests (checksum,  wx32) to the checks which runs automatically on each PR  to the catalog i. e., the OPenCPN/plugins project. This would catch all bad plugins before they was included in the catalog however they was created</p>
</blockquote>
<p>Hmm yes indeed. Today, once I started pushing builds into <code>radar_pi:unstable</code> on cloudsmith it took more than 20 minutes to be download-able. So we can't realistically check the catalog from the CI build.</p>
<p>I will remove the <a href="http://verify-result.sh">verify-result.sh</a> script and add it to my own repo only, for now, so I don't f***k up. Then when I have time I will generate a PR for OpenCPN/Plugins, that is a much better idea.</p>



<a name="348576473"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/checksum%20errror/near/348576473" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kees Verruijt <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/checksum.20errror.html#348576473">(Apr 11 2023 at 22:58)</a>:</h4>
<p>OK the PR for SD is now _much_ smaller and ready as far as I am concerned. Time for Zzzz.</p>



<a name="349059654"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/checksum%20errror/near/349059654" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kees Verruijt <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/checksum.20errror.html#349059654">(Apr 13 2023 at 09:55)</a>:</h4>
<p>Oooh now the plot thickens: the checksum in the OpenCPN/plugins code now fails the other way around! Sorry I need to leave so just quickly:</p>
<ul>
<li>automated check on my PR says:</li>
</ul>
<p>metadata/Radar-v5.5.0-msvc-wx32-10.xml: Radar-v5.5.0_msvc-wx32-10-win32.tar.gz<br>
        metadata checksum: '<a href="https://github.com/opencpn/OpenCPN/commit/b72087867be4b73dde1b4aeb1980fa05c2d45de06908df2a64cc9be3a7cc9745">b72087867be4b73dde1b4aeb1980fa05c2d45de06908df2a64cc9be3a7cc9745</a>'<br>
        computed checksum: '<a href="https://github.com/opencpn/OpenCPN/commit/cabc6ebdb5f5b84c4df1cd53c0505476cce0d2cddd7e126f22cfb26426773d9f">cabc6ebdb5f5b84c4df1cd53c0505476cce0d2cddd7e126f22cfb26426773d9f</a>'</p>
<p>BUT on my Mac, on the downloaded .tar.gz file:</p>
<p>$ sha256sum Radar-v5.5.0_msvc-wx32-10-win32.tar.gz<br>
<a href="https://github.com/opencpn/OpenCPN/commit/b72087867be4b73dde1b4aeb1980fa05c2d45de06908df2a64cc9be3a7cc9745">b72087867be4b73dde1b4aeb1980fa05c2d45de06908df2a64cc9be3a7cc9745</a>  Radar-v5.5.0_msvc-wx32-10-win32.tar.gz</p>
<p>And my original generated metadata contained that same checksum:</p>
<p>metadata/Radar-v5.5.0-msvc-wx32-10.xml: Radar-v5.5.0_msvc-wx32-10-win32.tar.gz<br>
        metadata checksum: '<a href="https://github.com/opencpn/OpenCPN/commit/cabc6ebdb5f5b84c4df1cd53c0505476cce0d2cddd7e126f22cfb26426773d9f">cabc6ebdb5f5b84c4df1cd53c0505476cce0d2cddd7e126f22cfb26426773d9f</a>'<br>
        computed checksum: '<a href="https://github.com/opencpn/OpenCPN/commit/b72087867be4b73dde1b4aeb1980fa05c2d45de06908df2a64cc9be3a7cc9745">b72087867be4b73dde1b4aeb1980fa05c2d45de06908df2a64cc9be3a7cc9745</a>'</p>
<p>So it seems we have multiple checksum implementations running to different results on different platforms...</p>



<a name="349062082"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/checksum%20errror/near/349062082" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kees Verruijt <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/checksum.20errror.html#349062082">(Apr 13 2023 at 10:05)</a>:</h4>
<p>I will re-run this on Debian 11 amd64 later, to see whether that makes a difference.</p>



<a name="349205397"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/checksum%20errror/near/349205397" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kees Verruijt <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/checksum.20errror.html#349205397">(Apr 13 2023 at 20:25)</a>:</h4>
<p>OK, so I came back a few hours later after some other business. Guess what? It's bloody cloudsmith. I pushed a 5.5.0 to our prod repo a day ago, by accident, then earlier today I pushed a new tag to github and this in turn pushed to cloudsmith. But cloudsmith, for hours, kept showing the original file _depending on where you accessed it from_. So when I downloaded it, I got the new file. But if github actions downloaded it, it got the original file. Bad bad bad. </p>
<p>So my conclusion is:</p>
<ul>
<li>the SHA algorithms work everywhere. (To be expected, really.)</li>
<li><a href="http://cloudsmith.io">cloudsmith.io</a> can be a pain and show up old files for hours. So if you re-push a particular tag/file, be prepared to wait a long time before it shows up in all locations, even if it works for you. </li>
</ul>
<p>Sigh.</p>
<p>Anyway, 1) issue with SHA checksums now "known" AFAIAC.  2) Dave, you can pull PR for master plugins.</p>



<a name="349205638"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/checksum%20errror/near/349205638" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kees Verruijt <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/checksum.20errror.html#349205638">(Apr 13 2023 at 20:26)</a>:</h4>
<p>3) Please run the validator script once you pull, just as a precaution that it works in your neck of the woods as well. Maybe CloudSmith has an even longer delay elsewhere.</p>



<a name="349205906"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/checksum%20errror/near/349205906" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kees Verruijt <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/checksum.20errror.html#349205906">(Apr 13 2023 at 20:28)</a>:</h4>
<p>Any feedback as to why we're not using github for storing binaries? I see how cloudsmith is useful for test releases (without tags), but anything tagged could just as well go on github?</p>



<a name="349217640"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/checksum%20errror/near/349217640" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/checksum.20errror.html#349217640">(Apr 13 2023 at 21:45)</a>:</h4>
<p>Is there any other problem here than re-publishing two different builds with the same version? Because thIs is not supposed to happen using the SD templates.</p>
<p>Tagged builds should be unique. It is possible to tag two different builds with the same tag, but we don't do that, do we?</p>
<p>Untagged builds has a unique version which includes the git hash, so they should also be unique.</p>
<p>So, what is this about, really?</p>



<a name="349268435"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/checksum%20errror/near/349268435" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/checksum.20errror.html#349268435">(Apr 14 2023 at 05:38)</a>:</h4>
<p>6 messages were moved here from <a class="stream-topic" data-stream-id="332168" href="/#narrow/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/wx3.2E2.2E2.20compatibility">#Master - 5.8.0  (was: comms) &gt; wx3.2.2 compatibility</a> by <span class="user-mention silent" data-user-id="399510">Alec Leamas</span>.</p>



<a name="349282641"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/checksum%20errror/near/349282641" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kees Verruijt <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/checksum.20errror.html#349282641">(Apr 14 2023 at 07:03)</a>:</h4>
<p>In an ideal world you won't push the same tag twice, but in practice ... certainly this time I did!</p>



<a name="349354048"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master%20-%205.8.0%20%20%28was%3A%20comms%29/topic/checksum%20errror/near/349354048" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/checksum.20errror.html#349354048">(Apr 14 2023 at 11:56)</a>:</h4>
<p>Well, that's the reason. Most build systems blocks this for good reasons, and I don't see that cloudsmith does anything wrong here. Any CDN network will have these kind of synchronization delays, and there are certainly no promises.</p>
<p>Basically,  I'd say that if you push two different versions of the same tag you are in unspecified territory without much of defined behaviour.</p>



<hr><p>Last updated: Feb 17 2025 at 19:09 UTC</p>
</html>