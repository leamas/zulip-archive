<html>
<head><meta charset="utf-8"><title>HEADS UP: All source files being moved · Master · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://leamas.github.io/zulip-archive/stream/332168-Master/index.html">Master</a></h2>
<h3>Topic: <a href="https://leamas.github.io/zulip-archive/stream/332168-Master/topic/HEADS.20UP.3A.20All.20source.20files.20being.20moved.html">HEADS UP: All source files being moved</a></h3>

<hr>

<base href="https://opencpn.zulipchat.com">

<head><link href="https://leamas.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="410273423"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master/topic/HEADS%20UP%3A%20All%20source%20files%20being%20moved/near/410273423" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master/topic/HEADS.20UP.3A.20All.20source.20files.20being.20moved.html#410273423">(Dec 28 2023 at 10:24)</a>:</h4>
<p>This is about  <a href="https://github.com/opencpn/OpenCPN/issues/3540">#3540</a>. For reasons desscribed therein the PR moves basically all source files to new locations. This does not affect build procedures, the cmake interface is the same. But it will affect poor developers when trying to find sources which no longer are in the usual locations.</p>
<p>If you think this is a bad idea this is the time to speak up, preferably  directly in the PR.  </p>
<p><span class="user-mention" data-user-id="517002">@Dave Register</span> <br>
<span class="user-mention" data-user-id="573239">@Pavel Kalian</span> <br>
<span class="user-mention" data-user-id="522486">@Håkan Svensson</span> <br>
<span class="user-mention" data-user-id="522729">@Dan Dickey</span></p>



<a name="410282486"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master/topic/HEADS%20UP%3A%20All%20source%20files%20being%20moved/near/410282486" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master/topic/HEADS.20UP.3A.20All.20source.20files.20being.20moved.html#410282486">(Dec 28 2023 at 11:43)</a>:</h4>
<p>Since mentioned...<br>
No comments. As long Git and VS will find what's needed I'm happy. Any small changes I do are based on what's already there so this will not brake "old habits" for me. Dave and Pavel may have to reorganize there minds?</p>



<a name="410294856"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master/topic/HEADS%20UP%3A%20All%20source%20files%20being%20moved/near/410294856" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master/topic/HEADS.20UP.3A.20All.20source.20files.20being.20moved.html#410294856">(Dec 28 2023 at 13:40)</a>:</h4>
<p><span class="user-mention" data-user-id="522486">@Håkan Svensson</span>  Thanks for  feedback! </p>
<p>Pavel and Dave are basically on board, currently working with good input from Pavel</p>



<a name="410403382"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master/topic/HEADS%20UP%3A%20All%20source%20files%20being%20moved/near/410403382" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master/topic/HEADS.20UP.3A.20All.20source.20files.20being.20moved.html#410403382">(Dec 29 2023 at 08:08)</a>:</h4>
<p>Soon merged to my local branch -  but kind of a boring work beforehand...<br>
A lot whitespaces and new lines at EOF to correct.</p>
<div class="codehilite"><pre><span></span><code>C:\Builds\OCPN\OpenCPN&gt;git commit -a -m &quot;merge master&quot;
CMakeLists.txt:1128: trailing whitespace.
+elseif (QT_ANDROID)
CMakeLists.txt:1309: trailing whitespace.
+elseif (QT_ANDROID)
CMakeLists.txt:2972: trailing whitespace.
+endif ()
android/androidUTIL.cpp:5640: new blank line at EOF.
cli/CMakeLists.txt:14: trailing whitespace.
+      ${PROJECT_SOURCE_DIR}/gui/include
cli/CMakeLists.txt:87: trailing whitespace.
+endif ()
cmake/FindPortaudio.cmake:38: trailing whitespace.
+# FIXME: Needs indentation...
fix-includes:29: trailing whitespace.
+##
gui/include/gui/color_handler.h:22: new blank line at EOF.
gui/include/gui/gui_lib.h:35: trailing whitespace.
+#include &lt;wx/utils.h&gt;
gui/include/gui/ocpn_app.h:56: trailing whitespace.
+#endif
gui/include/gui/ocpn_app.h:81: trailing whitespace.
+private:
gui/include/gui/ocpn_app.h:93: trailing whitespace.
+  int m_exitcode;  ///&lt; by default -2. Otherwise, forces exit(exit_code)
gui/include/gui/rest_server_gui.h:136: new blank line at EOF.
gui/include/gui/route_ctx_factory.h:44: trailing whitespace.
+        [](wxString guid) {
gui/include/gui/routeman_gui.h:39: trailing whitespace.
+  bool UpdateProgress();
gui/src/ConfigMgr.cpp:973: trailing whitespace.
+
gui/src/color_handler.cpp:103: new blank line at EOF.
gui/src/glChartCanvas.cpp:5082: leftover conflict marker
gui/src/ocpn_app.cpp:2232: new blank line at EOF.
gui/src/ocpn_print.cpp:153: new blank line at EOF.
gui/src/options.cpp:2222: trailing whitespace.
+  pXTEmultplyCheckbox =
gui/src/options.cpp:2223: trailing whitespace.
+      new wxCheckBox(itemPanelShip, wxID_ANY,
gui/src/options.cpp:2227: trailing whitespace.
+
gui/src/options.cpp:2229: trailing whitespace.
+      new wxStaticText(itemPanelShip, wxID_ANY,
gui/src/options.cpp:2232: trailing whitespace.
+  dispOwnShipCalcOptionsGrid-&gt;Add(m_pXTEMultiplicator, 1, wxALIGN_RIGHT | wxALL,
gui/src/options.cpp:2235: trailing whitespace.
+
gui/src/options.cpp:7039: trailing whitespace.
+
gui/src/peer_client.cpp:239: trailing whitespace.
+  chunk.size = 0;
gui/src/peer_client.cpp:271: trailing whitespace.
+  chunk.size = 0;
gui/src/peer_client.cpp:323: trailing whitespace.
+
gui/src/route_point_gui.cpp:927: new blank line at EOF.
gui/src/track_gui.cpp:268: new blank line at EOF.
gui/src/waypointman_gui.cpp:46: trailing whitespace.
+
gui/src/waypointman_gui.cpp:729: new blank line at EOF.
libs/s52plib/CMakeLists.txt:40: trailing whitespace.
+  S52PLIB PRIVATE
libs/sound/cmake/FindPortaudio.cmake:38: trailing whitespace.
+# FIXME: Needs indentation...
model/include/model/cli_platform.h:26: new blank line at EOF.
model/include/model/dbus_instance_check.h:29: trailing whitespace.
+public:
model/include/model/dbus_server.h:34: trailing whitespace.
+ * \file
model/include/model/dbus_server.h:36: trailing whitespace.
+ * DBus interface header file.
model/include/model/dbus_server.h:120: trailing whitespace.
+  void WaitUntilValid() override;
model/include/model/ipc_api.h:67: trailing whitespace.
+
model/include/model/ipc_api.h:88: trailing whitespace.
+  /**
model/include/model/ipc_api.h:120: trailing whitespace.
+   void Serve() {}
model/include/model/json_event.h:28: new blank line at EOF.
model/include/model/local_api.h:20: trailing whitespace.
+/**
model/include/model/local_api.h:55: trailing whitespace.
+  const char* str() { return reason.c_str(); }
model/include/model/local_api.h:80: trailing whitespace.
+    get_rest_api_endpoint_cb = cb;
model/include/model/local_api.h:93: trailing whitespace.
+public:
model/include/model/plugin_blacklist.h:34: trailing whitespace.
+#ifdef major
model/src/base_platform.cpp:944: new blank line at EOF.
model/src/comm_decoder.cpp:496: new blank line at EOF.
model/src/comm_drv_n0183_android_bt.cpp:255: new blank line at EOF.
model/src/comm_drv_n2k.cpp:53: new blank line at EOF.
model/src/comm_drv_n2k_serial.cpp:238: space before tab in indent.
+       N2kMsg.SetPGN(126993L);
model/src/comm_drv_n2k_serial.cpp:1192: new blank line at EOF.
model/src/comm_drv_signalk.cpp:48: new blank line at EOF.
model/src/comm_drv_signalk_net.cpp:523: new blank line at EOF.
model/src/conn_params.cpp:426: new blank line at EOF.
model/src/cutil.cpp:87: new blank line at EOF.
model/src/dbus_client.cpp:55: trailing whitespace.
+  bool ok(error == 0 &amp;&amp; g_variant_is_container(result)
model/src/dbus_client.cpp:75: trailing whitespace.
+  bool ok(error == 0 &amp;&amp; g_variant_is_container(result)
model/src/dbus_client.cpp:95: trailing whitespace.
+  bool ok(error == 0 &amp;&amp; g_variant_is_container(result)
model/src/dbus_client.cpp:123: trailing whitespace.
+  bool ok(error == 0 &amp;&amp; g_variant_is_container(result)
model/src/dbus_client.cpp:138: trailing whitespace.
+  else
model/src/dbus_server.cpp:163: new blank line at EOF.
model/src/instance_handler.cpp:47: trailing whitespace.
+
model/src/instance_handler.cpp:48: trailing whitespace.
+  /** Raise current OPenCPN main window to top of GUI application stack. */
model/src/instance_handler.cpp:56: trailing whitespace.
+class StClient : public wxClient {
model/src/instance_handler.cpp:57: trailing whitespace.
+public:
model/src/instance_handler.cpp:58: trailing whitespace.
+  StClient(){};
model/src/instance_handler.cpp:59: trailing whitespace.
+  wxConnectionBase *OnMakeConnection() { return new StConnection; }
model/src/instance_handler.cpp:60: trailing whitespace.
+};
model/src/instance_handler.cpp:61: trailing whitespace.
+
model/src/instance_handler.cpp:76: trailing whitespace.
+    pSet-&gt;LoadAllGPXObjects(!pSet-&gt;IsOpenCPN(), wpt_dups, true);
model/src/instance_handler.cpp:77: trailing whitespace.
+    update_route_mgr_dlg();
model/src/instance_handler.cpp:104: trailing whitespace.
+
model/src/ipc_api.cpp:52: trailing whitespace.
+}
model/src/ipc_api.cpp:60: trailing whitespace.
+  }
model/src/ipc_factories.cpp:34: trailing whitespace.
+#endif
model/src/ipc_factories.cpp:50: trailing whitespace.
+    return std::unique_ptr&lt;LocalClientApi&gt;(new IpcClient);
model/src/ipc_factories.cpp:57: trailing whitespace.
+
model/src/mDNS_query.cpp:499: new blank line at EOF.
model/src/mDNS_service.cpp:406: space before tab in indent.
+       // A/AAAA records mapping &quot;&lt;hostname&gt;.local.&quot; to IPv4/IPv6 addresses
model/src/mDNS_service.cpp:422: space before tab in indent.
+       // Add two test TXT records for our service instance name, will be coalesced into
model/src/mDNS_service.cpp:537: new blank line at EOF.
model/src/macutils.c:250: trailing whitespace.
+ * See https://developer.apple.com/documentation/apple-silicon/about-the-rosetta-translation-environment#Determine-Whether-Your-App-Is-Running-as-a-Translated-Binary
model/src/macutils.c:255: trailing whitespace.
+   if (sysctlbyname(&quot;sysctl.proc_translated&quot;, &amp;ret, &amp;size, NULL, 0) == -1)
model/src/macutils.c:267: trailing whitespace.
+
model/src/macutils.c:268: trailing whitespace.
+    if (sysctlbyname(&quot;hw.optional.arm64&quot;, &amp;ret, &amp;size, NULL, 0) == -1) {
model/src/navutil_base.cpp:805: new blank line at EOF.
model/src/own_ship.cpp:28: trailing whitespace.
+double gLat;
model/src/own_ship.cpp:35: new blank line at EOF.
model/src/pincode.cpp:35: trailing whitespace.
+  unsigned long long compat_val = engine();
model/src/routeman.cpp:460: trailing whitespace.
+       if (m_bArrival) b_arrived = true;
model/src/std_instance_chk.cpp:41: trailing whitespace.
+static int GetLockfilePid(const std::string&amp; path){
model/src/std_instance_chk.cpp:47: trailing whitespace.
+  return  pid;
model/src/std_instance_chk.cpp:49: trailing whitespace.
+
model/src/std_instance_chk.cpp:79: trailing whitespace.
+  }
resources/bitmaps/13xX_svg_src/create_all_13xX.sh:43: new blank line at EOF.
resources/bitmaps/16x16_svg_src/create_all_16x16.sh:37: new blank line at EOF.
resources/bitmaps/28x28_svg_src/create_all_28x28.sh:37: new blank line at EOF.
resources/bitmaps/32x32_svg_src/ribbon/create_all_32x32.sh:37: new blank line at EOF.
resources/bitmaps/other_svg_src/create_opencpn_main_icon.sh:52: new blank line at EOF.
resources/bitmaps/other_svg_src/create_ship.sh:34: new blank line at EOF.
resources/bitmaps/styles.xml:2039: new blank line at EOF.
s57/CMakeLists.txt:17: trailing whitespace.
+  HDRS
s57/CMakeLists.txt:25: trailing whitespace.
+)
s57/CMakeLists.txt:73: trailing whitespace.
+    ${CMAKE_SOURCE_DIR}/gui/include/gui
test/CMakeLists.txt:161: trailing whitespace.
+  target_include_directories(dbus_tests PRIVATE
test/CMakeLists.txt:206: trailing whitespace.
+gtest_add_tests(TARGET tests)
test/CMakeLists.txt:217: trailing whitespace.
+target_include_directories(cli-server PRIVATE
test/CMakeLists.txt:226: trailing whitespace.
+target_include_directories(ipc-client PRIVATE
test/CMakeLists.txt:245: trailing whitespace.
+target_include_directories(wx-instance PRIVATE
test/CMakeLists.txt:267: trailing whitespace.
+  target_include_directories(std-instance PRIVATE
</code></pre></div>



<a name="410410592"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master/topic/HEADS%20UP%3A%20All%20source%20files%20being%20moved/near/410410592" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master/topic/HEADS.20UP.3A.20All.20source.20files.20being.20moved.html#410410592">(Dec 29 2023 at 09:34)</a>:</h4>
<p><span class="user-mention" data-user-id="399510">@Alec Leamas</span>   Builds on Win10 VS2022 when excluded "tests"<br>
Link error:</p>
<div class="codehilite"><pre><span></span><code>18&gt;LINK : fatal error LNK1181: cannot open input file &#39;C:\Builds\OCPN\OpenCPN\cache\buildwin\iphlpapi.lib&#39;
18&gt;Done building project &quot;tests.vcxproj&quot; -- FAILED.
</code></pre></div>



<a name="410412802"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master/topic/HEADS%20UP%3A%20All%20source%20files%20being%20moved/near/410412802" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master/topic/HEADS.20UP.3A.20All.20source.20files.20being.20moved.html#410412802">(Dec 29 2023 at 09:55)</a>:</h4>
<p>hm... the CI build works with tests, it also runs them. So this is about the build environment</p>



<a name="410412965"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master/topic/HEADS%20UP%3A%20All%20source%20files%20being%20moved/near/410412965" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master/topic/HEADS.20UP.3A.20All.20source.20files.20being.20moved.html#410412965">(Dec 29 2023 at 09:56)</a>:</h4>
<p>Yes, the trailing whitespace is a pain. time for a  new round of cmake-format. Putting it  on my list.</p>



<a name="410430226"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master/topic/HEADS%20UP%3A%20All%20source%20files%20being%20moved/near/410430226" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master/topic/HEADS.20UP.3A.20All.20source.20files.20being.20moved.html#410430226">(Dec 29 2023 at 13:00)</a>:</h4>
<p>will need to look into that link error later, but out of time right now.</p>



<a name="410454628"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master/topic/HEADS%20UP%3A%20All%20source%20files%20being%20moved/near/410454628" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master/topic/HEADS.20UP.3A.20All.20source.20files.20being.20moved.html#410454628">(Dec 29 2023 at 17:15)</a>:</h4>
<p><span class="user-mention" data-user-id="522486">@Håkan Svensson</span>  About the missing library: it seems that it is downloaded by win_deps.bat. Can you make a new try after running this?</p>
<p>In hindsight, having this in win_deps.batr is not ideal. We should really try to hancle this in a mre generic way.</p>



<a name="410465836"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master/topic/HEADS%20UP%3A%20All%20source%20files%20being%20moved/near/410465836" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master/topic/HEADS.20UP.3A.20All.20source.20files.20being.20moved.html#410465836">(Dec 29 2023 at 18:53)</a>:</h4>
<p>Yes, there's a link in win_deps.bat so no problem. Wonder why the file disappeared during the merge of  this master code? <br>
Thanks for the hint.</p>



<a name="410523366"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master/topic/HEADS%20UP%3A%20All%20source%20files%20being%20moved/near/410523366" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master/topic/HEADS.20UP.3A.20All.20source.20files.20being.20moved.html#410523366">(Dec 30 2023 at 08:12)</a>:</h4>
<p><span class="user-mention" data-user-id="522486">@Håkan Svensson</span>  I basically never merge anything into master, it's a bad idea since your master will differ from upstream/master (different history).</p>
<p>If you have local changes you want to keep there are two ways to handle it instead, to rebase or get a fresh branch.</p>
<p>Doing a rebase  goes like this:</p>
<div class="codehilite"><pre><span></span><code>    $ git remote update upstream
    $ git rebase upstream/master
</code></pre></div>
<p>If there are conflicts you will need to handle them, much the same as when doing a merge. When completeted you will have your own changes on top on a verbatim copy of upstream/master -- this is what you want. One added benefit is that in case of troubles there is <code>git rebase --abort</code> which resets everything.</p>
<p>A complete, verbatim copy of master :</p>
<div class="codehilite"><pre><span></span><code>    $ git remote update upstream
    $ git checkout some-branch-but-not-master
    $  git fetch -f upstream master:master
</code></pre></div>
<p>This will nuke whatever changes you have locally, such should be saved in other branches. Your master will be an exact copy of upstream/master, something a merge often (but not always) isn't.</p>



<a name="410532583"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master/topic/HEADS%20UP%3A%20All%20source%20files%20being%20moved/near/410532583" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master/topic/HEADS.20UP.3A.20All.20source.20files.20being.20moved.html#410532583">(Dec 30 2023 at 10:25)</a>:</h4>
<p><span class="user-mention" data-user-id="399510">@Alec Leamas</span> I must have expressed it badly.<br>
My master is never touched. Not even with build dependencies. I use master to pull from Github and then merge it into a "myocpn" branch where build environment lives and where I have some small own "hacks*". <br>
If I make some patches to push I use to make a branch from myocpn for trials and commits. When ready I make a branch from master,  cherry-pick the commit(s) and push upstream after a rebase. Use to be clean.</p>
<p>*)One present hack is to immediately  restore a TCP N0183 connection after a Win suspend but that's another story hopefully on the table in a near future?</p>



<a name="410539417"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master/topic/HEADS%20UP%3A%20All%20source%20files%20being%20moved/near/410539417" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Dickey <a href="https://leamas.github.io/zulip-archive/stream/332168-Master/topic/HEADS.20UP.3A.20All.20source.20files.20being.20moved.html#410539417">(Dec 30 2023 at 11:42)</a>:</h4>
<p><span class="user-mention silent" data-user-id="399510">Alec Leamas</span> <a href="#narrow/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/HEADS.20UP.3A.20All.20source.20files.20being.20moved/near/410454628">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="522486">Håkan Svensson</span>  About the missing library: it seems that it is downloaded by win_deps.bat. Can you make a new try after running this?</p>
<p>In hindsight, having this in win_deps.batr is not ideal. We should really try to hancle this in a mre generic way.</p>
</blockquote>
<p><span class="user-mention" data-user-id="399510">@Alec Leamas</span>  Will this dependency stay in win_deps.bat?</p>



<a name="410539864"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master/topic/HEADS%20UP%3A%20All%20source%20files%20being%20moved/near/410539864" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master/topic/HEADS.20UP.3A.20All.20source.20files.20being.20moved.html#410539864">(Dec 30 2023 at 11:49)</a>:</h4>
<p>IMHO we need to find a better, more generic way to handle this since win_deps.bat is only used in the appveyor.bat workflow, right?</p>



<a name="410540112"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master/topic/HEADS%20UP%3A%20All%20source%20files%20being%20moved/near/410540112" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master/topic/HEADS.20UP.3A.20All.20source.20files.20being.20moved.html#410540112">(Dec 30 2023 at 11:52)</a>:</h4>
<p><span class="user-mention" data-user-id="522729">@Dan Dickey</span>  ^</p>



<a name="410550291"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master/topic/HEADS%20UP%3A%20All%20source%20files%20being%20moved/near/410550291" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Dickey <a href="https://leamas.github.io/zulip-archive/stream/332168-Master/topic/HEADS.20UP.3A.20All.20source.20files.20being.20moved.html#410550291">(Dec 30 2023 at 14:44)</a>:</h4>
<p><span class="user-mention silent" data-user-id="399510">Alec Leamas</span> <a href="#narrow/stream/332168-Master---5.2E8.2E0--.28was.3A-comms.29/topic/HEADS.20UP.3A.20All.20source.20files.20being.20moved/near/410539864">said</a>:</p>
<blockquote>
<p>IMHO we need to find a better, more generic way to handle this since win_deps.bat is only used in the appveyor.bat workflow, right?</p>
</blockquote>
<p>Yes, win_deps.bat doesn't work for local builds due to its assumptions about installed tools. But we can use the same dependencies for local building.  I just need to know if a new dependency is added or changed so I can fix the local build script to get the new/changed dependencies.</p>



<a name="410550482"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master/topic/HEADS%20UP%3A%20All%20source%20files%20being%20moved/near/410550482" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master/topic/HEADS.20UP.3A.20All.20source.20files.20being.20moved.html#410550482">(Dec 30 2023 at 14:47)</a>:</h4>
<p>yes, the dependency will stay. </p>
<p>We should really first try to find it using cmake. It seems that many Windows system actually have this available anyway. Havn't digged into where it originates in these cases, though.</p>
<p><a href="https://github.com/opencpn/OpenCPN/issues/3540">#3540</a> was a beast,  this is one of  the loose ends left.</p>



<a name="410623390"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master/topic/HEADS%20UP%3A%20All%20source%20files%20being%20moved/near/410623390" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Dickey <a href="https://leamas.github.io/zulip-archive/stream/332168-Master/topic/HEADS.20UP.3A.20All.20source.20files.20being.20moved.html#410623390">(Dec 31 2023 at 10:24)</a>:</h4>
<p>The file should be found here on most systems:</p>
<p>"%WindowsSdkDir%\lib\%WindowsSdkLibVersion%\um\x86\iphlpapi.lib"</p>
<p>If that is where it is on the CI build system then maybe we could just add "%WindowsSdkDir%\lib\%WindowsSdkLibVersion%\um\x86\" to the lib search path in cmakelists.txt.</p>



<a name="410623573"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master/topic/HEADS%20UP%3A%20All%20source%20files%20being%20moved/near/410623573" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Dickey <a href="https://leamas.github.io/zulip-archive/stream/332168-Master/topic/HEADS.20UP.3A.20All.20source.20files.20being.20moved.html#410623573">(Dec 31 2023 at 10:27)</a>:</h4>
<p>The header is here:</p>
<p>"%WindowSdkDir%\Include\%WindowsSdkLibVersion%\um"</p>



<a name="410625414"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master/topic/HEADS%20UP%3A%20All%20source%20files%20being%20moved/near/410625414" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/332168-Master/topic/HEADS.20UP.3A.20All.20source.20files.20being.20moved.html#410625414">(Dec 31 2023 at 11:00)</a>:</h4>
<p>Correct! On my W10:</p>
<div class="codehilite"><pre><span></span><code>C:\Builds\OCPN\OpenCPN&gt;cd %WindowsSdkDir%\lib\%WindowsSdkLibVersion%\um\x86\

C:\Program Files (x86)\Windows Kits\10\Lib\10.0.22621.0\um\x86&gt;dir *phlpapi.lib
....
2023-09-30  00:58            79 930 iphlpapi.lib
               1 File(s)         79 930 bytes
               0 Dir(s)  53 438 164 992 bytes free
</code></pre></div>



<a name="410629228"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master/topic/HEADS%20UP%3A%20All%20source%20files%20being%20moved/near/410629228" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master/topic/HEADS.20UP.3A.20All.20source.20files.20being.20moved.html#410629228">(Dec 31 2023 at 12:04)</a>:</h4>
<p>We really need to  use  cmake here: <code>find_library()</code> and <code>find_path()</code>. But first, the new year is looming and I am the host. Busy in the kitchen...</p>



<a name="410634070"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master/topic/HEADS%20UP%3A%20All%20source%20files%20being%20moved/near/410634070" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Dickey <a href="https://leamas.github.io/zulip-archive/stream/332168-Master/topic/HEADS.20UP.3A.20All.20source.20files.20being.20moved.html#410634070">(Dec 31 2023 at 13:28)</a>:</h4>
<p>I don't see how cmake can help here.  It will need a hint from the environment variable %WindowsSkdDir% at least which must be present for cmake to find it.  And if it is present then we already know where is the library. If that variable is not present, cmake will never find the library except by brute force search of the entire file system which seems wrong.</p>



<hr><p>Last updated: Nov 19 2024 at 17:43 UTC</p>
</html>