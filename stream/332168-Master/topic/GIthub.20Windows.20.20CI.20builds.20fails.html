<html>
<head><meta charset="utf-8"><title>GIthub Windows  CI builds fails · Master · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://leamas.github.io/zulip-archive/stream/332168-Master/index.html">Master</a></h2>
<h3>Topic: <a href="https://leamas.github.io/zulip-archive/stream/332168-Master/topic/GIthub.20Windows.20.20CI.20builds.20fails.html">GIthub Windows  CI builds fails</a></h3>

<hr>

<base href="https://opencpn.zulipchat.com">

<head><link href="https://leamas.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="423996766"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master/topic/GIthub%20Windows%20%20CI%20builds%20fails/near/423996766" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master/topic/GIthub.20Windows.20.20CI.20builds.20fails.html#423996766">(Feb 29 2024 at 11:07)</a>:</h4>
<p>Lately, the Github windows builds has started to fail. Log: <a href="https://github.com/leamas/OpenCPN/actions/runs/8094082558/job/22118028120">https://github.com/leamas/OpenCPN/actions/runs/8094082558/job/22118028120</a></p>
<p>Relevant  piece below. Seems that the standard cmake FindGettext.cmake does not locate the gettext installed by choco for some reason (the gettext installation looks OK)</p>
<div class="codehilite"><pre><span></span><code>CMake Error at C:/Program Files/Microsoft Visual Studio/2022/Enterprise/Common7/IDE/CommonExtensions/Microsoft/CMake/CMake/share/cmake-3.28/Modules/FindPackageHandleStandardArgs.cmake:230 (message):
  Could NOT find Gettext (missing: GETTEXT_MSGMERGE_EXECUTABLE
  GETTEXT_MSGFMT_EXECUTABLE)
Call Stack (most recent call first):
  C:/Program Files/Microsoft Visual Studio/2022/Enterprise/Common7/IDE/CommonExtensions/Microsoft/CMake/CMake/share/cmake-3.28/Modules/FindPackageHandleStandardArgs.cmake:600 (_FPHSA_FAILURE_MESSAGE)
  C:/Program Files/Microsoft Visual Studio/2022/Enterprise/Common7/IDE/CommonExtensions/Microsoft/CMake/CMake/share/cmake-3.28/Modules/FindGettext.cmake:81 (FIND_PACKAGE_HANDLE_STANDARD_ARGS)
  CMakeLists.txt:1097 (find_package)
</code></pre></div>



<a name="423996866"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master/topic/GIthub%20Windows%20%20CI%20builds%20fails/near/423996866" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master/topic/GIthub.20Windows.20.20CI.20builds.20fails.html#423996866">(Feb 29 2024 at 11:08)</a>:</h4>
<p><span class="user-mention" data-user-id="573239">@Pavel Kalian</span>  <span class="user-mention" data-user-id="522729">@Dan Dickey</span>  <span class="user-mention" data-user-id="522486">@Håkan Svensson</span>  <span class="user-mention" data-user-id="517002">@Dave Register</span>  ^  Any clue?</p>



<a name="424000366"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master/topic/GIthub%20Windows%20%20CI%20builds%20fails/near/424000366" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pavel Kalian <a href="https://leamas.github.io/zulip-archive/stream/332168-Master/topic/GIthub.20Windows.20.20CI.20builds.20fails.html#424000366">(Feb 29 2024 at 11:31)</a>:</h4>
<p>No idea, I have tried to look at it when it started yesterday, but Chocolatey does not even install poedit on my Windows VM...</p>



<a name="424002626"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master/topic/GIthub%20Windows%20%20CI%20builds%20fails/near/424002626" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master/topic/GIthub.20Windows.20.20CI.20builds.20fails.html#424002626">(Feb 29 2024 at 11:46)</a>:</h4>
<p>Perhaps about  cmake version. My successful builds is on cmake  3.27.2-msvc1, the failing on  3.28.0-msvc1 i. e.,  the github builder image is updated</p>



<a name="424003220"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master/topic/GIthub%20Windows%20%20CI%20builds%20fails/near/424003220" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pavel Kalian <a href="https://leamas.github.io/zulip-archive/stream/332168-Master/topic/GIthub.20Windows.20.20CI.20builds.20fails.html#424003220">(Feb 29 2024 at 11:50)</a>:</h4>
<p>Not that, I have the same up to date version here and everything works</p>



<a name="424004237"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master/topic/GIthub%20Windows%20%20CI%20builds%20fails/near/424004237" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master/topic/GIthub.20Windows.20.20CI.20builds.20fails.html#424004237">(Feb 29 2024 at 11:57)</a>:</h4>
<p>where is your gettext package installed?</p>



<a name="424005832"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master/topic/GIthub%20Windows%20%20CI%20builds%20fails/near/424005832" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master/topic/GIthub.20Windows.20.20CI.20builds.20fails.html#424005832">(Feb 29 2024 at 12:08)</a>:</h4>
<p>For me, it is on like C:\Program Files (x86)\Poedit\Gettexttools\bin\msgfmt.exe , and cmake finds it. </p>
<p>This is a location not that  easy to guess for cmake, but perhaps it finds it because it's on %PATH%.  In any case, it should find  it given some hints.</p>



<a name="424006107"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master/topic/GIthub%20Windows%20%20CI%20builds%20fails/near/424006107" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pavel Kalian <a href="https://leamas.github.io/zulip-archive/stream/332168-Master/topic/GIthub.20Windows.20.20CI.20builds.20fails.html#424006107">(Feb 29 2024 at 12:10)</a>:</h4>
<p>I have a few too many in different locations (Poedit, OS4Geo, some more from God knows where)...</p>



<a name="424006215"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master/topic/GIthub%20Windows%20%20CI%20builds%20fails/near/424006215" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master/topic/GIthub.20Windows.20.20CI.20builds.20fails.html#424006215">(Feb 29 2024 at 12:10)</a>:</h4>
<p>If you look in CmakeCache.txt you should see what it uses?</p>



<a name="424006656"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master/topic/GIthub%20Windows%20%20CI%20builds%20fails/near/424006656" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pavel Kalian <a href="https://leamas.github.io/zulip-archive/stream/332168-Master/topic/GIthub.20Windows.20.20CI.20builds.20fails.html#424006656">(Feb 29 2024 at 12:13)</a>:</h4>
<p>Currently the one that came with Git (But that may be because I uninstalled Poedit). As I said, a few too many..</p>



<a name="424008317"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master/topic/GIthub%20Windows%20%20CI%20builds%20fails/near/424008317" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master/topic/GIthub.20Windows.20.20CI.20builds.20fails.html#424008317">(Feb 29 2024 at 12:25)</a>:</h4>
<p>... and git is on your %PATH% as well, for sure. I have time for a single try, here we go....</p>



<a name="424009711"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master/topic/GIthub%20Windows%20%20CI%20builds%20fails/near/424009711" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pavel Kalian <a href="https://leamas.github.io/zulip-archive/stream/332168-Master/topic/GIthub.20Windows.20.20CI.20builds.20fails.html#424009711">(Feb 29 2024 at 12:34)</a>:</h4>
<p>Yes, and so was Poedit for years and so are many other things. This is not a good reference environment...</p>



<a name="424012160"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master/topic/GIthub%20Windows%20%20CI%20builds%20fails/near/424012160" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master/topic/GIthub.20Windows.20.20CI.20builds.20fails.html#424012160">(Feb 29 2024 at 12:50)</a>:</h4>
<p>out of time. Tried patch below to no avail, still does not find msgmerge</p>
<div class="codehilite"><pre><span></span><code>diff --git a/CMakeLists.txt b/CMakeLists.txt
index 52e01f61e..06443de26 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -1094,6 +1094,15 @@ if (APPLE)
   endif ()
 endif ()

+if (WIN32)
+  find_package(Git)
+  if (Git_FOUND)
+    get_filename_component(GIT_DIR ${GIT_EXECUTABLE} DIRECTORY)
+    get_filename_component(GIT_DIR ${GIT_DIR} DIRECTORY)
+    set(Gettext_ROOT ${GIT_DIR}/usr/bin)
+    message(STATUS &quot;Adding ${Gettext_ROOT} to gettext search path&quot;)
+  endif ()
+endif ()
 find_package(Gettext REQUIRED)

 add_subdirectory(libs/ssl_sha1)
</code></pre></div>



<a name="424102981"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master/topic/GIthub%20Windows%20%20CI%20builds%20fails/near/424102981" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master/topic/GIthub.20Windows.20.20CI.20builds.20fails.html#424102981">(Feb 29 2024 at 20:33)</a>:</h4>
<p><span class="user-mention" data-user-id="573239">@Pavel Kalian</span>  <a href="https://github.com/opencpn/OpenCPN/commit/5746940dbb6">5746940dbb6</a> fixes it for now. Thanks!</p>



<a name="424103215"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master/topic/GIthub%20Windows%20%20CI%20builds%20fails/near/424103215" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pavel Kalian <a href="https://leamas.github.io/zulip-archive/stream/332168-Master/topic/GIthub.20Windows.20.20CI.20builds.20fails.html#424103215">(Feb 29 2024 at 20:34)</a>:</h4>
<p>Yes, but I'm not very smart as for the reason why it stopped working. Doing anything on Windows is such a pain :)</p>



<a name="424103244"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/332168-Master/topic/GIthub%20Windows%20%20CI%20builds%20fails/near/424103244" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/332168-Master/topic/GIthub.20Windows.20.20CI.20builds.20fails.html#424103244">(Feb 29 2024 at 20:34)</a>:</h4>
<p>Indeed it is.</p>



<hr><p>Last updated: Jan 24 2025 at 09:29 UTC</p>
</html>