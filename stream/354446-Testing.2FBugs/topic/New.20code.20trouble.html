<html>
<head><meta charset="utf-8"><title>New code trouble · Testing/Bugs · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://leamas.github.io/zulip-archive/stream/354446-Testing.2FBugs/index.html">Testing/Bugs</a></h2>
<h3>Topic: <a href="https://leamas.github.io/zulip-archive/stream/354446-Testing.2FBugs/topic/New.20code.20trouble.html">New code trouble</a></h3>

<hr>

<base href="https://opencpn.zulipchat.com">

<head><link href="https://leamas.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="540172457"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/354446-Testing/Bugs/topic/New%20code%20trouble/near/540172457" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/354446-Testing.2FBugs/topic/New.20code.20trouble.html#540172457">(Sep 18 2025 at 08:14)</a>:</h4>
<p><span class="user-mention" data-user-id="399510">@Alec Leamas</span> <br>
After <a href="https://github.com/opencpn/OpenCPN/issues/4770">#4770</a> O don't start.<br>
Debug:<br>
In:C:\Program Files\Microsoft Visual Studio\2022\Community\VC\Tools\MSVC\14.44.35207\include\vector</p>
<p><a href="/user_uploads/33951/3Wq5MwNzg77kUg7BoqXB-03A/bild.png">bild.png</a><br>
Call stack</p>
<div class="message_inline_image"><a href="/user_uploads/33951/3Wq5MwNzg77kUg7BoqXB-03A/bild.png" title="bild.png"><img data-original-content-type="image/png" data-original-dimensions="916x473" src="/user_uploads/thumbnail/33951/3Wq5MwNzg77kUg7BoqXB-03A/bild.png/840x560.webp"></a></div><div class="codehilite"><pre><span></span><code>&gt;   opencpn.exe!std::vector&lt;int,std::allocator&lt;int&gt;&gt;::_Emplace_reallocate&lt;int const &amp;&gt;(int * const _Whereptr, const int &amp; &lt;_Val_0&gt;) Line 903    C++
    [Inline Frame] opencpn.exe!std::vector&lt;int,std::allocator&lt;int&gt;&gt;::_Emplace_one_at_back(const int &amp;) Line 848 C++
    [Inline Frame] opencpn.exe!std::vector&lt;int,std::allocator&lt;int&gt;&gt;::push_back(const int &amp; _Val) Line 933   C++
    opencpn.exe!Quilt::Compose(const ViewPort &amp; vp_in) Line 2440    C++
    opencpn.exe!ChartCanvas::SetViewPoint(double lat, double lon, double scale_ppm, double skew, double rotation, int projection, bool b_adjust, bool b_refresh) Line 5526  C++
    opencpn.exe!ChartCanvas::DoCanvasUpdate() Line 1590 C++
    opencpn.exe!MyFrame::DoChartUpdate() Line 6263  C++
    opencpn.exe!MyApp::OnInit() Line 1544   C++
    [External Code]
    [Frames below may be incorrect and/or missing, no symbols loaded for wxbase32u_vc14x.dll]
    opencpn.exe!WinMain(HINSTANCE__ * hInstance, HINSTANCE__ * hPrevInstance, char * lpCmdLine, int nCmdShow) Line 488  C++
    [External Code]
</code></pre></div>



<a name="540192067"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/354446-Testing/Bugs/topic/New%20code%20trouble/near/540192067" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/354446-Testing.2FBugs/topic/New.20code.20trouble.html#540192067">(Sep 18 2025 at 09:48)</a>:</h4>
<p>We can't have this. Reverting it for now in <a href="https://github.com/opencpn/OpenCPN/commit/780252f32">780252f32</a>  and <a href="https://github.com/opencpn/OpenCPN/commit/bb7a55c46">bb7a55c46</a>. Thanks.</p>



<a name="540197091"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/354446-Testing/Bugs/topic/New%20code%20trouble/near/540197091" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/354446-Testing.2FBugs/topic/New.20code.20trouble.html#540197091">(Sep 18 2025 at 10:16)</a>:</h4>
<p>Thanks, now O starts again.</p>



<a name="540197349"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/354446-Testing/Bugs/topic/New%20code%20trouble/near/540197349" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/354446-Testing.2FBugs/topic/New.20code.20trouble.html#540197349">(Sep 18 2025 at 10:18)</a>:</h4>
<p>Don't know what happened, probably some late rebase which went wrong. ENOTIME for now.</p>



<a name="540664662"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/354446-Testing/Bugs/topic/New%20code%20trouble/near/540664662" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/354446-Testing.2FBugs/topic/New.20code.20trouble.html#540664662">(Sep 21 2025 at 15:27)</a>:</h4>
<p><span class="user-mention" data-user-id="399510">@Alec Leamas</span> <span class="user-mention" data-user-id="517002">@Dave Register</span> <br>
It seems that the canvas menu background color for Win, see code snippet, is broken. The "DILG1" would be grey but it's black instead. On "Mouse over" it's instead blue. See pictures.</p>
<p>Other dialogs like "Objects query" are as usual, background light grey and foreground black. These dialogs color scheme is not cursor dependent.</p>
<div class="codehilite"><pre><span></span><code>void CanvasMenuHandler::PrepareMenuItem(wxMenuItem *item) {
#if defined(__WXMSW__)
  wxColour ctrl_back_color = GetGlobalColor("DILG1");  // Control Background
  item-&gt;SetBackgroundColour(ctrl_back_color);
  wxColour menu_text_color = GetGlobalColor("UITX1");
  item-&gt;SetTextColour(menu_text_color);
#endif
</code></pre></div>
<p>Normal DAY table:<br>
<a href="/user_uploads/33951/fKU8ak4MmZplvLPDfx5yHymg/bild.png">bild.png</a><br>
When cursor is over the menu description. (Still DAY)<br>
<a href="/user_uploads/33951/-jVzNkdthN2Ynp659lnfxMRU/bild.png">bild.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/33951/fKU8ak4MmZplvLPDfx5yHymg/bild.png" title="bild.png"><img data-original-content-type="image/png" data-original-dimensions="432x201" src="/user_uploads/thumbnail/33951/fKU8ak4MmZplvLPDfx5yHymg/bild.png/840x560.webp"></a></div><div class="message_inline_image"><a href="/user_uploads/33951/-jVzNkdthN2Ynp659lnfxMRU/bild.png" title="bild.png"><img data-original-content-type="image/png" data-original-dimensions="416x129" src="/user_uploads/thumbnail/33951/-jVzNkdthN2Ynp659lnfxMRU/bild.png/840x560.webp"></a></div>



<a name="540664739"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/354446-Testing/Bugs/topic/New%20code%20trouble/near/540664739" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/354446-Testing.2FBugs/topic/New.20code.20trouble.html#540664739">(Sep 21 2025 at 15:28)</a>:</h4>
<p>Hm... Is this a new thing?</p>



<a name="540666003"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/354446-Testing/Bugs/topic/New%20code%20trouble/near/540666003" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/354446-Testing.2FBugs/topic/New.20code.20trouble.html#540666003">(Sep 21 2025 at 15:47)</a>:</h4>
<p>Yes, rather new. No bisect but let's say a month?</p>



<a name="540666096"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/354446-Testing/Bugs/topic/New%20code%20trouble/near/540666096" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/354446-Testing.2FBugs/topic/New.20code.20trouble.html#540666096">(Sep 21 2025 at 15:49)</a>:</h4>
<p>Since you have the test case:  could you possibly make s bisect?</p>



<a name="540677115"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/354446-Testing/Bugs/topic/New%20code%20trouble/near/540677115" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/354446-Testing.2FBugs/topic/New.20code.20trouble.html#540677115">(Sep 21 2025 at 18:55)</a>:</h4>
<p>Hmm. I tested 0 5.12.2 and it was there as well. I'll check some other Win PCs before further code investigations. I'll be back.</p>



<a name="540678413"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/354446-Testing/Bugs/topic/New%20code%20trouble/near/540678413" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/354446-Testing.2FBugs/topic/New.20code.20trouble.html#540678413">(Sep 21 2025 at 19:21)</a>:</h4>
<p>So, no problem on other of my Win's. Obviously this PC. The reason why I mentioned it here was the difference between e.g. Object query and the Canvas menu.</p>



<a name="540678477"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/354446-Testing/Bugs/topic/New%20code%20trouble/near/540678477" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/354446-Testing.2FBugs/topic/New.20code.20trouble.html#540678477">(Sep 21 2025 at 19:22)</a>:</h4>
<p>"mystified"</p>



<a name="540682179"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/354446-Testing/Bugs/topic/New%20code%20trouble/near/540682179" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/354446-Testing.2FBugs/topic/New.20code.20trouble.html#540682179">(Sep 21 2025 at 20:20)</a>:</h4>
<p>Now I'm a little embarrassed because the general advice to update the driver for the graphics card solved the problem. Sorry for the noise. Case closed.</p>



<a name="540715662"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/354446-Testing/Bugs/topic/New%20code%20trouble/near/540715662" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/354446-Testing.2FBugs/topic/New.20code.20trouble.html#540715662">(Sep 22 2025 at 06:14)</a>:</h4>
<p>;)</p>



<a name="541318808"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/354446-Testing/Bugs/topic/New%20code%20trouble/near/541318808" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/354446-Testing.2FBugs/topic/New.20code.20trouble.html#541318808">(Sep 24 2025 at 19:48)</a>:</h4>
<p><span class="user-mention" data-user-id="399510">@Alec Leamas</span> <span class="user-mention" data-user-id="517002">@Dave Register</span> <br>
Win11: Today's master builds but won't run due to a OpenGL issue.<br>
Fails in .\gui\src\ocpn_platform.cpp : 722<br>
Call stack:</p>
<div class="codehilite"><pre><span></span><code>wxmsw32u_core_vc14x.dll!705f97c3()  Unknown
    [Frames below may be incorrect and/or missing, no symbols loaded for wxmsw32u_core_vc14x.dll]
    [External Code]
&gt;   opencpn.exe!OCPNPlatform::BuildGLCaps(void * pbuf) Line 723 C++
    opencpn.exe!OCPNPlatform::IsGLCapable() Line 834    C++
    opencpn.exe!OCPNPlatform::Initialize_3() Line 517   C++
    opencpn.exe!MyApp::OnInit() Line 1231   C++
    [External Code]
    opencpn.exe!WinMain(HINSTANCE__ * hInstance, HINSTANCE__ * hPrevInstance, char * lpCmdLine, int nCmdShow) Line 338  C++
    [External Code]
</code></pre></div>
<p>Shot of debug crash:<br>
<a href="/user_uploads/33951/L9Y5m1ipUHIwRBx-ys6o8l4m/bild.png">bild.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/33951/L9Y5m1ipUHIwRBx-ys6o8l4m/bild.png" title="bild.png"><img data-original-content-type="image/png" data-original-dimensions="829x428" src="/user_uploads/thumbnail/33951/L9Y5m1ipUHIwRBx-ys6o8l4m/bild.png/840x560.webp"></a></div>



<a name="565793944"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/354446-Testing/Bugs/topic/New%20code%20trouble/near/565793944" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/354446-Testing.2FBugs/topic/New.20code.20trouble.html#565793944">(Dec 30 2025 at 14:20)</a>:</h4>
<p><span class="user-mention" data-user-id="573239">@Pavel Kalian</span> @All<br>
About today's commit 097a270 "Update wxWidgets to 3.2.9"<br>
I tested the updated winconfig.bat on a W11. <br>
After build the log file still claim 3.2.8, see below, and what's more troubled is that all external plugins are rejected and can't be reinstalled. <br>
This was on a PC where everything is related to winconfig.bat.</p>
<p>On another W11 where wx is still on the c:\root i got the same failures when updated with the files mentioned in the commit:<br>
wxMSW-3.2.9_vc14x_Dev.7z<br>
wxWidgets-3.2.9-headers.7z<br>
wxMSW-3.2.9_vc14x_ReleaseDLL.7z<br>
When I afterwards also fetched and updated:<br>
wxWidgets-3.2.9.7z<br>
Everything seams OK after a total rebuild. The log file claimed: 3.2.9 and all external plugins could again be installed.<br>
If my method is correct I don't know but it helped???</p>
<div class="codehilite" data-code-language="Text only"><pre><span></span><code>13:44:53.757    INFO logger.cpp:130 ------- OpenCPN version 5.13.0 restarted at 2025-12-30 -------

13:44:53.757    INFO logger.cpp:130 Using loglevel INFO
13:44:53.757 MESSAGE ocpn_app.cpp:880 wxWidgets version: wxWidgets 3.2.8 Microsoft Windows NT 64 bit wxMSW
</code></pre></div>



<a name="565796643"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/354446-Testing/Bugs/topic/New%20code%20trouble/near/565796643" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/354446-Testing.2FBugs/topic/New.20code.20trouble.html#565796643">(Dec 30 2025 at 14:49)</a>:</h4>
<p>btw: On the W11 where wx is on root I also updated:<br>
wxMSW-3.2.9_vc14x_ReleasePDB.7z<br>
If that's relevant?</p>



<a name="565797733"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/354446-Testing/Bugs/topic/New%20code%20trouble/near/565797733" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pavel Kalian <a href="https://leamas.github.io/zulip-archive/stream/354446-Testing.2FBugs/topic/New.20code.20trouble.html#565797733">(Dec 30 2025 at 15:00)</a>:</h4>
<p>On every wxWidgets (or other dependency) update you should probably clean and rebuild the locally cached stuff (I simply delete both the <code>cache</code> and <code>build</code> folders and run <code>winConfig.bat</code>), otherwise all kinds of very weird stuff may and sometimes will happen.<br>
The CI product works just fine for me (as in installs, starts and loads all the previously existing plugins), which means there probably is nothing to investigate. Or did I miss something in your report that seems to be broken by the wx update?</p>



<a name="565800547"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/354446-Testing/Bugs/topic/New%20code%20trouble/near/565800547" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/354446-Testing.2FBugs/topic/New.20code.20trouble.html#565800547">(Dec 30 2025 at 15:26)</a>:</h4>
<p>I did deleted all in \build, but nothing in \cache.<br>
I can for sure test that. If that's he solution maybe winconfig.bat should clean it before update? But I'll make a test and come back. (Takes some time :))</p>



<a name="565801126"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/354446-Testing/Bugs/topic/New%20code%20trouble/near/565801126" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pavel Kalian <a href="https://leamas.github.io/zulip-archive/stream/354446-Testing.2FBugs/topic/New.20code.20trouble.html#565801126">(Dec 30 2025 at 15:31)</a>:</h4>
<p>There also is <code>..\ocpn_wxWidgets</code>. I don't think the script has any perception of "this is an update, I need to do more stuff" at the moment.</p>



<a name="565805565"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/354446-Testing/Bugs/topic/New%20code%20trouble/near/565805565" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pavel Kalian <a href="https://leamas.github.io/zulip-archive/stream/354446-Testing.2FBugs/topic/New.20code.20trouble.html#565805565">(Dec 30 2025 at 16:11)</a>:</h4>
<p>I think I know what the problem you see is. The wxWidgets libraries built by <code>winConfig.bat</code> have a different name than the ones built upstream (and used in the CI builds) since Dan's recent update.</p>
<p>I think this patch should make it right:</p>
<div class="codehilite" data-code-language="Diff"><pre><span></span><code><span class="gh">diff --git a/buildwin/winConfig.bat b/buildwin/winConfig.bat</span>
<span class="gh">index b6f8a68cb..0778b0e37 100644</span>
<span class="gd">--- a/buildwin/winConfig.bat</span>
<span class="gi">+++ b/buildwin/winConfig.bat</span>
<span class="gu">@@ -752,7 +752,7 @@ if "[%ocpn_cmake%]"=="[1]" (</span>
<span class="w"> </span>  if ERRORLEVEL 1 goto :buildErr
<span class="w"> </span>  rem If debug is required build it now
<span class="w"> </span>  if exist "%OCPN_DIR%\build\.Debug" (
<span class="gd">-    cmake --build %wxBuildDir% --config=Debug -- /v:%wxVerb% /m:%NUMBER_OF_PROCESSORS% /p:UseMultiToolTask=true;BuildPassReferences=true;EnableClServerMode=true;wxVendor=14x;wxVersionString=32;wxToolKitDllNameSuffix=_vc_14x ^</span>
<span class="gi">+    cmake --build %wxBuildDir% --config=Debug -- /v:%wxVerb% /m:%NUMBER_OF_PROCESSORS% /p:UseMultiToolTask=true;BuildPassReferences=true;EnableClServerMode=true;wxVendor=14x;wxVersionString=32;wxToolKitDllNameSuffix=_vc14x ^</span>
<span class="w"> </span>        /l:FileLogger,Microsoft.Build.Engine;logfile="%wxSourceDir%\MSBuild_Debug_WIN32.log"
<span class="w"> </span>    if ERRORLEVEL 1 (
<span class="w"> </span>      if not [%quiet%]==[Y] pause
<span class="gu">@@ -760,7 +760,7 @@ if "[%ocpn_cmake%]"=="[1]" (</span>
<span class="w"> </span>    )
<span class="w"> </span>  )
<span class="w"> </span>  rem Always build config RelWithDebInfo
<span class="gd">-  cmake --build %wxBuildDir% --config=RelWithDebInfo -- /v:%wxVerb% /m:%NUMBER_OF_PROCESSORS% /p:UseMultiToolTask=true;BuildPassReferences=true;EnableClServerMode=true;wxVendor=14x;wxVersionString=32;wxToolKitDllNameSuffix=_vc_14x ^</span>
<span class="gi">+  cmake --build %wxBuildDir% --config=RelWithDebInfo -- /v:%wxVerb% /m:%NUMBER_OF_PROCESSORS% /p:UseMultiToolTask=true;BuildPassReferences=true;EnableClServerMode=true;wxVendor=14x;wxVersionString=32;wxToolKitDllNameSuffix=_vc14x ^</span>
<span class="w"> </span>      /l:FileLogger,Microsoft.Build.Engine;logfile="%wxSourceDir%\MSBuild_RelWithDebInfo_WIN32.log"
<span class="w"> </span>  if ERRORLEVEL 1 (
<span class="w"> </span>    if not [%quiet%]==[Y] pause
<span class="gu">@@ -783,7 +783,7 @@ if "[%ocpn_cmake%]"=="[1]" (</span>
<span class="w"> </span>      -property:EnableClServerMode=true ^
<span class="w"> </span>      -property:BuildPassReferences=true ^
<span class="w"> </span>      -property:"Configuration=DLL Debug";Platform=Win32 ^
<span class="gd">-      -property:wxVendor=14x;wxVersionString=32;wxToolkitDllNameSuffix=_vc_14x ^</span>
<span class="gi">+      -property:wxVendor=14x;wxVersionString=32;wxToolkitDllNameSuffix=_vc14x ^</span>
<span class="w"> </span>      -logger:FileLogger,Microsoft.Build.Engine;logfile="%wxSourceDir%\MSBuild_DEBUG_WIN32.log"
<span class="w"> </span>    if errorlevel 1 (
<span class="w"> </span>      echo wxWidgets Debug build NOT OK
<span class="gu">@@ -801,7 +801,7 @@ if "[%ocpn_cmake%]"=="[1]" (</span>
<span class="w"> </span>    -property:EnableClServerMode=true ^
<span class="w"> </span>    -property:BuildPassReferences=true ^
<span class="w"> </span>    -property:"Configuration=DLL Release";Platform=Win32 ^
<span class="gd">-    -property:wxVendor=14x;wxVersionString=32;wxToolkitDllNameSuffix=_vc_14x ^</span>
<span class="gi">+    -property:wxVendor=14x;wxVersionString=32;wxToolkitDllNameSuffix=_vc14x ^</span>
<span class="w"> </span>    -logger:FileLogger,Microsoft.Build.Engine;logfile="%wxSourceDir%\MSBuild_RELEASE_WIN32.log"
<span class="w"> </span>  if errorlevel 1 (
<span class="w"> </span>    echo wxWidgets Release build NOT OK
</code></pre></div>
<p><span class="user-mention" data-user-id="522729">@Dan Dickey</span>, before I push this change, was there some particular reason to add the underscore between <code>vc</code> and <code>14x</code>?</p>



<a name="565817503"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/354446-Testing/Bugs/topic/New%20code%20trouble/near/565817503" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Dickey <a href="https://leamas.github.io/zulip-archive/stream/354446-Testing.2FBugs/topic/New.20code.20trouble.html#565817503">(Dec 30 2025 at 18:06)</a>:</h4>
<p>Just delete ocpn_wxWidgets folder and all will be ok.</p>



<a name="565817552"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/354446-Testing/Bugs/topic/New%20code%20trouble/near/565817552" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Dickey <a href="https://leamas.github.io/zulip-archive/stream/354446-Testing.2FBugs/topic/New.20code.20trouble.html#565817552">(Dec 30 2025 at 18:06)</a>:</h4>
<p>The winConfig script will recreate it with tag v3.2.9.</p>



<a name="565820611"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/354446-Testing/Bugs/topic/New%20code%20trouble/near/565820611" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pavel Kalian <a href="https://leamas.github.io/zulip-archive/stream/354446-Testing.2FBugs/topic/New.20code.20trouble.html#565820611">(Dec 30 2025 at 18:41)</a>:</h4>
<p>The main problem is the DLL naming - <a href="https://github.com/OpenCPN/OpenCPN/blob/master/model/src/plugin_loader.cpp#L1349">https://github.com/OpenCPN/OpenCPN/blob/master/model/src/plugin_loader.cpp#L1349</a> now flags all plugins from the catalog incompatible because of the name mismatch between the DLLs built by <code>winConfig.bat</code> (with underscore between <code>vc</code> and <code>14x</code>) and the ones used to build the plugins from the upstream (without underscore).</p>



<a name="565824324"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/354446-Testing/Bugs/topic/New%20code%20trouble/near/565824324" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/354446-Testing.2FBugs/topic/New.20code.20trouble.html#565824324">(Dec 30 2025 at 19:19)</a>:</h4>
<p>Now I've deleted what's in \build, cache\buildwin and ..\ocpn_wxWidgets.<br>
Now running winconfig --realease --RelwithD...<br>
Working.....</p>



<a name="565827067"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/354446-Testing/Bugs/topic/New%20code%20trouble/near/565827067" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Dickey <a href="https://leamas.github.io/zulip-archive/stream/354446-Testing.2FBugs/topic/New.20code.20trouble.html#565827067">(Dec 30 2025 at 19:51)</a>:</h4>
<p><span class="user-mention silent" data-user-id="573239">Pavel Kalian</span> <a href="#narrow/channel/354446-Testing.2FBugs/topic/New.20code.20trouble/near/565820611">said</a>:</p>
<blockquote>
<p>The main problem is the DLL naming - <a href="https://github.com/OpenCPN/OpenCPN/blob/master/model/src/plugin_loader.cpp#L1349">https://github.com/OpenCPN/OpenCPN/blob/master/model/src/plugin_loader.cpp#L1349</a> now flags all plugins from the catalog incompatible because of the name mismatch between the DLLs built by <code>winConfig.bat</code> (with underscore between <code>vc</code> and <code>14x</code>) and the ones used to build the plugins from the upstream (without underscore).</p>
</blockquote>
<p>Ok, I’ll work on a fix for that.</p>



<a name="565832045"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/354446-Testing/Bugs/topic/New%20code%20trouble/near/565832045" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/354446-Testing.2FBugs/topic/New.20code.20trouble.html#565832045">(Dec 30 2025 at 20:47)</a>:</h4>
<p>I think Pavel may have a point.<br>
After having deleted what's advised and rebuilt still external plugins are rejected. But now the log at least report wx 3.2.9</p>



<a name="565848968"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/354446-Testing/Bugs/topic/New%20code%20trouble/near/565848968" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Dickey <a href="https://leamas.github.io/zulip-archive/stream/354446-Testing.2FBugs/topic/New.20code.20trouble.html#565848968">(Dec 31 2025 at 01:34)</a>:</h4>
<p>I have pushed a PR to fix the dll file name issue. Delete ocpn_wxWidgets folder and rebuild after pulling the latest patch.</p>



<a name="565849021"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/354446-Testing/Bugs/topic/New%20code%20trouble/near/565849021" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pavel Kalian <a href="https://leamas.github.io/zulip-archive/stream/354446-Testing.2FBugs/topic/New.20code.20trouble.html#565849021">(Dec 31 2025 at 01:35)</a>:</h4>
<p>Thanks Dan</p>



<a name="565876011"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/354446-Testing/Bugs/topic/New%20code%20trouble/near/565876011" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/354446-Testing.2FBugs/topic/New.20code.20trouble.html#565876011">(Dec 31 2025 at 08:54)</a>:</h4>
<p>Today's winconfig.bat does it correct and both log file and external plugins are happy. What I did before running the .bat file was to delete the content of \build, nothing more.<br>
Thanks</p>



<hr><p>Last updated: Jan 09 2026 at 11:13 UTC</p>
</html>