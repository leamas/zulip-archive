<html>
<head><meta charset="utf-8"><title>New code trouble · Testing/Bugs · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://leamas.github.io/zulip-archive/stream/354446-Testing.2FBugs/index.html">Testing/Bugs</a></h2>
<h3>Topic: <a href="https://leamas.github.io/zulip-archive/stream/354446-Testing.2FBugs/topic/New.20code.20trouble.html">New code trouble</a></h3>

<hr>

<base href="https://opencpn.zulipchat.com">

<head><link href="https://leamas.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="540172457"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/354446-Testing/Bugs/topic/New%20code%20trouble/near/540172457" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/354446-Testing.2FBugs/topic/New.20code.20trouble.html#540172457">(Sep 18 2025 at 08:14)</a>:</h4>
<p><span class="user-mention" data-user-id="399510">@Alec Leamas</span> <br>
After <a href="https://github.com/opencpn/OpenCPN/issues/4770">#4770</a> O don't start.<br>
Debug:<br>
In:C:\Program Files\Microsoft Visual Studio\2022\Community\VC\Tools\MSVC\14.44.35207\include\vector</p>
<p><a href="/user_uploads/33951/3Wq5MwNzg77kUg7BoqXB-03A/bild.png">bild.png</a><br>
Call stack</p>
<div class="message_inline_image"><a href="/user_uploads/33951/3Wq5MwNzg77kUg7BoqXB-03A/bild.png" title="bild.png"><img data-original-content-type="image/png" data-original-dimensions="916x473" src="/user_uploads/thumbnail/33951/3Wq5MwNzg77kUg7BoqXB-03A/bild.png/840x560.webp"></a></div><div class="codehilite"><pre><span></span><code>&gt;   opencpn.exe!std::vector&lt;int,std::allocator&lt;int&gt;&gt;::_Emplace_reallocate&lt;int const &amp;&gt;(int * const _Whereptr, const int &amp; &lt;_Val_0&gt;) Line 903    C++
    [Inline Frame] opencpn.exe!std::vector&lt;int,std::allocator&lt;int&gt;&gt;::_Emplace_one_at_back(const int &amp;) Line 848 C++
    [Inline Frame] opencpn.exe!std::vector&lt;int,std::allocator&lt;int&gt;&gt;::push_back(const int &amp; _Val) Line 933   C++
    opencpn.exe!Quilt::Compose(const ViewPort &amp; vp_in) Line 2440    C++
    opencpn.exe!ChartCanvas::SetViewPoint(double lat, double lon, double scale_ppm, double skew, double rotation, int projection, bool b_adjust, bool b_refresh) Line 5526  C++
    opencpn.exe!ChartCanvas::DoCanvasUpdate() Line 1590 C++
    opencpn.exe!MyFrame::DoChartUpdate() Line 6263  C++
    opencpn.exe!MyApp::OnInit() Line 1544   C++
    [External Code]
    [Frames below may be incorrect and/or missing, no symbols loaded for wxbase32u_vc14x.dll]
    opencpn.exe!WinMain(HINSTANCE__ * hInstance, HINSTANCE__ * hPrevInstance, char * lpCmdLine, int nCmdShow) Line 488  C++
    [External Code]
</code></pre></div>



<a name="540192067"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/354446-Testing/Bugs/topic/New%20code%20trouble/near/540192067" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/354446-Testing.2FBugs/topic/New.20code.20trouble.html#540192067">(Sep 18 2025 at 09:48)</a>:</h4>
<p>We can't have this. Reverting it for now in <a href="https://github.com/opencpn/OpenCPN/commit/780252f32">780252f32</a>  and <a href="https://github.com/opencpn/OpenCPN/commit/bb7a55c46">bb7a55c46</a>. Thanks.</p>



<a name="540197091"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/354446-Testing/Bugs/topic/New%20code%20trouble/near/540197091" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/354446-Testing.2FBugs/topic/New.20code.20trouble.html#540197091">(Sep 18 2025 at 10:16)</a>:</h4>
<p>Thanks, now O starts again.</p>



<a name="540197349"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/354446-Testing/Bugs/topic/New%20code%20trouble/near/540197349" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/354446-Testing.2FBugs/topic/New.20code.20trouble.html#540197349">(Sep 18 2025 at 10:18)</a>:</h4>
<p>Don't know what happened, probably some late rebase which went wrong. ENOTIME for now.</p>



<a name="540664662"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/354446-Testing/Bugs/topic/New%20code%20trouble/near/540664662" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/354446-Testing.2FBugs/topic/New.20code.20trouble.html#540664662">(Sep 21 2025 at 15:27)</a>:</h4>
<p><span class="user-mention" data-user-id="399510">@Alec Leamas</span> <span class="user-mention" data-user-id="517002">@Dave Register</span> <br>
It seems that the canvas menu background color for Win, see code snippet, is broken. The "DILG1" would be grey but it's black instead. On "Mouse over" it's instead blue. See pictures.</p>
<p>Other dialogs like "Objects query" are as usual, background light grey and foreground black. These dialogs color scheme is not cursor dependent.</p>
<div class="codehilite"><pre><span></span><code>void CanvasMenuHandler::PrepareMenuItem(wxMenuItem *item) {
#if defined(__WXMSW__)
  wxColour ctrl_back_color = GetGlobalColor("DILG1");  // Control Background
  item-&gt;SetBackgroundColour(ctrl_back_color);
  wxColour menu_text_color = GetGlobalColor("UITX1");
  item-&gt;SetTextColour(menu_text_color);
#endif
</code></pre></div>
<p>Normal DAY table:<br>
<a href="/user_uploads/33951/fKU8ak4MmZplvLPDfx5yHymg/bild.png">bild.png</a><br>
When cursor is over the menu description. (Still DAY)<br>
<a href="/user_uploads/33951/-jVzNkdthN2Ynp659lnfxMRU/bild.png">bild.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/33951/fKU8ak4MmZplvLPDfx5yHymg/bild.png" title="bild.png"><img data-original-content-type="image/png" data-original-dimensions="432x201" src="/user_uploads/thumbnail/33951/fKU8ak4MmZplvLPDfx5yHymg/bild.png/840x560.webp"></a></div><div class="message_inline_image"><a href="/user_uploads/33951/-jVzNkdthN2Ynp659lnfxMRU/bild.png" title="bild.png"><img data-original-content-type="image/png" data-original-dimensions="416x129" src="/user_uploads/thumbnail/33951/-jVzNkdthN2Ynp659lnfxMRU/bild.png/840x560.webp"></a></div>



<a name="540664739"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/354446-Testing/Bugs/topic/New%20code%20trouble/near/540664739" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/354446-Testing.2FBugs/topic/New.20code.20trouble.html#540664739">(Sep 21 2025 at 15:28)</a>:</h4>
<p>Hm... Is this a new thing?</p>



<a name="540666003"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/354446-Testing/Bugs/topic/New%20code%20trouble/near/540666003" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/354446-Testing.2FBugs/topic/New.20code.20trouble.html#540666003">(Sep 21 2025 at 15:47)</a>:</h4>
<p>Yes, rather new. No bisect but let's say a month?</p>



<a name="540666096"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/354446-Testing/Bugs/topic/New%20code%20trouble/near/540666096" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/354446-Testing.2FBugs/topic/New.20code.20trouble.html#540666096">(Sep 21 2025 at 15:49)</a>:</h4>
<p>Since you have the test case:  could you possibly make s bisect?</p>



<a name="540677115"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/354446-Testing/Bugs/topic/New%20code%20trouble/near/540677115" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/354446-Testing.2FBugs/topic/New.20code.20trouble.html#540677115">(Sep 21 2025 at 18:55)</a>:</h4>
<p>Hmm. I tested 0 5.12.2 and it was there as well. I'll check some other Win PCs before further code investigations. I'll be back.</p>



<a name="540678413"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/354446-Testing/Bugs/topic/New%20code%20trouble/near/540678413" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/354446-Testing.2FBugs/topic/New.20code.20trouble.html#540678413">(Sep 21 2025 at 19:21)</a>:</h4>
<p>So, no problem on other of my Win's. Obviously this PC. The reason why I mentioned it here was the difference between e.g. Object query and the Canvas menu.</p>



<a name="540678477"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/354446-Testing/Bugs/topic/New%20code%20trouble/near/540678477" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/354446-Testing.2FBugs/topic/New.20code.20trouble.html#540678477">(Sep 21 2025 at 19:22)</a>:</h4>
<p>"mystified"</p>



<a name="540682179"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/354446-Testing/Bugs/topic/New%20code%20trouble/near/540682179" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/354446-Testing.2FBugs/topic/New.20code.20trouble.html#540682179">(Sep 21 2025 at 20:20)</a>:</h4>
<p>Now I'm a little embarrassed because the general advice to update the driver for the graphics card solved the problem. Sorry for the noise. Case closed.</p>



<a name="540715662"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/354446-Testing/Bugs/topic/New%20code%20trouble/near/540715662" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alec Leamas <a href="https://leamas.github.io/zulip-archive/stream/354446-Testing.2FBugs/topic/New.20code.20trouble.html#540715662">(Sep 22 2025 at 06:14)</a>:</h4>
<p>;)</p>



<a name="541318808"></a>
<h4><a href="https://opencpn.zulipchat.com#narrow/stream/354446-Testing/Bugs/topic/New%20code%20trouble/near/541318808" class="zl"><img src="https://leamas.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Håkan Svensson <a href="https://leamas.github.io/zulip-archive/stream/354446-Testing.2FBugs/topic/New.20code.20trouble.html#541318808">(Sep 24 2025 at 19:48)</a>:</h4>
<p><span class="user-mention" data-user-id="399510">@Alec Leamas</span> <span class="user-mention" data-user-id="517002">@Dave Register</span> <br>
Win11: Today's master builds but won't run due to a OpenGL issue.<br>
Fails in .\gui\src\ocpn_platform.cpp : 722<br>
Call stack:</p>
<div class="codehilite"><pre><span></span><code>wxmsw32u_core_vc14x.dll!705f97c3()  Unknown
    [Frames below may be incorrect and/or missing, no symbols loaded for wxmsw32u_core_vc14x.dll]
    [External Code]
&gt;   opencpn.exe!OCPNPlatform::BuildGLCaps(void * pbuf) Line 723 C++
    opencpn.exe!OCPNPlatform::IsGLCapable() Line 834    C++
    opencpn.exe!OCPNPlatform::Initialize_3() Line 517   C++
    opencpn.exe!MyApp::OnInit() Line 1231   C++
    [External Code]
    opencpn.exe!WinMain(HINSTANCE__ * hInstance, HINSTANCE__ * hPrevInstance, char * lpCmdLine, int nCmdShow) Line 338  C++
    [External Code]
</code></pre></div>
<p>Shot of debug crash:<br>
<a href="/user_uploads/33951/L9Y5m1ipUHIwRBx-ys6o8l4m/bild.png">bild.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/33951/L9Y5m1ipUHIwRBx-ys6o8l4m/bild.png" title="bild.png"><img data-original-content-type="image/png" data-original-dimensions="829x428" src="/user_uploads/thumbnail/33951/L9Y5m1ipUHIwRBx-ys6o8l4m/bild.png/840x560.webp"></a></div>



<hr><p>Last updated: Oct 14 2025 at 07:30 UTC</p>
</html>