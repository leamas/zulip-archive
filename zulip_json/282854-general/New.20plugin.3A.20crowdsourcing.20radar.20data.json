[
    {
        "content": "<p>I'm trying to build a new plugin:</p>\n<p><a href=\"https://github.com/KAHU-radar/crowdsource_pi\">https://github.com/KAHU-radar/crowdsource_pi</a><br>\n<a href=\"https://cloudsmith.io/~kahu/repos/crowdsource_pi-beta/packages/\">https://cloudsmith.io/~kahu/repos/crowdsource_pi-beta/packages/</a></p>\n<p>It works fine on my linux box, but when installing the macos plugin into opencpn on a mac, it says that the plugin failed to initialize. How do you find out what's wrong? On linux when I had the same problem earlier, I used ldd to find unbound symbols and figure out what lib didn't get statically linked or something...</p>\n<p>Could anyone w mac dev exp. help me out?</p>",
        "id": 492800809,
        "sender_full_name": "Egil MÃ¶ller",
        "timestamp": 1736450696
    },
    {
        "content": "<p>The <code>ldd</code> equivalent on macOS is <code>otool -L</code>. The reason for the plugin not being loaded is in the logfile (<code>~/Library/Logs/opencpn.log</code> on macOS)</p>",
        "id": 492838321,
        "sender_full_name": "Pavel Kalian",
        "timestamp": 1736464775
    },
    {
        "content": "<p>I don't know what is it supposed to do, but <a href=\"https://cloudsmith.io/~kahu/repos/crowdsource_pi-beta/packages/detail/raw/crowdsource_pi-0.1.162.0-darwin-wx32-arm64-x86_64-12.6.3-macos-tarball/0.1.162.0+974.a1bd264/#files\">it</a> imports and loads fine for me on an Apple Silicon Macbook.</p>",
        "id": 492839193,
        "sender_full_name": "Pavel Kalian",
        "timestamp": 1736465181
    },
    {
        "content": "<p>What will be a problem is you don't modify the RPATH correctly and leave <code>/usr/local/lib</code> there (as in <code>/usr/local/lib/libwx_baseu-3.2.dylib</code>), while it has to be changed to <code>@executable_path/../Frameworks/</code> (as in eg. <code>@executable_path/../Frameworks//libwx_baseu-3.2.dylib</code>) using <code>install_name_tool</code> during the packaging of the tarball.<br>\nI myself do it using this script: <a href=\"https://github.com/nohal/dashboardsk_pi/blob/main/cmake/fix-macos-libs.sh\">https://github.com/nohal/dashboardsk_pi/blob/main/cmake/fix-macos-libs.sh</a> (Invoked from <a href=\"https://github.com/nohal/dashboardsk_pi/blob/main/cmake/PluginInstall.cmake#L64\">https://github.com/nohal/dashboardsk_pi/blob/main/cmake/PluginInstall.cmake#L64</a>)</p>",
        "id": 492840563,
        "sender_full_name": "Pavel Kalian",
        "timestamp": 1736465793
    }
]