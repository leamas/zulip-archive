[
    {
        "content": "<p>Mike... Well done getting it running.  Some issues - see here <a href=\"https://github.com/antipole2/JavaScript_pi/labels/OCPN%205.8%2Fwx3.2%20issue\">https://github.com/antipole2/JavaScript_pi/labels/OCPN%205.8%2Fwx3.2%20issue</a></p>",
        "id": 338146007,
        "sender_full_name": "Tony Voss",
        "timestamp": 1677416791
    },
    {
        "content": "<blockquote>\n<p>svg no longer needed? We can now use png icons for all platforms? So you have removed the svg stuff.</p>\n</blockquote>\n<p>Just a drive-by remark: Using png instead of svg is definitely a step backwards. Svg is considered the \"best\" format for many reasons, not least does it behave much better on HDPI displays.</p>",
        "id": 338188576,
        "sender_full_name": "Alec Leamas",
        "timestamp": 1677435548
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"399510\">@Alec Leamas</span> : I will do some more research but png seemed the only way to go for an alphanumeric icon on Windows (<strong>{JS}</strong>).</p>",
        "id": 338196450,
        "sender_full_name": "Mike Rossiter",
        "timestamp": 1677439847
    },
    {
        "content": "<p>Don’t understand this, Mike.  I generated an SVG file for {JS} which contained no text and, surely, no longer has any connection to alphanumerics.  It’s just that the vectors happen to look like the characters.</p>",
        "id": 338202051,
        "sender_full_name": "Tony Voss",
        "timestamp": 1677443435
    },
    {
        "content": "<blockquote>\n<p>Don’t understand this</p>\n</blockquote>\n<p>Me neither. Other plugins don't have a problem.</p>",
        "id": 338260258,
        "sender_full_name": "Mike Rossiter",
        "timestamp": 1677485044
    },
    {
        "content": "<p>Your build this morning actually build for wx3.1.2  - perhaps my bad.  It works OK on OCON5.6.2.<br>\nI have updated my template to sd3.2.3-beta1 but build fails </p>\n<blockquote>\n<p>CMake Error at cmake/MacosWxwidgets.cmake:98 (message):<br>\n Cannot locate wx-config tool at<br>\n /Users/Tony/OpenCPN_project/JavaScript-project/JavaScript_pi/cache/lib/wx/config/osx_cocoa-unicode-3.2</p>\n</blockquote>\n<p>What template should I be using?</p>",
        "id": 338323068,
        "sender_full_name": "Tony Voss",
        "timestamp": 1677503501
    },
    {
        "content": "<p>Remote build OK although issues remain</p>",
        "id": 338324230,
        "sender_full_name": "Tony Voss",
        "timestamp": 1677503809
    },
    {
        "content": "<blockquote>\n<p>sd3.2.3-beta1</p>\n</blockquote>\n<p>I will update with this and see what happens.</p>",
        "id": 338333392,
        "sender_full_name": "Mike Rossiter",
        "timestamp": 1677506275
    },
    {
        "content": "<p>Could you try the new alpha build? Working on Windows.</p>",
        "id": 338337532,
        "sender_full_name": "Mike Rossiter",
        "timestamp": 1677507163
    },
    {
        "content": "<p>Problems with flatpak but I think I know what is needed.</p>",
        "id": 338337722,
        "sender_full_name": "Mike Rossiter",
        "timestamp": 1677507198
    },
    {
        "content": "<p>This one:<br>\n<a href=\"#narrow/stream/332200-shipdriver/topic/shipdriver.203.2E2\">https://opencpn.zulipchat.com/#narrow/stream/332200-shipdriver/topic/shipdriver.203.2E2</a></p>",
        "id": 338341269,
        "sender_full_name": "Mike Rossiter",
        "timestamp": 1677507970
    },
    {
        "content": "<p>Your build at 14:57 working OK on MacOS.  Icons look OK and toolbar icon toggles OK.  Z-order problem remains.<br>\nDo I have to do anything so I can build using sd3.2.3-beta1 or just rerun?</p>",
        "id": 338352809,
        "sender_full_name": "Tony Voss",
        "timestamp": 1677510417
    },
    {
        "content": "<blockquote>\n<p>Do I have to do anything so I can build using sd3.2.3-beta1 or just rerun?</p>\n</blockquote>\n<p>Just rerun <code>update-templates sd3.2.3-beta1</code></p>\n<p>Can't reproduce your z-order problem on Windows.</p>",
        "id": 338353694,
        "sender_full_name": "Mike Rossiter",
        "timestamp": 1677510619
    },
    {
        "content": "<p>Remote build works for me but still getting  <code>Cannot locate wx-config tool</code>  with local build.</p>",
        "id": 338364079,
        "sender_full_name": "Tony Voss",
        "timestamp": 1677513056
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"554731\">Tony Voss</span> <a href=\"#narrow/stream/349785-JavaScript_pi/topic/Issues.20under.20OCPN.205.2E8.2Fwx3.2E2/near/338364079\">said</a>:</p>\n<blockquote>\n<p>Remote build works for me but still getting  <code>Cannot locate wx-config tool</code>  with local build.</p>\n</blockquote>\n<p>Ah... this error only happens on first run of <code>make tarball</code> after updating the template, when it has compiled all the wx stuff from scratch.<br>\nIf I rerun <code>make tarball</code>, it works OK <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span></p>",
        "id": 338389420,
        "sender_full_name": "Tony Voss",
        "timestamp": 1677516182
    },
    {
        "content": "<p>Think I have been working with the wrong branch. Is the latest v2.02-wx3,2 or v2.0.2-wx3.2?<br>\nSVG Icons not seen on my Mac Mini for a local build here!</p>",
        "id": 338390650,
        "sender_full_name": "Mike Rossiter",
        "timestamp": 1677516455
    },
    {
        "content": "<blockquote>\n<p>Can't reproduce your z-order problem on Windows.</p>\n</blockquote>\n<p>Under MacOS, when I drag the frame around, consoles no longer move with the frame.  They are not attached as they are under OCPN5.6.2.<br>\nMike - what happens when the frame is dragged on Windows?  Do the consoles move with the frame?</p>",
        "id": 338392574,
        "sender_full_name": "Tony Voss",
        "timestamp": 1677516892
    },
    {
        "content": "<p>Latest branch <strong>v2.0.2-wx3.2</strong></p>",
        "id": 338433422,
        "sender_full_name": "Tony Voss",
        "timestamp": 1677526724
    },
    {
        "content": "<p>I think I have located the z-order issue in OCPN.  Need to add code for the proof.</p>",
        "id": 338433719,
        "sender_full_name": "Tony Voss",
        "timestamp": 1677526812
    },
    {
        "content": "<blockquote>\n<p>Latest branch v2.0.2-wx3.2</p>\n</blockquote>\n<p>But this is 2 weeks old.</p>\n<p>Using v2.02-wx3.2 I compiled again.  This branch is where your circleci builds are coming from. The issue with the SVG icons was that the <em>iconcache</em> folder was being used. Removed this and all the icons show correctly on MacOS as well. <em>iconcache</em> was presumably updated with the new icons.</p>",
        "id": 338435233,
        "sender_full_name": "Mike Rossiter",
        "timestamp": 1677527224
    },
    {
        "content": "<p>Whoops - my mess.</p>\n<p>The name of branch v2.02-wx3.2  was a mistype.  I corrected it to v2.0.2-wx3.2 in Github Desktop but that did not correct it remotely.<br>\nI then added it remotely - bad.<br>\nSo I have been working using branch v2.0.2-wx3.2 locally in Github Desktop but it was actually pushing to v2.02-wx3.2 remotely.  Ouch <span aria-label=\"anguish\" class=\"emoji emoji-1f62b\" role=\"img\" title=\"anguish\">:anguish:</span> <br>\nI have straightened this out by:</p>\n<ol>\n<li>quiting Teminal and Github Desktop</li>\n<li>Remotely renaming the branch v2.0.2-wx3.2 bto something else</li>\n<li>Renaming v2.02-wx3.2 to v2.0.2-wx3.2</li>\n<li>Relaunching Github Desktop</li>\n</ol>\n<p>All now seems in sync.   v2.0.2-wx3.2 is the one to use.</p>",
        "id": 338534113,
        "sender_full_name": "Tony Voss",
        "timestamp": 1677575834
    },
    {
        "content": "<p>The wonders of Github Desktop <span aria-label=\"melting face\" class=\"emoji emoji-1fae0\" role=\"img\" title=\"melting face\">:melting_face:</span></p>",
        "id": 338552057,
        "sender_full_name": "Alec Leamas",
        "timestamp": 1677581007
    },
    {
        "content": "<p>Even the above did not straighten it out.  Renaming branches seems perilous and if Github Desktop is involved doubly so.<br>\nNow deleted the branch on Desktop (maybe I was confused between local and remote branches which can have different names for the same remote branch).<br>\nRenaming the remote branch did not resolve it either.  So I changed the branch name to something else and then created a <em>new branch</em> from it with the desired name.  Finally, remote builds are coming from the desired name v2.0.2-wx3.2</p>",
        "id": 338556548,
        "sender_full_name": "Tony Voss",
        "timestamp": 1677582271
    },
    {
        "content": "<p>Mike - regarding me not seeing stuff recompiled, if you look in my branch v2.0.2-wx3.2 src/version.h you will see<br>\n<code>#define     PLUGIN_VERSION_DATE \"2023:02:28\"\n#define     PLUGIN_VERSION_COMMENT \"Build e\"</code><br>\nbut after building from this branch (remotely or locally) when you open a console with no pre-loaded script the default script has an earlier date and says <code>Build a</code>.  Hence this is not being recompiled.<br>\nThere is no indication in the script log that it compiled any of the plugin source.<br>\n(at least for MacOS build).</p>",
        "id": 338561439,
        "sender_full_name": "Tony Voss",
        "timestamp": 1677583806
    },
    {
        "content": "<p>Same here for Windows. Having a look.</p>",
        "id": 338563744,
        "sender_full_name": "Mike Rossiter",
        "timestamp": 1677584478
    },
    {
        "content": "<p>Moved the defines from <em>version.h</em> to <em>config.h</em> and removed <em>version.h</em>. Seems to fix this problem.</p>",
        "id": 338569037,
        "sender_full_name": "Mike Rossiter",
        "timestamp": 1677585983
    },
    {
        "content": "<p>Hang on. Some errors.</p>",
        "id": 338569879,
        "sender_full_name": "Mike Rossiter",
        "timestamp": 1677586259
    },
    {
        "content": "<p>This gets messy. Those defines are made by <a href=\"http://config.in\">config.in</a> from the root folder. This makes config.h which is used to compile the plugin. Playing with editing <a href=\"http://config.in\">config.in</a> because I don't know another way yet.</p>",
        "id": 338571563,
        "sender_full_name": "Mike Rossiter",
        "timestamp": 1677586799
    },
    {
        "content": "<p>Editing version.h used to work while just changing the build and date.<br>\nIt's not just version.h.  I have also edited <code>toolsDialogImp.cpp</code> but that does not get re-complied either.</p>",
        "id": 338572617,
        "sender_full_name": "Tony Voss",
        "timestamp": 1677587087
    },
    {
        "content": "<p>With my fork I added the defines needed (ex <em>version.h</em>) to <a href=\"http://config.in\">config.in</a> and built again. This builds a <em>config.h</em> with all the correct defines.</p>",
        "id": 338573019,
        "sender_full_name": "Mike Rossiter",
        "timestamp": 1677587217
    },
    {
        "content": "<p>May need to use config.h as an include in <em>toolsDialogImp.h</em></p>",
        "id": 338574506,
        "sender_full_name": "Mike Rossiter",
        "timestamp": 1677587649
    },
    {
        "content": "<p>Not convinced about this.<br>\nversion.h is included from several places.  It is in the list in Plugin.cmake Changes should force a recompile of anything including it.<br>\nQuite separately from the version number/date issue, toolsDialogImp.cpp has been edited and thus should be recompiled, which it has not.  It should not have to include a header file to make that happen.<br>\nYou can check whether toolsDialogImp.cpp has been recompiled by going to the JS tools &gt;  Diagnostics &gt; Dump<br>\nNear the top of the dump window 7th line there is a line starting <code>pJavaScript_pi-&gt;m_pconfig</code><br>\nWith the latest source there should be an additional line after it <code>pJavaScript_pi-&gt;m_parent_window</code>, which there is not.<br>\n(BTW I anticipate this will show up as nullptr/zero, which I suspect is the source of the z-order problem.)</p>",
        "id": 338579415,
        "sender_full_name": "Tony Voss",
        "timestamp": 1677588869
    },
    {
        "content": "<p>On my build:<br>\n<code>pJavaScript_pi-&gt;m_parent_window      0x00099a64a0</code></p>",
        "id": 338581005,
        "sender_full_name": "Mike Rossiter",
        "timestamp": 1677589306
    },
    {
        "content": "<p>BBL. Need some exercise.</p>",
        "id": 338581348,
        "sender_full_name": "Mike Rossiter",
        "timestamp": 1677589401
    }
]