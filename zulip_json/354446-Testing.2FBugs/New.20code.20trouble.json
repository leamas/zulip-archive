[
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"399510\">@Alec Leamas</span> <br>\nAfter <a href=\"https://github.com/opencpn/OpenCPN/issues/4770\">#4770</a> O don't start.<br>\nDebug:<br>\nIn:C:\\Program Files\\Microsoft Visual Studio\\2022\\Community\\VC\\Tools\\MSVC\\14.44.35207\\include\\vector</p>\n<p><a href=\"/user_uploads/33951/3Wq5MwNzg77kUg7BoqXB-03A/bild.png\">bild.png</a><br>\nCall stack</p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/33951/3Wq5MwNzg77kUg7BoqXB-03A/bild.png\" title=\"bild.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"916x473\" src=\"/user_uploads/thumbnail/33951/3Wq5MwNzg77kUg7BoqXB-03A/bild.png/840x560.webp\"></a></div><div class=\"codehilite\"><pre><span></span><code>&gt;   opencpn.exe!std::vector&lt;int,std::allocator&lt;int&gt;&gt;::_Emplace_reallocate&lt;int const &amp;&gt;(int * const _Whereptr, const int &amp; &lt;_Val_0&gt;) Line 903    C++\n    [Inline Frame] opencpn.exe!std::vector&lt;int,std::allocator&lt;int&gt;&gt;::_Emplace_one_at_back(const int &amp;) Line 848 C++\n    [Inline Frame] opencpn.exe!std::vector&lt;int,std::allocator&lt;int&gt;&gt;::push_back(const int &amp; _Val) Line 933   C++\n    opencpn.exe!Quilt::Compose(const ViewPort &amp; vp_in) Line 2440    C++\n    opencpn.exe!ChartCanvas::SetViewPoint(double lat, double lon, double scale_ppm, double skew, double rotation, int projection, bool b_adjust, bool b_refresh) Line 5526  C++\n    opencpn.exe!ChartCanvas::DoCanvasUpdate() Line 1590 C++\n    opencpn.exe!MyFrame::DoChartUpdate() Line 6263  C++\n    opencpn.exe!MyApp::OnInit() Line 1544   C++\n    [External Code]\n    [Frames below may be incorrect and/or missing, no symbols loaded for wxbase32u_vc14x.dll]\n    opencpn.exe!WinMain(HINSTANCE__ * hInstance, HINSTANCE__ * hPrevInstance, char * lpCmdLine, int nCmdShow) Line 488  C++\n    [External Code]\n</code></pre></div>",
        "id": 540172457,
        "sender_full_name": "Håkan Svensson",
        "timestamp": 1758183289
    },
    {
        "content": "<p>We can't have this. Reverting it for now in <a href=\"https://github.com/opencpn/OpenCPN/commit/780252f32\">780252f32</a>  and <a href=\"https://github.com/opencpn/OpenCPN/commit/bb7a55c46\">bb7a55c46</a>. Thanks.</p>",
        "id": 540192067,
        "sender_full_name": "Alec Leamas",
        "timestamp": 1758188882
    },
    {
        "content": "<p>Thanks, now O starts again.</p>",
        "id": 540197091,
        "sender_full_name": "Håkan Svensson",
        "timestamp": 1758190586
    },
    {
        "content": "<p>Don't know what happened, probably some late rebase which went wrong. ENOTIME for now.</p>",
        "id": 540197349,
        "sender_full_name": "Alec Leamas",
        "timestamp": 1758190683
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"399510\">@Alec Leamas</span> <span class=\"user-mention\" data-user-id=\"517002\">@Dave Register</span> <br>\nIt seems that the canvas menu background color for Win, see code snippet, is broken. The \"DILG1\" would be grey but it's black instead. On \"Mouse over\" it's instead blue. See pictures.</p>\n<p>Other dialogs like \"Objects query\" are as usual, background light grey and foreground black. These dialogs color scheme is not cursor dependent.</p>\n<div class=\"codehilite\"><pre><span></span><code>void CanvasMenuHandler::PrepareMenuItem(wxMenuItem *item) {\n#if defined(__WXMSW__)\n  wxColour ctrl_back_color = GetGlobalColor(\"DILG1\");  // Control Background\n  item-&gt;SetBackgroundColour(ctrl_back_color);\n  wxColour menu_text_color = GetGlobalColor(\"UITX1\");\n  item-&gt;SetTextColour(menu_text_color);\n#endif\n</code></pre></div>\n<p>Normal DAY table:<br>\n<a href=\"/user_uploads/33951/fKU8ak4MmZplvLPDfx5yHymg/bild.png\">bild.png</a><br>\nWhen cursor is over the menu description. (Still DAY)<br>\n<a href=\"/user_uploads/33951/-jVzNkdthN2Ynp659lnfxMRU/bild.png\">bild.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/33951/fKU8ak4MmZplvLPDfx5yHymg/bild.png\" title=\"bild.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"432x201\" src=\"/user_uploads/thumbnail/33951/fKU8ak4MmZplvLPDfx5yHymg/bild.png/840x560.webp\"></a></div><div class=\"message_inline_image\"><a href=\"/user_uploads/33951/-jVzNkdthN2Ynp659lnfxMRU/bild.png\" title=\"bild.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"416x129\" src=\"/user_uploads/thumbnail/33951/-jVzNkdthN2Ynp659lnfxMRU/bild.png/840x560.webp\"></a></div>",
        "id": 540664662,
        "sender_full_name": "Håkan Svensson",
        "timestamp": 1758468458
    },
    {
        "content": "<p>Hm... Is this a new thing?</p>",
        "id": 540664739,
        "sender_full_name": "Alec Leamas",
        "timestamp": 1758468523
    },
    {
        "content": "<p>Yes, rather new. No bisect but let's say a month?</p>",
        "id": 540666003,
        "sender_full_name": "Håkan Svensson",
        "timestamp": 1758469656
    },
    {
        "content": "<p>Since you have the test case:  could you possibly make s bisect?</p>",
        "id": 540666096,
        "sender_full_name": "Alec Leamas",
        "timestamp": 1758469741
    },
    {
        "content": "<p>Hmm. I tested 0 5.12.2 and it was there as well. I'll check some other Win PCs before further code investigations. I'll be back.</p>",
        "id": 540677115,
        "sender_full_name": "Håkan Svensson",
        "timestamp": 1758480930
    },
    {
        "content": "<p>So, no problem on other of my Win's. Obviously this PC. The reason why I mentioned it here was the difference between e.g. Object query and the Canvas menu.</p>",
        "id": 540678413,
        "sender_full_name": "Håkan Svensson",
        "timestamp": 1758482468
    },
    {
        "content": "<p>\"mystified\"</p>",
        "id": 540678477,
        "sender_full_name": "Alec Leamas",
        "timestamp": 1758482556
    },
    {
        "content": "<p>Now I'm a little embarrassed because the general advice to update the driver for the graphics card solved the problem. Sorry for the noise. Case closed.</p>",
        "id": 540682179,
        "sender_full_name": "Håkan Svensson",
        "timestamp": 1758486016
    },
    {
        "content": "<p>;)</p>",
        "id": 540715662,
        "sender_full_name": "Alec Leamas",
        "timestamp": 1758521680
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"399510\">@Alec Leamas</span> <span class=\"user-mention\" data-user-id=\"517002\">@Dave Register</span> <br>\nWin11: Today's master builds but won't run due to a OpenGL issue.<br>\nFails in .\\gui\\src\\ocpn_platform.cpp : 722<br>\nCall stack:</p>\n<div class=\"codehilite\"><pre><span></span><code>wxmsw32u_core_vc14x.dll!705f97c3()  Unknown\n    [Frames below may be incorrect and/or missing, no symbols loaded for wxmsw32u_core_vc14x.dll]\n    [External Code]\n&gt;   opencpn.exe!OCPNPlatform::BuildGLCaps(void * pbuf) Line 723 C++\n    opencpn.exe!OCPNPlatform::IsGLCapable() Line 834    C++\n    opencpn.exe!OCPNPlatform::Initialize_3() Line 517   C++\n    opencpn.exe!MyApp::OnInit() Line 1231   C++\n    [External Code]\n    opencpn.exe!WinMain(HINSTANCE__ * hInstance, HINSTANCE__ * hPrevInstance, char * lpCmdLine, int nCmdShow) Line 338  C++\n    [External Code]\n</code></pre></div>\n<p>Shot of debug crash:<br>\n<a href=\"/user_uploads/33951/L9Y5m1ipUHIwRBx-ys6o8l4m/bild.png\">bild.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/33951/L9Y5m1ipUHIwRBx-ys6o8l4m/bild.png\" title=\"bild.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"829x428\" src=\"/user_uploads/thumbnail/33951/L9Y5m1ipUHIwRBx-ys6o8l4m/bild.png/840x560.webp\"></a></div>",
        "id": 541318808,
        "sender_full_name": "Håkan Svensson",
        "timestamp": 1758743320
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"573239\">@Pavel Kalian</span> @All<br>\nAbout today's commit 097a270 \"Update wxWidgets to 3.2.9\"<br>\nI tested the updated winconfig.bat on a W11. <br>\nAfter build the log file still claim 3.2.8, see below, and what's more troubled is that all external plugins are rejected and can't be reinstalled. <br>\nThis was on a PC where everything is related to winconfig.bat.</p>\n<p>On another W11 where wx is still on the c:\\root i got the same failures when updated with the files mentioned in the commit:<br>\nwxMSW-3.2.9_vc14x_Dev.7z<br>\nwxWidgets-3.2.9-headers.7z<br>\nwxMSW-3.2.9_vc14x_ReleaseDLL.7z<br>\nWhen I afterwards also fetched and updated:<br>\nwxWidgets-3.2.9.7z<br>\nEverything seams OK after a total rebuild. The log file claimed: 3.2.9 and all external plugins could again be installed.<br>\nIf my method is correct I don't know but it helped???</p>\n<div class=\"codehilite\" data-code-language=\"Text only\"><pre><span></span><code>13:44:53.757    INFO logger.cpp:130 ------- OpenCPN version 5.13.0 restarted at 2025-12-30 -------\n\n13:44:53.757    INFO logger.cpp:130 Using loglevel INFO\n13:44:53.757 MESSAGE ocpn_app.cpp:880 wxWidgets version: wxWidgets 3.2.8 Microsoft Windows NT 64 bit wxMSW\n</code></pre></div>",
        "id": 565793944,
        "sender_full_name": "Håkan Svensson",
        "timestamp": 1767104459
    },
    {
        "content": "<p>btw: On the W11 where wx is on root I also updated:<br>\nwxMSW-3.2.9_vc14x_ReleasePDB.7z<br>\nIf that's relevant?</p>",
        "id": 565796643,
        "sender_full_name": "Håkan Svensson",
        "timestamp": 1767106187
    },
    {
        "content": "<p>On every wxWidgets (or other dependency) update you should probably clean and rebuild the locally cached stuff (I simply delete both the <code>cache</code> and <code>build</code> folders and run <code>winConfig.bat</code>), otherwise all kinds of very weird stuff may and sometimes will happen.<br>\nThe CI product works just fine for me (as in installs, starts and loads all the previously existing plugins), which means there probably is nothing to investigate. Or did I miss something in your report that seems to be broken by the wx update?</p>",
        "id": 565797733,
        "sender_full_name": "Pavel Kalian",
        "timestamp": 1767106808
    },
    {
        "content": "<p>I did deleted all in \\build, but nothing in \\cache.<br>\nI can for sure test that. If that's he solution maybe winconfig.bat should clean it before update? But I'll make a test and come back. (Takes some time :))</p>",
        "id": 565800547,
        "sender_full_name": "Håkan Svensson",
        "timestamp": 1767108413
    },
    {
        "content": "<p>There also is <code>..\\ocpn_wxWidgets</code>. I don't think the script has any perception of \"this is an update, I need to do more stuff\" at the moment.</p>",
        "id": 565801126,
        "sender_full_name": "Pavel Kalian",
        "timestamp": 1767108682
    }
]