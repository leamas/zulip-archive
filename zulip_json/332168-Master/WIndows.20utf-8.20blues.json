[
    {
        "content": "<p>Dear all,</p>\n<p>Trying to use utf on windows i. e. to render utf-8 sources on unicode windows APIs. The general idea is that wxWidgets should fix it. Now I have this snippet:</p>\n<div class=\"codehilite\"><pre><span></span><code>static const auto kUtfGear = wxString::Format(&quot;%c&quot;, 0x2699);\nstatic const auto kUtfTrashbin = wxString::Format(&quot;%lc&quot;, 0x1f5d1);\n</code></pre></div>\n<p>Of these, kUtfGear works fine. However, the 32-bit kUtfTrashbin fails miserably on Windows. Other platforms, at least  Linux, seems ok.</p>\n<p>Has anyone an idea how to handle utf codepoints with more than 16 bits on windows?</p>",
        "id": 491791311,
        "sender_full_name": "Alec Leamas",
        "timestamp": 1735927282
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"522729\">@Dan Dickey</span>  ^</p>",
        "id": 491791388,
        "sender_full_name": "Alec Leamas",
        "timestamp": 1735927313
    },
    {
        "content": "<p>Not sure how using wxString but I think this should work using std lib:</p>\n<div class=\"codehilite\"><pre><span></span><code>static const std::u32string kUtfGear = U&quot;\\U00002699&quot;;\nstatic const std::u32string kUtfTrashbin =U&quot;\\0001f5d1&quot;;\n</code></pre></div>\n<p>I did not take time to build a small test case, but I will later.  Have to go visit the boat just now. But maybe this is a hint to drive further experimentation with wxString.</p>",
        "id": 491879584,
        "sender_full_name": "Dan Dickey",
        "timestamp": 1735999209
    },
    {
        "content": "<p>Thanks... I will make Linux tests later, happy if you can test this on Windows. </p>\n<p>There is no need for test case. You can just rebuild <a href=\"https://github.com/opencpn/OpenCPN/issues/4283\">#4283</a>. Everything lives in connections_dlg.cpp. Result visible using the menu bar,  Tools | Connections</p>",
        "id": 491881302,
        "sender_full_name": "Alec Leamas",
        "timestamp": 1736000870
    },
    {
        "content": "<p>This should work:</p>\n<div class=\"codehilite\"><pre><span></span><code>static const wxString kUtfTrashbin =\n    wxString::FromUTF8(u8&quot;\\U0001F5D1&quot;);  // Unicode character for ðŸ—‘ (trashcan)\n</code></pre></div>\n<p>I suspect auto is not as clever as we might want it to be.</p>",
        "id": 491890023,
        "sender_full_name": "Dan Dickey",
        "timestamp": 1736008821
    }
]