[
    {
        "content": "<p>Confirmed.  On Jammy...</p>\n<ol>\n<li>clean out all wxWidgets stuff</li>\n<li>uninstall any OCPN leftover</li>\n<li>disable OCPN Beta PPa</li>\n<li>enable OCPN production PPA</li>\n<li>Install O584</li>\n<li>Re-enable OCPN Beta PPA</li>\n<li>update OCPN</li>\n</ol>\n<p>dsr@dsr-Aspire-E5-576:~$ sudo apt install opencpn<br>\nReading package lists... Done<br>\nBuilding dependency tree... Done<br>\nReading state information... Done<br>\nSome packages could not be installed. This may mean that you have<br>\nrequested an impossible situation or if you are using the unstable<br>\ndistribution that some required packages have not yet been created<br>\nor been moved out of Incoming.<br>\nThe following information may help to resolve the situation:</p>\n<p>The following packages have unmet dependencies:<br>\n libwxbase3.2-1 : Breaks: libwxbase3.2-0 but 3.2.1+dfsg-1ubuntu1~bpo22.04.2 is to be installed<br>\n libwxgtk3.2-1 : Breaks: libwxgtk3.2-0 but 3.2.1+dfsg-1ubuntu1~bpo22.04.2 is to be installed<br>\nE: Error, pkgProblemResolver::Resolve generated breaks, this may be caused by held packages.<br>\ndsr@dsr-Aspire-E5-576:~$</p>",
        "id": 448865485,
        "sender_full_name": "Dave Register",
        "timestamp": 1720017080
    },
    {
        "content": "<p>OK, I have something to work with. Found another issue on Focal. I'm on  it, but it will probably take some time</p>",
        "id": 448865934,
        "sender_full_name": "Alec Leamas",
        "timestamp": 1720017142
    },
    {
        "content": "<p>2 messages were moved here from <a class=\"stream-topic\" data-stream-id=\"432618\" href=\"/#narrow/stream/432618-OCPN-5.2E10-Release-plan/topic/Beta.20Schedule\">#OCPN 5.10 Release plan &gt; Beta Schedule</a> by <span class=\"user-mention silent\" data-user-id=\"399510\">Alec Leamas</span>.</p>",
        "id": 448889412,
        "sender_full_name": "Notification Bot",
        "timestamp": 1720022206
    },
    {
        "content": "<p>As of now I don't really see that is is possible to make a clean update from PPA -&gt; new package. Brain dump ahead.</p>\n<p>Hard problems comes from the fact that new package is opencpn + opencpn-data while the PPA pkg is a single one.</p>\n<p>What we want to do is to let for example opencpn-data replace the PPA opencpn pkg. OTOH we can't let it replace itself. </p>\n<p>This means we want new opencpn-data to replace opencpn for versions &gt; 7000 but less than 1:1. &gt; 7000 means a PPA package , &lt; 1:1 means less than the new epoch.</p>\n<p>However, the control file does not allow for this this in the Breaks: and Replaces: stanzas.  There is basically no &amp;&amp; operation between different deps, just || . </p>\n<p>Net result: users must uninstall current version before installing the new.</p>\n<p>Need a break, my head does not work as it should. To make it more interesting I'm not that keen on coming back to debian-devel with this problem :)</p>",
        "id": 448892449,
        "sender_full_name": "Alec Leamas",
        "timestamp": 1720022739
    },
    {
        "content": "<p>Focal: issue fixed and pushed, but see above on wxwidgets</p>",
        "id": 448914813,
        "sender_full_name": "Alec Leamas",
        "timestamp": 1720029215
    },
    {
        "content": "<p>jammy: problem is that launchpad generates \"old\" deps, the build host does not look updated. The typical problem: package wants libwxgtk3.2-0, but the package available is libwxgtk3.2-1</p>",
        "id": 448915199,
        "sender_full_name": "Alec Leamas",
        "timestamp": 1720029356
    },
    {
        "content": "<p>jammy:  problem solved, installs fine locally over both the PPA and the official package.</p>",
        "id": 448926191,
        "sender_full_name": "Alec Leamas",
        "timestamp": 1720033038
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"517002\">@Dave Register</span>  ^</p>",
        "id": 448926221,
        "sender_full_name": "Alec Leamas",
        "timestamp": 1720033049
    },
    {
        "content": "<p>Can we replace the current 1:5.9.2 jammy in the repo?  Or must we wait for Beta-3?</p>",
        "id": 448931188,
        "sender_full_name": "Dave Register",
        "timestamp": 1720034444
    },
    {
        "content": "<p>There should be no problem to update it, the changes are just in packaging i. e., the last digit.</p>",
        "id": 448932518,
        "sender_full_name": "Alec Leamas",
        "timestamp": 1720034785
    },
    {
        "content": "<p>OK, Ill build and dput.</p>",
        "id": 448933999,
        "sender_full_name": "Dave Register",
        "timestamp": 1720035279
    },
    {
        "content": "<p>Jammy building now.<br>\nStill something very funny about email messages from launchpad.  They arrive very late, maybe even the next day.  But with time stamps consistent with the actual time of the operation.<br>\nLearning to live with it.</p>",
        "id": 448935909,
        "sender_full_name": "Dave Register",
        "timestamp": 1720036029
    },
    {
        "content": "<p>I suspect that it is not really about launchpad but rather something in the transport.  I get the emails as expected.</p>\n<p>If you expand the headers in a delayed email  you should be able to see all timestamps, sorting out where the delay is.</p>",
        "id": 448936376,
        "sender_full_name": "Alec Leamas",
        "timestamp": 1720036208
    },
    {
        "content": "<p>New problem:<br>\nDon't know if this will break the debian model.<br>\nBut we need for the OCPN package to include (as dependency) the opencpn-sglock-xxx package.  The production release of O584 on launchpad PPA does so.  But the !:5.9.2 builds do not.<br>\nNot exactly sure about bookworm backports build of O.<br>\nNot sure how this fell off the dependency list.<br>\nThoughts?</p>",
        "id": 448937953,
        "sender_full_name": "Dave Register",
        "timestamp": 1720036845
    },
    {
        "content": "<p>The sglock libs were in the \"Recommends\" section of the debian/control file used by the legacy PPA builds.<br>\nThey do not appear in the e.g. ubuntu/jammy branch of debian/control.</p>",
        "id": 448938913,
        "sender_full_name": "Dave Register",
        "timestamp": 1720037136
    },
    {
        "content": "<p>Should not be a problem to add at all</p>",
        "id": 448939842,
        "sender_full_name": "Alec Leamas",
        "timestamp": 1720037423
    },
    {
        "content": "<p>Don't remember the details. Do we build that library as part of the overall opencpn build?</p>",
        "id": 448940064,
        "sender_full_name": "Alec Leamas",
        "timestamp": 1720037494
    },
    {
        "content": "<p>No, it is a separate library that I maintain in the Production PPA.<br>\nThe sglock library, in turn, requires libusb-0.1-4.</p>\n<p>This is what we had in legacy PPA builds:</p>\n<div class=\"codehilite\"><pre><span></span><code>Recommends: xcalib,xdg-utils,opencpn-doc,opencpn-sglock-amd64,opencpn-sglock-arm64,opencpn-sglock-arm32,libusb-0.1-4\n</code></pre></div>",
        "id": 448940637,
        "sender_full_name": "Dave Register",
        "timestamp": 1720037663
    },
    {
        "content": "<p>OK, small steps. Adding Recommends:  is a no-brainer.  In order to resolve this users still needs the PPA, but nothing should break if they don't need it and thus don't uses the PPA.</p>",
        "id": 448941059,
        "sender_full_name": "Alec Leamas",
        "timestamp": 1720037790
    },
    {
        "content": "<p>Moving the sglock to Debian might be hard or impossible since this is not FOSS.  I think Ubuntu is somewhat more relaxed about it. But we can postpone this to later.</p>",
        "id": 448941550,
        "sender_full_name": "Alec Leamas",
        "timestamp": 1720037938
    },
    {
        "content": "<p>Indeed.  The (only) annoying part of our \"plugins-in-user-space\" model.<br>\nI guess the sglock libs are not included in the bookworm backports repo?</p>",
        "id": 448942054,
        "sender_full_name": "Dave Register",
        "timestamp": 1720038092
    },
    {
        "content": "<p>No.</p>\n<p>The basic problem is that a  sglock package needs to go into the Debian non-free section, and I don't know how it works. That said, one could argue the sglock is a driver for the dongle, so I think I should be able to sort it out.</p>\n<p>Will drop a new message on debian-devel later today. That's a start, but let's  not focus on this. Most users have no dongle.</p>",
        "id": 448944628,
        "sender_full_name": "Alec Leamas",
        "timestamp": 1720038884
    },
    {
        "content": "<p>.... well, if we cannot package it we can download it in the same way as charts and plugins. Soemwhat more work, but unaffected by downstream policies and would work everywhere.</p>\n<p>Let's see what debian thinks: <a href=\"https://lists.debian.org/debian-devel/2024/07/msg00063.html\">https://lists.debian.org/debian-devel/2024/07/msg00063.html</a></p>",
        "id": 448948765,
        "sender_full_name": "Alec Leamas",
        "timestamp": 1720040532
    },
    {
        "content": "<p>Yes, OK, defer the debian question.  We can make it work for PPA now.<br>\nRant<br>\nThis workflow is taxing my patience.  Launchpad shows Jammy ...bpo2204.3 is published.  But does not show as installable after multiple apt updates.  Now been \"published\" for over 45 minutes.   I my memory, launchpad was not this slow last year.<br>\n/Rant</p>",
        "id": 448949399,
        "sender_full_name": "Dave Register",
        "timestamp": 1720040765
    },
    {
        "content": "<p>And now it is available.  All I need do is \"Rant\", and the gods relent.  :)</p>",
        "id": 448950166,
        "sender_full_name": "Dave Register",
        "timestamp": 1720040951
    },
    {
        "content": "<p>perhaps not your rant, perhaps it was because I just checked ;)</p>",
        "id": 448950416,
        "sender_full_name": "Alec Leamas",
        "timestamp": 1720041048
    },
    {
        "content": "<p>Sorry, still problems.<br>\nJammy, try to install Beta-2 over O584 Production</p>\n<p>The following packages have unmet dependencies:<br>\n opencpn : Depends: libwxbase3.2-0 (&gt;= 3.2.1+dfsg) but it is not installable<br>\n           Depends: libwxgtk-webview3.2-0 (&gt;= 3.2.1+dfsg) but it is not installable<br>\n           Depends: libwxgtk3.2-0 (&gt;= 3.2.0+dfsg) but it is not installable</p>",
        "id": 448950954,
        "sender_full_name": "Dave Register",
        "timestamp": 1720041273
    },
    {
        "content": "<p>No, I can see the same error also n .3</p>",
        "id": 448950961,
        "sender_full_name": "Alec Leamas",
        "timestamp": 1720041280
    },
    {
        "content": "<p>This is despite local installation tests. Stay tuned.</p>",
        "id": 448951026,
        "sender_full_name": "Alec Leamas",
        "timestamp": 1720041309
    },
    {
        "content": "<p>Not to \"pile-on\", but can we get the \"recommends\" at the same time?  CF users have noticed....</p>",
        "id": 448951134,
        "sender_full_name": "Dave Register",
        "timestamp": 1720041360
    },
    {
        "content": "<p>That is no problem, will do. Wxwidgets is the problem...</p>",
        "id": 448951482,
        "sender_full_name": "Alec Leamas",
        "timestamp": 1720041520
    },
    {
        "content": "<p>Some progress on the mess. I think the root cause is that the beta is linked against wxWidgets  3.2.1 whereas the 5.8.4 is linked against 3.2.2.  This is because  of different wxWidgets versions in the beta repo vs the production.</p>\n<p>This means that in order to install the beta we have  to downgrade wxwidgets. No packaging system likes that.</p>\n<p>This is just a plain bug we need to fix, not sure it's the complete story. That said, how complicated would it be  to update the beta repo's wxwidgets to same state as the official?</p>",
        "id": 448960470,
        "sender_full_name": "Alec Leamas",
        "timestamp": 1720045382
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"517002\">@Dave Register</span></p>",
        "id": 448960561,
        "sender_full_name": "Alec Leamas",
        "timestamp": 1720045434
    },
    {
        "content": "<p>Otherwise I have created a wxwidgets3.2 repo at <a href=\"https://launchpad.net/~leamas-alec/+archive/ubuntu/wxwidgets3.2\">https://launchpad.net/~leamas-alec/+archive/ubuntu/wxwidgets3.2</a>; it is at 3.2.2.  You should be able to just link this as a ppa dependency using  <em>leamas-alec/wxwidgets3.2</em>.  No need to remove existing 3.1.1 build, apt will use 3.2.2 from my repo</p>",
        "id": 448967225,
        "sender_full_name": "Alec Leamas",
        "timestamp": 1720048650
    },
    {
        "content": "<p>I have added dependency to OCPN Beta build,  your wx3.2.2 repo.<br>\nI'll need a bumped version to rebuild.</p>",
        "id": 448969996,
        "sender_full_name": "Dave Register",
        "timestamp": 1720050254
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"399510\">@Alec Leamas</span> <br>\nI have added dependency to OCPN Beta build, your wx3.2.2 repo.<br>\nI'll need a bumped 5.9.2 version to rebuild the Beta-2 package.</p>",
        "id": 448970729,
        "sender_full_name": "Dave Register",
        "timestamp": 1720050668
    },
    {
        "content": "<p>Good morning. Pushed a bump, ready for the debuild + dput.</p>",
        "id": 449021212,
        "sender_full_name": "Alec Leamas",
        "timestamp": 1720078450
    },
    {
        "content": "<p>Forgot the sglock thing, fix in next bump. Let's focus on wxwidgets for now.</p>\n<p>That said, got a nice reply on debian-devel. It basically boils down to that packaging sglock should be fine. Two points:</p>\n<ul>\n<li>We need to sort out the license, the important part is clarifying that the library is redistributable.</li>\n<li>We should use Suggests: rather than Recommends: . Using Recommends: is to say that opencpn is unlikely to be used without the dongle which is wrong. The strong Recommends will also force opencpn into the contrib section since it will not be classified as fully free.  This is the only thing relevant now.</li>\n</ul>",
        "id": 449025576,
        "sender_full_name": "Alec Leamas",
        "timestamp": 1720079450
    },
    {
        "content": "<p>hm... the safest route is probably to remove the wxwidgets 3.2.1 build in the beta repo before uploading. I see that you already have a  link to opencpn/opencpn but that wxwidgets is seemingly not used.</p>",
        "id": 449031824,
        "sender_full_name": "Alec Leamas",
        "timestamp": 1720081410
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"517002\">@Dave Register</span> ^</p>",
        "id": 449049115,
        "sender_full_name": "Alec Leamas",
        "timestamp": 1720087172
    },
    {
        "content": "<p>dput, accepted and building now, we'll see.</p>",
        "id": 449091549,
        "sender_full_name": "Dave Register",
        "timestamp": 1720100792
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"399510\">@Alec Leamas</span> <br>\nFor whatever reason, the dput ended up attached to focal, not jammy.  Waiting on build to see what happens.</p>",
        "id": 449101046,
        "sender_full_name": "Dave Register",
        "timestamp": 1720103209
    },
    {
        "content": "<p>Build failed.<br>\nMissing build dependencies: <em>libgdk-pixbuf-2.0-dev</em></p>",
        "id": 449102240,
        "sender_full_name": "Dave Register",
        "timestamp": 1720103592
    },
    {
        "content": "<p>My bad, what we in Sweden calls a \"brain drop\". In d/changelog, top line, I for some reason wrote focal instead of jammy.  Things like missinig build deps are  then expected, that is the reason why there is different branches for different distros.</p>\n<p>Now making an isolated test build to avoid any such errors before pushing.</p>",
        "id": 449129361,
        "sender_full_name": "Alec Leamas",
        "timestamp": 1720111487
    },
    {
        "content": "<p>I am ready to pull/debuild/dput whenever you have pushed.</p>",
        "id": 449130187,
        "sender_full_name": "Dave Register",
        "timestamp": 1720111862
    },
    {
        "content": "<p>OK. It will take same time,  doing the full check in an isolated container.  You might want to do something else meantime, I'll ping in  about 15 minutes</p>",
        "id": 449130381,
        "sender_full_name": "Alec Leamas",
        "timestamp": 1720111948
    },
    {
        "content": "<p>OK.  Out for 30 mins.</p>",
        "id": 449130505,
        "sender_full_name": "Dave Register",
        "timestamp": 1720111981
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"517002\">@Dave Register</span>   pushed</p>",
        "id": 449134740,
        "sender_full_name": "Alec Leamas",
        "timestamp": 1720113419
    },
    {
        "content": "<p>dput rejected, as I expected.<br>\nRejected:<br>\nFile opencpn_5.9.2-beta2+dfsg-1ubuntu1~bpo2204.4.debian.tar.xz already exists in OpenCPN, but uploaded version has different contents. See more information about this error in <a href=\"https://help.launchpad.net/Packaging/UploadErrors\">https://help.launchpad.net/Packaging</a></p>\n<p>Need a bump to \".5\"</p>",
        "id": 449139312,
        "sender_full_name": "Dave Register",
        "timestamp": 1720115310
    },
    {
        "content": "<p>done</p>",
        "id": 449139838,
        "sender_full_name": "Alec Leamas",
        "timestamp": 1720115636
    },
    {
        "content": "<p>OK, launchpad completes build and publish.<br>\nUpgrade from O584 is smooth, no problem.</p>\n<p>However, I really would like to see the sglock package in Recommends, rather than Suggests, at least for this PPA release.  Requiring users to manually add that package is a bit of friction that seems a reversion from previous practice.<br>\nThoughts?</p>",
        "id": 449163328,
        "sender_full_name": "Dave Register",
        "timestamp": 1720126250
    },
    {
        "content": "<p><a href=\"https://www.debian.org/doc/manuals/debian-faq/pkg-basics.en.html\">https://www.debian.org/doc/manuals/debian-faq/pkg-basics.en.html</a>.  Chapter 7.9</p>",
        "id": 449168364,
        "sender_full_name": "Alec Leamas",
        "timestamp": 1720128852
    },
    {
        "content": "<p>Using R: will bite us quite hard, it means opencpn will be classified as not fully free causing all sorts of friction in both the Debian and Ubuntu communities.</p>",
        "id": 449168695,
        "sender_full_name": "Alec Leamas",
        "timestamp": 1720129092
    },
    {
        "content": "<p>Otoh, saying that suggests means manual installation is not true. On the command line it's about using an option. Graphical tools should have support like checkboxes etc.</p>",
        "id": 449169510,
        "sender_full_name": "Alec Leamas",
        "timestamp": 1720129745
    },
    {
        "content": "<p>... But then again, we can do anything in  PPA  backports. But it will end up in confusion when packages with the same version have R: or S: depending on if they are official or PPA.</p>",
        "id": 449172374,
        "sender_full_name": "Alec Leamas",
        "timestamp": 1720131060
    },
    {
        "content": "<ol>\n<li>\"classified as not fully free\".   Has not been a factor at all so far, and we have been shipping O with Recommends sglock for some years now.</li>\n<li>Friction is having to add \"--include-suggests\", or some such, to apt install CLI command.  Or remember to check the box on a GUI package manager, if you think you might someday want to use o-charts with a dongle. This workflow will be seen, reasonably, as a UX regression for our users.</li>\n</ol>\n<p>tldr;  I would like to return sglock support to \"Recommends\" in PPA for at least O5.10</p>",
        "id": 449180110,
        "sender_full_name": "Dave Register",
        "timestamp": 1720136836
    },
    {
        "content": "<p>You have the final word. That said, let's try to sort out the consequences. It's about how we handle sglock in a wider perspective. Brain dump ahead.</p>\n<p>Using the PPA is not a practical solution for Debian users. We could mitigate the consequences by creating a separate PPA containing only the sglock stuff to avoid loading wrong versions of stuff in the main opencpn PPA. It would still require Debian users to add this repo manually  to /etc/apt/sources.list.d.  Workable, but not pretty -- debian users are rightfully hesitant to add Ubuntu PPA:s to the configuration creating what's known as FrankenDebian.</p>\n<p>We can package sglock in a official non-free Debian package. Debian users will have to enable the non-free section in sources.list manually but would otherwise be fine. </p>\n<p>If we package sglock this way and have a R: opencpn-sglock opencpn will have to be moved to the contrib section. This is not that dramatic on Debian, but also means that opencpn will be imported to the Ubuntu multiverse which not is enabled by default. Using S: works around this.</p>\n<p>The third option is to download the library from within opencpn in the same way as we download charts and plugins.</p>\n<p>Possible strategy could be:</p>\n<ol>\n<li>Use R: in the PPA packages for now targeting Ubuntu users.</li>\n<li>Add a separate sglock launchpad repo and documentation for Debian users as a transition solution.</li>\n<li>In 5.12 implement downloading the driver from within opencpn,  avoiding the need to mess with PPA:s and sources.list.</li>\n</ol>\n<p>Sorry for long post. Thoughts?</p>",
        "id": 449232828,
        "sender_full_name": "Alec Leamas",
        "timestamp": 1720162742
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"517002\">@Dave Register</span> ^</p>",
        "id": 449289850,
        "sender_full_name": "Alec Leamas",
        "timestamp": 1720179206
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"399510\">@Alec Leamas</span> <br>\nYour three part strategy from today sounds workable to me.</p>\n<p>On <a href=\"https://github.com/opencpn/OpenCPN/issues/2\">#2</a>:  Maybe this should be called some sort of \"opencpn-extras\" repo, leaving the logical door open for other things in the future.</p>\n<p>The <a href=\"https://github.com/opencpn/OpenCPN/issues/3\">#3</a> is the key point.  After all, sglock relates only to o-charts, and the responsibility for loading and managing sglock rightly belongs to the o-charts plugin.  Attaching to OCPN core, as either R or S, seems like a quick but questionable shortcut that we made in the moment.  We should fix that some point soon.<br>\nBut not <em>right</em> now.</p>\n<p>Anyway, let us move ahead on this three part plan..<br>\nFocal and noble also ready soon?</p>",
        "id": 449320628,
        "sender_full_name": "Dave Register",
        "timestamp": 1720188378
    },
    {
        "content": "<p>OK, we are looking in the same direction.  Your perspective on where the library belongs is correct and better than mine.</p>\n<p>Given the overall strategy the separate repo will be abandoned at some point. For that reason it might be better to keep it focused. If there are other needs we could add new repos. Mixing different things in the same repo carries risks for using something not intended. Less is more.</p>\n<blockquote>\n<p>But not right now.</p>\n</blockquote>\n<p>Indeed. </p>\n<p>Starting to modify branches. Stay tuned.</p>",
        "id": 449322007,
        "sender_full_name": "Alec Leamas",
        "timestamp": 1720188767
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"517002\">@Dave Register</span>     All branches ready.</p>",
        "id": 449328373,
        "sender_full_name": "Alec Leamas",
        "timestamp": 1720190828
    },
    {
        "content": "<p>I'm out for a few hours. Grocery shopping.  Gotta eat...</p>",
        "id": 449328682,
        "sender_full_name": "Dave Register",
        "timestamp": 1720190939
    },
    {
        "content": "<blockquote>\n<p>Attaching to OCPN core, as either R or S, seems like a quick but questionable shortcut that we made in the momen</p>\n</blockquote>\n<p>Indeed. The more formal rules when doing \"real\" packaging are not always convenient, but they do reveal  actual problems form time to time</p>",
        "id": 449328720,
        "sender_full_name": "Alec Leamas",
        "timestamp": 1720190956
    },
    {
        "content": "<p>DInner ahead also here...</p>",
        "id": 449328824,
        "sender_full_name": "Alec Leamas",
        "timestamp": 1720190995
    },
    {
        "content": "<p>I will start the three debuild/dput now.</p>",
        "id": 449328934,
        "sender_full_name": "Dave Register",
        "timestamp": 1720191027
    },
    {
        "content": "<p>Pushed jammy, more later.</p>",
        "id": 449330142,
        "sender_full_name": "Dave Register",
        "timestamp": 1720191336
    },
    {
        "content": "<p>Build errors, I did it again: wrote focall instead of jammy. Pushed a fix.</p>",
        "id": 449337967,
        "sender_full_name": "Alec Leamas",
        "timestamp": 1720193338
    },
    {
        "content": "<p>I can build noble and jammy: <a href=\"https://launchpad.net/~leamas-alec/+archive/ubuntu/opencpn/+packages\">https://launchpad.net/~leamas-alec/+archive/ubuntu/opencpn/+packages</a></p>\n<p>However, focal fails with  a strange error which seems to be about the builder host. I can build it using pbuilder, which is an isolated container like a light-weight vm. I don't know how to do anything about it, perhaps just wait and try a new build tomorrow.<br>\n<a href=\"https://launchpadlibrarian.net/738136602/buildlog_ubuntu-focal-amd64.opencpn_1%3A5.9.2-beta2+dfsg-1ubuntu1~bpo2004.5_BUILDING.txt.gz\">https://launchpadlibrarian.net/738136602/buildlog_ubuntu-focal-amd64.opencpn_1%3A5.9.2-beta2+dfsg-1ubuntu1~bpo2004.5_BUILDING.txt.gz</a></p>",
        "id": 449376884,
        "sender_full_name": "Alec Leamas",
        "timestamp": 1720205738
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"399510\">@Alec Leamas</span> <br>\nFocal:<br>\nRejected:<br>\nopencpn_5.9.2-beta2+dfsg-1ubuntu1~bpo2004.4.dsc: Version older than that in the archive. 1:5.9.2-beta2+dfsg-1ubuntu1~bpo2004.4 &lt;= 1:5.9.2-beta2+dfsg-1ubuntu1~bpo2204.6</p>\n<p>opencpn (1:5.9.2-beta2+dfsg-1ubuntu1~bpo2004.4) focal; urgency=medium</p>\n<p>Will need to bump to \"2004.7\" to get a new build.</p>",
        "id": 449396132,
        "sender_full_name": "Dave Register",
        "timestamp": 1720212656
    },
    {
        "content": "<p>But that may be a problem since we have some 2204.6 files hanging around in the repo for Focal.</p>",
        "id": 449398302,
        "sender_full_name": "Dave Register",
        "timestamp": 1720213442
    },
    {
        "content": "<p>Ah... the ...6 files are ffrom when I  submitted  ...6 jammy build with wrong distro focal. Sigh.</p>\n<p>Pushed a commit bumping the version \"in place\" shoch should make it.</p>",
        "id": 449457427,
        "sender_full_name": "Alec Leamas",
        "timestamp": 1720253448
    },
    {
        "content": "<p>... fresh eyes: I know what the build error is about, sort of.</p>",
        "id": 449459558,
        "sender_full_name": "Alec Leamas",
        "timestamp": 1720254482
    },
    {
        "content": "<p>The problem is the leamas-alec/wxWidgets repo. !t contains a broken wxWidgets 3.1 build which cannot be updated since there are also wxWidgets 3.2 builds.</p>\n<p>I have changed the leamas-alec/wxwidgets dependency (containing both 3.1 and 3.2) to leamas-alec/wxwidgets3.2.  This makes everything build.  Interestingly it also clears <a href=\"https://github.com/opencpn/OpenCPN/issues/4027\">#4027</a> i. e., all of a sudden the armhf builds  does not fail. Not digged into why.</p>\n<p>It all makes sense, wxwidgets3.1 was a transition state. We only use 3.0 for focal and 3.2 for jammy and noble. The repo we need is 3.2 for jammy, the rest is in Ubuntu</p>",
        "id": 449478845,
        "sender_full_name": "Alec Leamas",
        "timestamp": 1720264960
    },
    {
        "content": "<p>Reference builds: <a href=\"https://launchpad.net/~leamas-alec/+archive/ubuntu/opencpn\">https://launchpad.net/~leamas-alec/+archive/ubuntu/opencpn</a></p>",
        "id": 449478865,
        "sender_full_name": "Alec Leamas",
        "timestamp": 1720264985
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"517002\">@Dave Register</span> ^</p>",
        "id": 449478877,
        "sender_full_name": "Alec Leamas",
        "timestamp": 1720264994
    },
    {
        "content": "<p>This means you might want to create new builds after changing the dependencies. I can of course help you, but here is the shortcut:</p>\n<div class=\"codehilite\"><pre><span></span><code>    $ git checkout ubuntu/whatever\n    $ git clean -fxd; git checkout .\n    $ dch -R     # Throws you in an editor. Write the log message, here &quot;Trigger new build&quot;\n    $ dch -r\n    $ git diff\n    $ git commit -am &quot; 1:5.9.2-beta2+dfsg-1ubuntu1~bpo2204.8&quot;    # Version as displayed by git diff above\n    $ debuild ...\n    $ dput ...\n    $ git push github ubuntu/whatever\n</code></pre></div>\n<p>... assuming you still call the remote github. Might of course be for example origin or upstream.</p>",
        "id": 449481135,
        "sender_full_name": "Alec Leamas",
        "timestamp": 1720265855
    },
    {
        "content": "<blockquote>\n<p>all of a sudden the armhf builds does not fail</p>\n</blockquote>\n<p>Except on noble, same old  <a href=\"https://github.com/opencpn/OpenCPN/issues/4027\">#4027</a> error.</p>",
        "id": 449482000,
        "sender_full_name": "Alec Leamas",
        "timestamp": 1720266094
    },
    {
        "content": "<p>Sorry, lost the thread.<br>\nShould I build e.g. noble now, from current github?<br>\nDo I need to change the beta repo depndencies before I dput?</p>",
        "id": 449528677,
        "sender_full_name": "Dave Register",
        "timestamp": 1720285537
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"399510\">@Alec Leamas</span> <br>\nping</p>",
        "id": 449538090,
        "sender_full_name": "Dave Register",
        "timestamp": 1720288881
    },
    {
        "content": "<p>Yes, you need to change the dependencies.  And after that make  new builds.</p>\n<p>New builds means that we need to at least bumb the version. I can do it. The alternative is that you do it yourself according to above. Let me know what you prefer.</p>",
        "id": 449550944,
        "sender_full_name": "Alec Leamas",
        "timestamp": 1720295225
    },
    {
        "content": "<p>Sorry for delay, ongoing social activities....</p>",
        "id": 449550974,
        "sender_full_name": "Alec Leamas",
        "timestamp": 1720295276
    },
    {
        "content": "<p>Anyway I pushed the <a href=\"https://github.com/opencpn/OpenCPN/issues/4027\">#4027</a> fix to ubuntu/numbat for now, so this one  can be rebuilt as it is without further bumping</p>",
        "id": 449551307,
        "sender_full_name": "Alec Leamas",
        "timestamp": 1720295539
    },
    {
        "content": "<p>So now the require depndency is:<br>\n<a href=\"https://launchpad.net/~leamas-alec/+archive/ubuntu/wxwidgets3.2\">https://launchpad.net/~leamas-alec/+archive/ubuntu/wxwidgets3.2</a><br>\n??</p>",
        "id": 449552816,
        "sender_full_name": "Dave Register",
        "timestamp": 1720296099
    },
    {
        "content": "<p>Yes. wxWidgets is evil since it mixes both 3.1 and 3.2 builds</p>",
        "id": 449553078,
        "sender_full_name": "Alec Leamas",
        "timestamp": 1720296158
    },
    {
        "content": "<p>BTW: My bad, sorry. But I just didn't see it coming</p>",
        "id": 449553270,
        "sender_full_name": "Alec Leamas",
        "timestamp": 1720296209
    },
    {
        "content": "<p>Going to bed mor or less now, so please let me know if you need me to do the \"bumping\"</p>",
        "id": 449553604,
        "sender_full_name": "Alec Leamas",
        "timestamp": 1720296286
    },
    {
        "content": "<p>Please bump jammy to 8.<br>\nI'll be lost if the shortcut fails at all...</p>",
        "id": 449554191,
        "sender_full_name": "Dave Register",
        "timestamp": 1720296429
    },
    {
        "content": "<p>Pushed new commit to focal, jammy and noble.</p>\n<p>I have built myself using that dependency, so it should be reasonably safe: <a href=\"https://launchpad.net/~leamas-alec/+archive/ubuntu/opencpn\">https://launchpad.net/~leamas-alec/+archive/ubuntu/opencpn</a></p>",
        "id": 449555521,
        "sender_full_name": "Alec Leamas",
        "timestamp": 1720296738
    },
    {
        "content": "<p>Good night...</p>",
        "id": 449555592,
        "sender_full_name": "Alec Leamas",
        "timestamp": 1720296755
    },
    {
        "content": "<p>Focal 2004.9 rejected.<br>\nRejected:<br>\nopencpn_5.9.2-beta2+dfsg-1ubuntu1~bpo2004.9.dsc: Version older than that in the archive. 1:5.9.2-beta2+dfsg-1ubuntu1~bpo2004.9 &lt;= 1:5.9.2-beta2+dfsg-1ubuntu1~bpo2204.6</p>\n<p>opencpn (1:5.9.2-beta2+dfsg-1ubuntu1~bpo2004.9) focal; urgency=medium</p>\n<p>Might need to wait until Beta-3 to correct this, and also noble \"26.04\" error.</p>",
        "id": 449590898,
        "sender_full_name": "Dave Register",
        "timestamp": 1720319600
    },
    {
        "content": "<p>Jammy and noble built and published fine.</p>",
        "id": 449603651,
        "sender_full_name": "Dave Register",
        "timestamp": 1720326633
    },
    {
        "content": "<p>We should IMO try hard to build everything OK before beta3. I have pushed a new focal version using dirty tricks. Could you please give it a try.</p>\n<p>The \"focal\" instead of \"jammy\" in the jammy build was a major mistake of mine. Lessons learned: (sigh)<br>\n1: Use <code>dch -r</code> to set both date and distro correct rather  than manual editing<br>\n2: Run lintian before pushing.</p>",
        "id": 449620179,
        "sender_full_name": "Alec Leamas",
        "timestamp": 1720340280
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"517002\">@Dave Register</span> ^</p>",
        "id": 449630586,
        "sender_full_name": "Alec Leamas",
        "timestamp": 1720346327
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"399510\">@Alec Leamas</span> <br>\nFocal accepted, building now.<br>\nTo satisfy my curiosity, what is the significance of the \"bpo\" version in the changes file name?</p>",
        "id": 449662441,
        "sender_full_name": "Dave Register",
        "timestamp": 1720361098
    },
    {
        "content": "<p>It has no significance in the beta, but It's important in the actual release. And since it will go there,  I think  we should (try to) be consistent.</p>\n<p>Looking at 5.10 there will be two versions of this  package: the one in the PPA and the official which will land in ubuntu 26.04, whatever that will be called. The PPA releases are thus technically backports  of  a 26.04 package. </p>\n<p>The suffix (if correct!)  is about ordering the official package 5.10 which eventually lands in Ubuntu and the PPA release. That is, when a user updates to 26.04 without updating opencpn the official 5.10 package will be installed over the PPA backport, there is no needs for backports when the real thing is available. </p>\n<p>Debian uses a similar scheme for backports of the same reason. They are not that convoluted there, though.</p>\n<p>From another point of view the suffix is required to keep the good relations we  are over time establishing with the Debian and Ubuntu communities. Versioning is at the core of what they do and care about.</p>",
        "id": 449667691,
        "sender_full_name": "Alec Leamas",
        "timestamp": 1720364079
    },
    {
        "content": "<p>... of course, they also support ordering of the backports without breaking the overall conditions.</p>",
        "id": 449667940,
        "sender_full_name": "Alec Leamas",
        "timestamp": 1720364318
    },
    {
        "content": "<p>Yes, I see all that.  Makes sense to follow established practice if we really want OCPN to be in base ubuntu repos going forward.<br>\nBut, what does \"bpo\" stand for?</p>\n<p>btw. Focal built and published OK.<br>\nThanks</p>",
        "id": 449688455,
        "sender_full_name": "Dave Register",
        "timestamp": 1720372125
    },
    {
        "content": "<p>bpo stands for backport.</p>\n<p>A correct suffix is like ~bpo2204+1. The ~ effectively means \"less than\" it means that anything  without the tilde is \"greater than\" the suffixed version</p>\n<p>bpo2204 means backport to 2204 i. e. backport to jammy</p>\n<p>+1 is the backport revision, it's the one incremented when we make new downstream versions from the same opencpn version.</p>\n<p>This is how it should be, there are numerous errors in beta2</p>",
        "id": 449694858,
        "sender_full_name": "Alec Leamas",
        "timestamp": 1720374389
    },
    {
        "content": "<p>Doh.. Slap on the forehead.  \"bpo\"==\"backport\"</p>",
        "id": 449697504,
        "sender_full_name": "Dave Register",
        "timestamp": 1720375355
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"517002\">@Dave Register</span> <br>\nPresent Git master gives here an error creating the package by VS2022.<br>\nThat's strange since it's builds fine upstream?<br>\nWhat I undertand it's the .html file listed below that is causing trouble when it shall be compressed. All files, also this in question, are present in the NSIS folder to be compressed.<br>\nCould it be that the long (161 chr) file name can still have impact for Windows???<br>\nThe main error as of below list: \"EXEC : CPack error : Problem compressing the directory\"</p>\n<div class=\"codehilite\" data-code-language=\"nsisoutput.log\"><pre><span></span><code>Processing script file: \"C:/Builds/OCPN/OpenCPN/build/_CPack_Packages/win32/NSIS/project.nsi\" (ACP)\n\nFile: failed opening file \"C:/Builds/OCPN/OpenCPN/build/_CPack_Packages/win32/NSIS/opencpn_5.9.1.10_setup\\doc\\chart_installation\\tb-options-charts-chartdownloader-downloadcharts-updatecat.id.opencpn_3Amanual_basic_3Aquick_start_guide_3Achart_installation_3Achartdownloader.jpg.detail.html\"\n\nError in script \"C:/Builds/OCPN/OpenCPN/build/_CPack_Packages/win32/NSIS/project.nsi\" on line 827 -- aborting creation process\n\n\n\nproject.nsi\" line 827:\n;# Install Section /hidden\nSection \"-Install Section\" SecInstall\n        ;#File \"C:/Builds/OCPN/OpenCPN/build\\_CPack_Packages\\win32\\NSIS\\opencpn_5.9.1.10_setup\\bin\\opencpn-cmd.exe\"\n        ;#File \"C:/Builds/OCPN/OpenCPN/build\\_CPack_Packages\\win32\\NSIS\\opencpn_5.9.1.10_setup\\bin\\opencpn-glutil.exe\"\n    File /r \"${INST_DIR}\\*.*\"\n\n\n\nVS error\n1&gt;EXEC : CPack error : Problem running NSIS command: \"C:/Program Files (x86)/NSIS/makensis.exe\"  \"C:/Builds/OCPN/OpenCPN/build/_CPack_Packages/win32/NSIS/project.nsi\"\n1&gt;Please check C:/Builds/OCPN/OpenCPN/build/_CPack_Packages/win32/NSIS/NSISOutput.log for errors\n1&gt;EXEC : CPack error : Problem compressing the directory\n1&gt;EXEC : CPack error : Error when generating package: OpenCPN\n1&gt;C:\\Program Files\\Microsoft Visual Studio\\2022\\Community\\MSBuild\\Microsoft\\VC\\v170\\Microsoft.CppCommon.targets(166,5): error MSB3073: The command \"setlocal\n1&gt;C:\\Program Files\\Microsoft Visual Studio\\2022\\Community\\MSBuild\\Microsoft\\VC\\v170\\Microsoft.CppCommon.targets(166,5): error MSB3073: cd C:\\Builds\\OCPN\\OpenCPN\\build\n1&gt;C:\\Program Files\\Microsoft Visual Studio\\2022\\Community\\MSBuild\\Microsoft\\VC\\v170\\Microsoft.CppCommon.targets(166,5): error MSB3073: if %errorlevel% neq 0 goto :cmEnd\n1&gt;C:\\Program Files\\Microsoft Visual Studio\\2022\\Community\\MSBuild\\Microsoft\\VC\\v170\\Microsoft.CppCommon.targets(166,5): error MSB3073: C:\n1&gt;C:\\Program Files\\Microsoft Visual Studio\\2022\\Community\\MSBuild\\Microsoft\\VC\\v170\\Microsoft.CppCommon.targets(166,5): error MSB3073: if %errorlevel% neq 0 goto :cmEnd\n1&gt;C:\\Program Files\\Microsoft Visual Studio\\2022\\Community\\MSBuild\\Microsoft\\VC\\v170\\Microsoft.CppCommon.targets(166,5): error MSB3073: \"C:\\Program Files\\CMake\\bin\\cpack.exe\" -C Release --config ./CPackConfig.cmake\n1&gt;C:\\Program Files\\Microsoft Visual Studio\\2022\\Community\\MSBuild\\Microsoft\\VC\\v170\\Microsoft.CppCommon.targets(166,5): error MSB3073: if %errorlevel% neq 0 goto :cmEnd\n1&gt;C:\\Program Files\\Microsoft Visual Studio\\2022\\Community\\MSBuild\\Microsoft\\VC\\v170\\Microsoft.CppCommon.targets(166,5): error MSB3073: :cmEnd\n1&gt;C:\\Program Files\\Microsoft Visual Studio\\2022\\Community\\MSBuild\\Microsoft\\VC\\v170\\Microsoft.CppCommon.targets(166,5): error MSB3073: endlocal &amp; call :cmErrorLevel %errorlevel% &amp; goto :cmDone\n1&gt;C:\\Program Files\\Microsoft Visual Studio\\2022\\Community\\MSBuild\\Microsoft\\VC\\v170\\Microsoft.CppCommon.targets(166,5): error MSB3073: :cmErrorLevel\n1&gt;C:\\Program Files\\Microsoft Visual Studio\\2022\\Community\\MSBuild\\Microsoft\\VC\\v170\\Microsoft.CppCommon.targets(166,5): error MSB3073: exit /b %1\n1&gt;C:\\Program Files\\Microsoft Visual Studio\\2022\\Community\\MSBuild\\Microsoft\\VC\\v170\\Microsoft.CppCommon.targets(166,5): error MSB3073: :cmDone\n1&gt;C:\\Program Files\\Microsoft Visual Studio\\2022\\Community\\MSBuild\\Microsoft\\VC\\v170\\Microsoft.CppCommon.targets(166,5): error MSB3073: if %errorlevel% neq 0 goto :VCEnd\n1&gt;C:\\Program Files\\Microsoft Visual Studio\\2022\\Community\\MSBuild\\Microsoft\\VC\\v170\\Microsoft.CppCommon.targets(166,5): error MSB3073: :VCEnd\" exited with code 1.\n1&gt;Done building project \"PACKAGE.vcxproj\" -- FAILED.\n</code></pre></div>",
        "id": 451781696,
        "sender_full_name": "Håkan Svensson",
        "timestamp": 1721142650
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"522486\">@Håkan Svensson</span> <br>\nJust for fun, if you remove that particular long file name, does it succeed in building the package?<br>\nOf course, there may be more long file names encountered later...</p>",
        "id": 451836844,
        "sender_full_name": "Dave Register",
        "timestamp": 1721156302
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"517002\">@Dave Register</span> <br>\nI actually just tested to change the long file names to the half length in \"data\\doc\\chart_installation\" and now he instead fail on a long file-name in \"data\\doc\\connection_setup\".<br>\nSo the file name lengths seems crucial. I wonder who has a limit anywhere?</p>",
        "id": 451837563,
        "sender_full_name": "Håkan Svensson",
        "timestamp": 1721156533
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"517002\">@Dave Register</span> <br>\nI found a note about this <a href=\"https://stackoverflow.com/questions/72881517/how-can-i-add-directory-with-long-name-files-more-260-symbols-to-cmake-cpack-n\">here</a>  linking to this <a href=\"https://learn.microsoft.com/en-us/windows/win32/fileio/maximum-file-path-limitation?tabs=powershell\">MS site</a><br>\nI changed the registry key \"<code>\\LongPathsEnabled</code> to read 1 and reboot. But..<br>\nI don't really understand the second part \"The <a href=\"https://learn.microsoft.com/en-us/windows/win32/sbscs/application-manifests\">application manifest</a> must also include the <code>longPathAware</code> element.\"<br>\nHow can I make a \"application manifest\"? I suppose it would be valid for \"CPack\" or maybe VS2022?</p>",
        "id": 451847295,
        "sender_full_name": "Håkan Svensson",
        "timestamp": 1721159333
    },
    {
        "content": "<p>For a test I added as of below diff, but it didn't helped. It builds but the same package creation error.<br>\n(Do we really need these long file names?)</p>\n<div class=\"codehilite\"><pre><span></span><code>diff --git a/app.manifest b/app.manifest\nindex 441de1c9b..acaf7f59b 100644\n--- a/app.manifest\n+++ b/app.manifest\n@@ -31,6 +31,9 @@\n       &lt;supportedOS Id=&quot;{1f676c76-80e1-4239-95bb-83d0f6d0da78}&quot; /&gt;\n       &lt;!-- Windows 10 --&gt;\n       &lt;supportedOS Id=&quot;{8e0f7a12-bfb3-4fe8-b9a5-48fd50a15a9a}&quot; /&gt;\n+         &lt;asmv3:windowsSettings xmlns:ws2=&quot;http://schemas.microsoft.com/SMI/2016/WindowsSettings&quot;&gt;\n+      &lt;ws2:longPathAware&gt;true&lt;/ws2:longPathAware&gt;\n+      &lt;/asmv3:windowsSettings&gt;\n     &lt;/application&gt;\n   &lt;/compatibility&gt;\n &lt;/assembly&gt;\n</code></pre></div>",
        "id": 451856760,
        "sender_full_name": "Håkan Svensson",
        "timestamp": 1721162252
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"517002\">@Dave Register</span> <br>\nInstead of Windows manipulation could we somewhere, in NSIS?, set a subst for the path to .\\doc since the document name itself is no longer than 260. Compare to the working upstream build where the path is like: N:\\OpenCPN\\... </p>\n<p>Use of  the \"\\\\?\\\" prefix may be a solution but seems troublesome?</p>",
        "id": 451971698,
        "sender_full_name": "Håkan Svensson",
        "timestamp": 1721201564
    },
    {
        "content": "<p>The use of N: was introduced to make the pdb files created by the build usable for other developers. Seems that the shorter paths also have other benefits.</p>",
        "id": 451974316,
        "sender_full_name": "Alec Leamas",
        "timestamp": 1721202136
    },
    {
        "content": "<p>Yes, but we're still really close to the 256 limit. Using N:/ instead of, my case, C:/Builds/OCPN/  earns 12 from 263.</p>",
        "id": 452061982,
        "sender_full_name": "Håkan Svensson",
        "timestamp": 1721221009
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"522486\">Håkan Svensson</span> <a href=\"#narrow/stream/432618-OCPN-5.2E10-Release-plan/topic/New.20package.20installation/near/451971698\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"517002\">Dave Register</span> <br>\nCompare to the working upstream build where the path is like: N:\\OpenCPN\\... </p>\n<p>Since it works it might be worth a try?</p>\n</blockquote>",
        "id": 452127523,
        "sender_full_name": "Alec Leamas",
        "timestamp": 1721234369
    },
    {
        "content": "<p>We do not have explicit control of the document file naming scheme.  Working to understand that now, but appears to be \"baked-in\" to Wiki export utility.<br>\nMore as we know it...</p>",
        "id": 452134054,
        "sender_full_name": "Dave Register",
        "timestamp": 1721235997
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"517002\">@Dave Register</span> <br>\nWe may need another copy from the Wiki?<br>\nLinks and search marked at these pictures don't work or are obsolet.<br>\n<a href=\"/user_uploads/33951/4_4NnbS1mcaPb9lccAuqoCX_/bild.png\">bild.png</a><br>\n<a href=\"/user_uploads/33951/W9qxnJGlfai7n4Yh6RLYYzVg/bild.png\">bild.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/33951/4_4NnbS1mcaPb9lccAuqoCX_/bild.png\" title=\"bild.png\"><img src=\"/user_uploads/33951/4_4NnbS1mcaPb9lccAuqoCX_/bild.png\"></a></div><div class=\"message_inline_image\"><a href=\"/user_uploads/33951/W9qxnJGlfai7n4Yh6RLYYzVg/bild.png\" title=\"bild.png\"><img src=\"/user_uploads/33951/W9qxnJGlfai7n4Yh6RLYYzVg/bild.png\"></a></div>",
        "id": 452144823,
        "sender_full_name": "Håkan Svensson",
        "timestamp": 1721238525
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"399510\">@Alec Leamas</span> <span class=\"user-mention\" data-user-id=\"573239\">@Pavel Kalian</span> <br>\nAbout the new embedded user manual:<br>\nCurrently bundled on Win and MacOS only.  CI downloads a zipped copy of directory \"data/doc\", unzips on the fly, adjusts permissions (MacOS only), and so is made available to the installer.<br>\nDownloading and unzipping is different from CI process for O584.  In 584, the doc files were committed to the OCPN repo.  No zip file download/unzip required.<br>\nQuestion:  Where is a good place to host the zipped doc files?  Presently they are on OpenCPN's DropBox account.  CI finds them there, with awful urls.<br>\nI guess the zip file could be hosted on github, in a new repo.  That seems a little strange, though.  github's tagged release process tries to publish a zipped copy of the repo.  so we would get a zipped zip.  Odd.</p>\n<p>Other ideas? Your thoughts solicited.</p>",
        "id": 452233894,
        "sender_full_name": "Dave Register",
        "timestamp": 1721271559
    },
    {
        "content": "<p>A new, dedicated cloudsmith repo.</p>",
        "id": 452236216,
        "sender_full_name": "Alec Leamas",
        "timestamp": 1721272834
    },
    {
        "content": "<p>Also, we need to add this folder to .gitignore.</p>",
        "id": 452332599,
        "sender_full_name": "Dan Dickey",
        "timestamp": 1721306020
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"399510\">@Alec Leamas</span> <br>\nCloudsmith \"RAW\" repos are not available in the Core (Free) Plan.<br>\nOther ideas?</p>",
        "id": 452368560,
        "sender_full_name": "Dave Register",
        "timestamp": 1721315112
    },
    {
        "content": "<p>But they are supported in the open source type repos. It's kind of tricky: you cannot really change an existing repo to an open-source one, there is only one chance when creating the repo.</p>\n<p>It's in the very first dialog where the repo is created: select open-source as the type. From this point it's smooth sailing</p>",
        "id": 452383491,
        "sender_full_name": "Alec Leamas",
        "timestamp": 1721318868
    },
    {
        "content": "<p>I just set up a repo to verify: <a href=\"https://cloudsmith.io/~alec-leamas/repos/opencpn-docs/packages/\">https://cloudsmith.io/~alec-leamas/repos/opencpn-docs/packages/</a></p>\n<p>Uploaded a single test item just to check.</p>",
        "id": 452383871,
        "sender_full_name": "Alec Leamas",
        "timestamp": 1721318970
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"517002\">@Dave Register</span>  ^^</p>",
        "id": 452387719,
        "sender_full_name": "Alec Leamas",
        "timestamp": 1721319972
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"517002\">@Dave Register</span> <br>\nA late thought..<br>\nIn win_deps.bat there's now a function to download and copy a possible update of QuickStartGuide.zip  to \\data\\doc<br>\nBut the old files are still left and would be used by NSIS for next install file:<br>\nCMakeList.txt loads all files in data/doc<br>\n    file(GLOB_RECURSE WIKI_DOC_FILES \"${CMAKE_SOURCE_DIR}/data/doc/*\")<br>\nWe may first empty ./data/doc before update to be sure if not all new files have the same name as those already there?</p>",
        "id": 452427122,
        "sender_full_name": "Håkan Svensson",
        "timestamp": 1721331767
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"399510\">@Alec Leamas</span> <br>\nGot cloudsmith repo setup.  Thanks for the hint.</p>",
        "id": 452428315,
        "sender_full_name": "Dave Register",
        "timestamp": 1721332338
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"517002\">@Dave Register</span> <br>\nWith today's version of QuickStartGuide.zip VS2022 - NSIS succeeded to create the package. Long file names are gone. (Well... I'd to first delete what was in data\\doc\\ to get rid of old long named files. :) )<br>\nWell done! Next is to get all links to work. Further discussion in Documentation I assume.</p>",
        "id": 452558520,
        "sender_full_name": "Håkan Svensson",
        "timestamp": 1721391463
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"522729\">Dan Dickey</span> <a href=\"#narrow/stream/432618-OCPN-5.2E10-Release-plan/topic/New.20package.20installation/near/452332599\">said</a>:</p>\n<blockquote>\n<p>Also, we need to add this folder to .gitignore.</p>\n</blockquote>\n<p>Unfortunately, this is not straight forward. The directory <em>data/doc</em>  contains <em>help-web.html</em>.  This file is referenced in the build and must not be ignored. </p>\n<p>To make things more interesting it is not possible to first ignore a directory and then re-add  files like <em>help_web.html</em>.</p>\n<p>Ergo: we need to separate help_web.html and the downloaded manual into separate directories. </p>\n<p><span class=\"user-mention\" data-user-id=\"517002\">@Dave Register</span> :  thoughts?</p>",
        "id": 452602790,
        "sender_full_name": "Alec Leamas",
        "timestamp": 1721404121
    },
    {
        "content": "<p>Thought:<br>\nAnother scenario could be to include all wki documents in the repo instead of being a part of e.g win_deps.bat. This means that all future changes are handled with a normal commit and are also not forgotten in local repos. And thus delete all about data\\doc\\ from .gitignore.</p>",
        "id": 452608858,
        "sender_full_name": "Håkan Svensson",
        "timestamp": 1721405443
    },
    {
        "content": "<blockquote>\n<p>Another scenario could be to include all wki documents in the repo</p>\n</blockquote>\n<p>This will lock down the manual version to the  state when releasing opencpn. For better or worse the current approach will use latest available download. </p>\n<p>Also note that for Linux, all such documents will be removed since they are not open source. For that reason we only bundle Mac + Win manual.</p>\n<p>The correct solution is probably <a href=\"https://github.com/opencpn/OpenCPN/issues/3855\">#3855</a> which would work on all platforms and allow for continous updates just like the plugins. Thinking in these terms the current approach is probably the best since it  makes a new implementation a la <a href=\"https://github.com/opencpn/OpenCPN/issues/3855\">#3855</a> reasonably simple.</p>",
        "id": 452613410,
        "sender_full_name": "Alec Leamas",
        "timestamp": 1721406347
    },
    {
        "content": "<p>So with present functionality we can update the wiki-doc by just rebuild the v5.10 available for official download and let the user re-install the same version?<br>\nIf so it sounds handy but how can a user not present on CF  be aware of the updated inbound wiki? Well, probably nothing new for that matter. The same user won't be aware of a new O version either.</p>\n<p>A chart downloader/wiki downloader function as discussed in <a href=\"https://github.com/opencpn/OpenCPN/issues/3855\">#3855</a> sounds interesting. Can probably come in place after v5.10 if we can find a smooth way to copy files to the program folder without being seen as a virus? Would possible need something like a installer for the user to accept?</p>",
        "id": 452629605,
        "sender_full_name": "Håkan Svensson",
        "timestamp": 1721411487
    },
    {
        "content": "<p>As I said: for better or worse.</p>\n<p>We need to keep focus on the release. <a href=\"https://github.com/opencpn/OpenCPN/issues/3855\">#3855</a> is about the future.  For now we need to get 5.10 out of the doors. And this is I M O best done basically as now, but with different dirs for web_help.html and the manual</p>",
        "id": 452641854,
        "sender_full_name": "Alec Leamas",
        "timestamp": 1721415384
    },
    {
        "content": "<p>Status report:<br>\nNow CI build of Windows package fails due to long file names in the doc files.<br>\nI'll dig into that one.</p>",
        "id": 452646234,
        "sender_full_name": "Dave Register",
        "timestamp": 1721416567
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"517002\">@Dave Register</span> <br>\nYes I gave up after 4 tries:</p>\n<div class=\"codehilite\"><pre><span></span><code>Using:\nhttps://dl.cloudsmith.io/public/david-register/opencpn-docs/raw/files/QuickStartGuide-v0.2.zip\n\nFile: failed opening file &quot;C:/Builds/OCPN/OpenCPN/build/_CPack_Packages/win32/NSIS/opencpn_5.9.1.10_setup\\doc\\quick_start_guide\\chart_installation\\tb-options-charts-chartdownloader-downloadcharts-updatecat.id.opencpn_3Amanual_basic_3Aquick_start_guide_3Achart_installation_3Achartdownloader.jpg.detail.html&quot;\nlen: 281\n\n#2 Deleted above file from \\data\\doc\nFile: failed opening file &quot;C:/Builds/OCPN/OpenCPN/build/_CPack_Packages/win32/NSIS/opencpn_5.9.1.10_setup\\doc\\quick_start_guide\\chart_installation\\tb-options-charts-chartdownloader-enable.id.opencpn_3Amanual_basic_3Aquick_start_guide_3Achart_installation_3Achartdownloader.jpg.detail.html&quot;\nlen: 263\n\n#3  Deleted above file from \\data\\doc\nFile: failed opening file &quot;C:/Builds/OCPN/OpenCPN/build/_CPack_Packages/win32/NSIS/opencpn_5.9.1.10_setup\\doc\\quick_start_guide\\chart_installation\\tb-options-charts-chartdownloader-selectcat-addcat-select.id.opencpn_3Amanual_basic_3Aquick_start_guide_3Achart_installation_3Achartdownloader.png.detail.html&quot;\nlen: 280\n\n#4\nFile: failed opening file &quot;C:/Builds/OCPN/OpenCPN/build/_CPack_Packages/win32/NSIS/opencpn_5.9.1.10_setup\\doc\\quick_start_guide\\chart_installation\\tb-options-charts-chartdownloader-selectcat-addcat.id.opencpn_3Amanual_basic_3Aquick_start_guide_3Achart_installation_3Achartdownloader.png.detail.html&quot;\nlen: 273\n</code></pre></div>",
        "id": 452651444,
        "sender_full_name": "Håkan Svensson",
        "timestamp": 1721417557
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"517002\">@Dave Register</span> <br>\nNow the wiki installation builds also on my local Win. Let me guess a hard night work to shorten all paths and manage the links. Well done!<br>\nWhat I can see all wiki links are working and it's nicely viewed inside O's \"browser\".  The \"Edit\" links are still there but we can live with that for so long.<br>\nAlso is it now different dirs for web_help.html and the manual.<br>\n<span aria-label=\"clap\" class=\"emoji emoji-1f44f\" role=\"img\" title=\"clap\">:clap:</span></p>",
        "id": 452789597,
        "sender_full_name": "Håkan Svensson",
        "timestamp": 1721460245
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"522486\">@Håkan Svensson</span> <br>\n<span class=\"user-mention\" data-user-id=\"399510\">@Alec Leamas</span> </p>\n<p>I shortened raw paths to less than 140 characters.  There are still many paths that are greater than 130 chars.  So now we know the useful range.<br>\nThe doc itself is not perfect, but acceptable for Beta-3.  Coming soon now.</p>\n<p>Wiki doc data is now unzipped to \"data/doc/local\".  So it is fair to \".gitignore\" this dir.</p>",
        "id": 452842874,
        "sender_full_name": "Dave Register",
        "timestamp": 1721484257
    },
    {
        "content": "<blockquote>\n<p>So it is fair to \".gitignore\" this dir.</p>\n</blockquote>\n<p>Done:   <a href=\"https://github.com/opencpn/OpenCPN/commit/21bc86684\">21bc86684</a></p>",
        "id": 452849698,
        "sender_full_name": "Alec Leamas",
        "timestamp": 1721488171
    },
    {
        "content": "<p>Linux local builds.<br>\nWiki files copy to Win is made by win_deps.bat and there's something similar for Mac.<br>\nI may have missed a how to for Debian/Ubuntu?<br>\nWould \"INSTALL\" include this?</p>",
        "id": 452852631,
        "sender_full_name": "Håkan Svensson",
        "timestamp": 1721489542
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"522486\">Håkan Svensson</span> <a href=\"#narrow/stream/432618-OCPN-5.2E10-Release-plan/topic/New.20package.20installation/near/452852631\">said</a>:</p>\n<blockquote>\n<p>Linux local builds.<br>\nWiki files copy to Win is made by win_deps.bat and there's something similar for Mac.<br>\nI may have missed a how to for Debian/Ubuntu?<br>\nWould \"INSTALL\" include this?</p>\n</blockquote>\n<p>As I said earlier, we cannot bundle the manual for Linux since it's not open source. It is replaced by help_web.html which basically is a pointer to the <a href=\"http://opencpn.org\">opencpn.org</a> download site.</p>",
        "id": 452866369,
        "sender_full_name": "Alec Leamas",
        "timestamp": 1721495904
    },
    {
        "content": "<p>Ahh. I thought your open source cloudsmith discussion was about this, sorry.<br>\nThen we only have to regret Linux users. :(</p>",
        "id": 452868224,
        "sender_full_name": "Håkan Svensson",
        "timestamp": 1721496733
    },
    {
        "content": "<blockquote>\n<p>Then we only have to regret Linux users. :(</p>\n</blockquote>\n<p>That's one way to see it. </p>\n<p>Another is that the Linux community forces us to do the right thing. When we claim that OpenCPN is open source we cannot bundle these docs on any platform without actually breaking  our open source commitment. </p>\n<p>Anyway, we should resolve <a href=\"https://github.com/opencpn/OpenCPN/issues/3855\">#3855</a> in next cycle to  fix  this once and for all, for all platfoems</p>",
        "id": 452868820,
        "sender_full_name": "Alec Leamas",
        "timestamp": 1721497122
    }
]